<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="TIDeviceCoding, AIOT,Space&amp;Temporal Sequence Analysis,SpringBoot,liudongdong1,cloud">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>TIDeviceCoding | DaybyDay</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="DaybyDay" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">DaybyDay</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">

      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/about">
          
          <i class="fas fa-user-circle" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>about</span>
        </a>
      </li>
      
      <li>
        <a href="/resume">
          
          <i class="fa fa-user-secret" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>resume</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/gallery" class="waves-effect waves-light">
      
      <i class="fas fa-camera" style="zoom: 0.6;"></i>
      
      <span>Galleries</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">DaybyDay</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-user-circle"></i>
			
			About
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/about " style="margin-left:75px">
				  
				   <i class="fa fas fa-user-circle" style="position: absolute;left:50px" ></i>
			      
		          <span>about</span>
                  </a>
                </li>
              
                <li>

                  <a href="/resume " style="margin-left:75px">
				  
				   <i class="fa fa fa-user-secret" style="position: absolute;left:50px" ></i>
			      
		          <span>resume</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/gallery" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-camera"></i>
			
			Galleries
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/liudongdong1" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/liudongdong1" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.stocksnap.io/img-thumbs/280h/bird-perched_RDHWPJKENF.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">TIDeviceCoding</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    .toc-fixed .toc-link::before{
        position: fixed!important;/*ÂΩìtocÁöÑ‰ΩçÁΩÆÊîπ‰∏∫fixedÊó∂Ôºå.toc-link::before‰πüË¶ÅÊîπ‰∏∫fixed*/
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- ÊñáÁ´†ÂÜÖÂÆπËØ¶ÊÉÖ -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/mmwave/">
                                <span class="chip bg-color">mmwave</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/AIOT/" class="post-category">
                                AIOT
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2021-07-01
                </div>
                

                <!-- 
                    <i class="fa fa-pencil"></i> Author: liudongdong1
                  -->

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2021-11-06
                </div>
                

                <!-- 
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    4.2k
                </div>
                 -->

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    21 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <blockquote>
<p>Since each of the samples are taken at equally spaced time intervals, we have a time log of what happened during the chirp. <code>Every sample is a complex number</code>, meaning we have captured some <code>magnitude of power as well as the phase</code> of the wave at that time. So, our object will theoretically appear as an increase in power in our samples. On the other hand, we can use the distinct phases of each sample to obtain distance. <code>(Frame, chirp,virtual antennas(tx*rx),Datasample)</code></p>
<ul>
<li>Power - $P = \sqrt{I^2+Q^2}$</li>
<li>Phase - $\angle = \arctan{(\frac{I}{Q})}$</li>
</ul>
<p>($I$‚Äã‚Äã‚Äã=Imaginary Component $Q$‚Äã‚Äã‚Äã=Real Component)</p>
<ul>
<li><code>rangeFFT ÔºàÂØπ‰∏Ä‰∏™chirp ÁöÑsampleÔºâ</code>Âíå<code>dopplerFFTÔºàÂØπ‰∏Ä‰∏™FrameÁöÑ‰∏çÂêåchirp)</code>Ôºå<code>AzimuthRRF(ÂØπvirtual antenna Áª¥Â∫¶)</code></li>
</ul>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095219270.png" alt="chirp data"></p>
<h3 id="1-Profile"><a href="#1-Profile" class="headerlink" title="1. Profile"></a>1. Profile</h3><h4 id="1-ÈÖçÁΩÆÂèÇÊï∞"><a href="#1-ÈÖçÁΩÆÂèÇÊï∞" class="headerlink" title=".1. ÈÖçÁΩÆÂèÇÊï∞"></a>.1. ÈÖçÁΩÆÂèÇÊï∞</h4><p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170138432.png" alt=""></p>
<h5 id="1-start-frequency"><a href="#1-start-frequency" class="headerlink" title=".1. start frequency"></a>.1. start frequency</h5><h5 id="2-frequency-slope"><a href="#2-frequency-slope" class="headerlink" title=".2. frequency slope"></a>.2. frequency slope</h5><h5 id="3-Idle-time"><a href="#3-Idle-time" class="headerlink" title=".3. Idle time"></a>.3. Idle time</h5><p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170333232.png" alt=""></p>
<h5 id="4-ADC-start-time-‰∏çÊáÇ"><a href="#4-ADC-start-time-‰∏çÊáÇ" class="headerlink" title=".4. ADC start time(‰∏çÊáÇ)"></a>.4. ADC start time(‰∏çÊáÇ)</h5><ul>
<li><code>Synthesizer PLL ramp-up settling time, which is a function of ramp slope</code></li>
<li><code>HPF step response settling, which is a function of HPF corner frequencies</code></li>
<li><code>IF/DFE LPF settling time, which is a function of DFE output mode and sampling rate</code></li>
</ul>
<h5 id="5-Ramp-end-time"><a href="#5-Ramp-end-time" class="headerlink" title=".5. Ramp end time"></a>.5. Ramp end time</h5><p><code>The ramp end time is the sum of (a) the ADC start time, (b) the ADC sampling time and (c) the excess ramping time at the end of the ramp.</code></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170741261.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170108543.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164155446.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164232154.png" alt=""></p>
<h4 id="2-procedure"><a href="#2-procedure" class="headerlink" title=".2. procedure"></a>.2. procedure</h4><p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901171106832.png" alt=""></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Imports</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-Ë∑ùÁ¶ªËÆ°ÁÆó"><a href="#1-Ë∑ùÁ¶ªËÆ°ÁÆó" class="headerlink" title="1. Ë∑ùÁ¶ªËÆ°ÁÆó"></a>1. Ë∑ùÁ¶ªËÆ°ÁÆó</h3><p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901100023673.png" alt=""></p>
<h4 id="1-Range-FFT"><a href="#1-Range-FFT" class="headerlink" title="1. Range FFT"></a>1. Range FFT</h4><blockquote>
<p>The first step to <code>obtaining range is by performing an FFT across our ADC samples for a single chirp</code>. This unfortunately does not leave you with a single range. Instead, we obtain multiple ‚Äúrange bins‚Äù. These are exactly what they sound like, bins that store the information for various ranges.  <code>ÂØπsampleÁª¥Â∫¶</code></p>
</blockquote>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Read in chirp data</span></span><br><span class="line">adc_samples = np.loadtxt(<span class="string">'../assets/chirp.txt'</span>, dtype=np.complex_)</span><br><span class="line">print(<span class="string">"datainformation:"</span>,type(adc_samples),adc_samples.shape,<span class="string">"data[0]"</span>,adc_samples[<span class="number">0</span>]) <span class="comment">#&lt;class 'numpy.ndarray'&gt; (128,)data[0] (19+65375j)</span></span><br><span class="line"><span class="comment"># Manually cast to signed ints</span></span><br><span class="line">adc_samples.real = adc_samples.real.astype(np.int16)</span><br><span class="line">adc_samples.imag = adc_samples.imag.astype(np.int16)</span><br><span class="line">print(<span class="string">"adc_samples:"</span>,type(adc_samples),adc_samples.shape,<span class="string">"data[0]"</span>,adc_samples[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># Take a FFT across ADC samples</span></span><br><span class="line">range_bins = np.fft.fft(adc_samples)  <span class="comment">#&lt;class 'numpy.ndarray'&gt; (128,) data[0] (19-161j)</span></span><br><span class="line">print(<span class="string">"range_bins:"</span>,type(range_bins),range_bins.shape,<span class="string">"data[0]"</span>,range_bins[<span class="number">0</span>])<span class="comment">#(128,) data[0] (1212-87j)</span></span><br><span class="line"><span class="comment"># Plot the magnitudes of the range bins</span></span><br><span class="line">plt.plot(np.abs(range_bins)) </span><br><span class="line">plt.xlabel(<span class="string">'Range Bins'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Reflected Power'</span>)</span><br><span class="line">plt.title(<span class="string">'Interpreting a Single Chirp'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095419698.png" alt=""></p>
<h4 id="2-Âçï‰ΩçËΩ¨Âåñ"><a href="#2-Âçï‰ΩçËΩ¨Âåñ" class="headerlink" title="2. Âçï‰ΩçËΩ¨Âåñ"></a>2. Âçï‰ΩçËΩ¨Âåñ</h4><h5 id="1-ÂéüÁêÜÊé®ÂØº"><a href="#1-ÂéüÁêÜÊé®ÂØº" class="headerlink" title=".1. ÂéüÁêÜÊé®ÂØº"></a>.1. ÂéüÁêÜÊé®ÂØº</h5><p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185621170.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185933268.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190042611.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190139735.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164424552.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164659831.png" alt=""></p>
<blockquote>
<p>complex 2x and real smapling modes: IF=0.9*(ADC_sampling)/2</p>
</blockquote>
<p><code>the objects at some range bin index are indeed farther than the objects at the previous index</code> and closer than the objects in the next index. That‚Äôs probably what you didn‚Äôt want to hear however.</p>
<ul>
<li>$f = \frac{S2 d}{c}$ - The <em>IF signal</em> frequency produced by a single object at distance $d$ (where the object appears in the frequency spectrum after the range FFT) <ul>
<li>$f$ - Frequency</li>
<li>$S$ - Frequency slope of the signal emitted by the chirp</li>
<li>$d$ - Distance relative to the radar</li>
<li>$c$ - Speed of light <br> </li>
</ul>
</li>
<li>$\Delta f &gt; \frac{1}{T}$ - The minimum separation needed in the frequency spectrum to be resolved by the radar <br><ul>
<li>$T$ - Sampling period</li>
</ul>
</li>
</ul>
<p>Looking at the first equation and we can see there is a direct relationship between $f$ and $d$‚Ä¶</p>
<ul>
<li>$f = \frac{S2 d}{c} \Rightarrow \Delta f = \frac{S2 \Delta d}{c}$</li>
</ul>
<p>So now we have two separate equations that define $\Delta f$. Substitution can be now used.</p>
<ul>
<li>$\frac{S2 \Delta d}{c} = \Delta f \gt \frac{1}{T}$</li>
<li>$\frac{S2 \Delta d}{c} \gt \frac{1}{T}$</li>
</ul>
<p>Finally, we can solve for $\Delta d$, or the range resolution we can achieve.</p>
<ul>
<li>$\Delta d \gt \frac{c}{2} \cdot \frac{1}{ST}$</li>
</ul>
<p>Since we know $S$ is in some unit of frequency over time, we can simplify $ST$ to just $B$, or the bandwidth of chirp.</p>
<ul>
<li>$\Delta d &gt; \frac{c}{2B}$</li>
</ul>
<p>In other words,<code>the range resolution is only dependent on how large a bandwidth the chirp has</code>. Let‚Äôs see what information we have to use to try and find this range resolution.</p>
<p>Not exactly what we wanted, but the only thing we‚Äôre missing is our bandwidth $B$. We can still use these parameters to find bandwidth since it is just the span of frequency of the chirp. So, we just need to calculate how much of a frequency span the chirp takes. Ignoring converting units for now, this should be our equation:</p>
<ul>
<li>$B = S \cdot \frac{N}{F_s}$<ul>
<li>$S$ - Frequency slope (frequency/time)</li>
<li>$N$ - Number of ADC samples (samples)</li>
<li>$F_s$ - Frequency at which we sample ADC samples (samples / time)</li>
</ul>
</li>
</ul>
<h5 id="2-ËÆ°ÁÆó‰ª£Á†Å"><a href="#2-ËÆ°ÁÆó‰ª£Á†Å" class="headerlink" title=".2. ËÆ°ÁÆó‰ª£Á†Å"></a>.2. ËÆ°ÁÆó‰ª£Á†Å</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Data sampling configuration</span></span><br><span class="line">c = <span class="number">3e8</span> <span class="comment"># Speed of light (m/s)</span></span><br><span class="line">sample_rate = <span class="number">2500</span> <span class="comment"># Rate at which the radar samples from ADC (ksps - kilosamples per second)</span></span><br><span class="line">freq_slope = <span class="number">60</span> <span class="comment"># Frequency slope of the chirp (MHz/us)</span></span><br><span class="line">adc_samples = <span class="number">128</span> <span class="comment"># Number of samples from a single chirpb</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Calculating bandwidth of the chirp, accounting for unit conversion</span></span><br><span class="line">chirp_bandwidth = (freq_slope * <span class="number">1e12</span> * adc_samples) / (sample_rate * <span class="number">1e3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Using our derived equation for range resolution</span></span><br><span class="line">range_res = c / (<span class="number">2</span> * chirp_bandwidth)</span><br><span class="line">print(<span class="string">f'Range Resolution: <span class="subst">{range_res}</span> [meters]'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply the range resolution factor to the range indices</span></span><br><span class="line">ranges = np.arange(adc_samples) * range_res</span><br><span class="line">powers = np.abs(range_bins)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Now we can plot again with an x-axis that makes sense</span></span><br><span class="line">plt.plot(ranges, powers)</span><br><span class="line">plt.xlabel(<span class="string">'Range (meters)'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Reflected Power'</span>)</span><br><span class="line">plt.title(<span class="string">'Interpreting a Single Chirp'</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">chirp_bandwidth</span><br><span class="line">print(ranges)</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095734148.png" alt=""></p>
<h3 id="2-ÈÄüÂ∫¶ËÆ°ÁÆó"><a href="#2-ÈÄüÂ∫¶ËÆ°ÁÆó" class="headerlink" title="2. ÈÄüÂ∫¶ËÆ°ÁÆó"></a>2. ÈÄüÂ∫¶ËÆ°ÁÆó</h3><h4 id="1-Doppler-Effect"><a href="#1-Doppler-Effect" class="headerlink" title=".1. Doppler Effect"></a>.1. Doppler Effect</h4><blockquote>
<p>In addition to <code>multiple ADC samples</code>, we have <code>multiple chirps.</code> For an object at range ùë• from the radar, when we receive the respective ADC sample, the product will be a complex number with some phase. If the object is moving away from the radar, the respective ADC sample of the second chirp will come in at a very slightly delayed time. This is because the object also moved slightly away in that miniscule amount of time. Althought this movement is miniscule, <code>the change in phase of the wave can be clearly seen</code>. <code>ÂØπ‰∏Ä‰∏™frame chirpÁª¥Â∫¶</code></p>
</blockquote>
<p>$$<br>f‚Äô = \frac{v+v_0}{v-v_s}f<br>$$</p>
<h4 id="2-Range-FFT"><a href="#2-Range-FFT" class="headerlink" title=".2. Range FFT"></a>.2. Range FFT</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Read in frame data</span></span><br><span class="line">frame = np.load(<span class="string">'../assets/simple_frame_1.npy'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Manually cast to signed ints</span></span><br><span class="line">frame.real = frame.real.astype(np.int16)</span><br><span class="line">frame.imag = frame.imag.astype(np.int16)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Meta data about the data</span></span><br><span class="line">num_chirps = <span class="number">128</span> <span class="comment"># Number of chirps in the frame</span></span><br><span class="line">num_samples = <span class="number">128</span> <span class="comment"># Number of ADC samples per chirp</span></span><br><span class="line"></span><br><span class="line">range_plot = np.fft.fft(frame, axis=<span class="number">1</span>)  <span class="comment"># axis=1:ÊåâË°åËÆ°ÁÆó</span></span><br><span class="line">print(<span class="string">"range infor:"</span>,type(range_plot),range_plot.shape)   <span class="comment">#(128,128)</span></span><br><span class="line"><span class="comment"># Visualize Results</span></span><br><span class="line">plt.imshow(np.abs(range_plot).T)</span><br><span class="line">plt.ylabel(<span class="string">'Range Bins'</span>)</span><br><span class="line">plt.title(<span class="string">'Interpreting a Single Frame - Range'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101058961.png" alt=""></p>
<h4 id="3-Doppler-FFT"><a href="#3-Doppler-FFT" class="headerlink" title=".3. Doppler FFT"></a>.3. Doppler FFT</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Take a sequential FFT across the chirps</span></span><br><span class="line">range_doppler = np.fft.fft(range_plot, axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># FFT shift the values (explained later)</span></span><br><span class="line">range_doppler = np.fft.fftshift(range_doppler, axes=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Visualize the range-doppler plot</span></span><br><span class="line"><span class="comment"># plt.imshow(np.log(np.abs(range_doppler).T))</span></span><br><span class="line">plt.imshow(np.abs(range_doppler).T)</span><br><span class="line">plt.xlabel(<span class="string">'Doppler Bins'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Range Bins'</span>)</span><br><span class="line">plt.title(<span class="string">'Interpreting a Single Frame - Doppler'</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">plt.plot(np.abs(range_doppler))</span><br><span class="line">plt.xlabel(<span class="string">'Doppler Bins'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Signal Strength'</span>)</span><br><span class="line">plt.title(<span class="string">'Interpreting a Single Frame - Doppler'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101436884.png" alt=""></p>
<blockquote>
<p>That line in the <code>middle at doppler bin 64 is called zero doppler</code>, meaning everything along that line is <code>static/not moving relative to the radar</code>. This means everything to the <code>left (bins&lt;64) is negative doppler, or moving towards the radar</code>and the opposite for the other half of the doppler bins.</p>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028103918183.png" alt=""></p>
<ul>
<li><code>rangeFFT ÔºàÂØπ‰∏Ä‰∏™chirp ÁöÑsampleÔºâ</code>Âíå<code>dopplerFFTÔºàÂØπ‰∏Ä‰∏™FrameÁöÑ‰∏çÂêåchirp)</code>ÂÖàÂêéÈ°∫Â∫èÂΩ±Âìç‰∏çÂ§ßÔºõ</li>
</ul>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"frame infor:"</span>,type(frame),frame.shape)  <span class="comment">#frame infor: &lt;class 'numpy.ndarray'&gt; (128, 128)</span></span><br><span class="line"><span class="comment"># Range FFT -&gt; Doppler FFT</span></span><br><span class="line">range_bins = np.fft.fft(frame, axis=<span class="number">1</span>)</span><br><span class="line">fft_2d = np.fft.fft(range_bins, axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Doppler FFT -&gt; Range FFT</span></span><br><span class="line">doppler_bins = np.fft.fft(frame, axis=<span class="number">0</span>)</span><br><span class="line">rfft_2d = np.fft.fft(doppler_bins, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Max power difference: '</span>, np.abs(fft_2d - rfft_2d).max())  <span class="comment">#Max power difference:  5.64766185425834e-11</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="4-Âçï‰ΩçËΩ¨Âåñ"><a href="#4-Âçï‰ΩçËΩ¨Âåñ" class="headerlink" title=".4. Âçï‰ΩçËΩ¨Âåñ"></a>.4. Âçï‰ΩçËΩ¨Âåñ</h4><h5 id="1-ÂéüÁêÜÊé®ÂØº-1"><a href="#1-ÂéüÁêÜÊé®ÂØº-1" class="headerlink" title=".1. ÂéüÁêÜÊé®ÂØº"></a>.1. ÂéüÁêÜÊé®ÂØº</h5><p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028092818353.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093021780.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093131613.png" alt="image-20211028093131613"></p>
<p>All the units of the data we produced are of some type of ‚Äúbin‚Äù. Similarly to range resolution, we <code>have a doppler resolution aka velocity resolution</code>. </p>
<ul>
<li>$\omega = \frac{4\pi vT_c}{\lambda}$ - Rotational frequency of phasor due to object moving at $v$ velocity<ul>
<li>$v$ - Velocity</li>
<li>$T_c$ - Sampling period</li>
<li>$\lambda$ - Wavelength</li>
</ul>
</li>
<li>$\Delta\omega \gt \frac{2\pi}{N}$ - Minimum change in rotation of phasor to be resolved by radar<ul>
<li>$N$‚Äã - Number of sample points</li>
</ul>
</li>
</ul>
<h5 id="2-ËÆ°ÁÆó‰ª£Á†Å-1"><a href="#2-ËÆ°ÁÆó‰ª£Á†Å-1" class="headerlink" title=".2. ËÆ°ÁÆó‰ª£Á†Å"></a>.2. ËÆ°ÁÆó‰ª£Á†Å</h5><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Data sampling configuration</span></span><br><span class="line">c = <span class="number">3e8</span> <span class="comment"># Speed of light (m/s)</span></span><br><span class="line">sample_rate = <span class="number">2500</span> <span class="comment"># Rate at which the radar samples from ADC (ksps - kilosamples per second)</span></span><br><span class="line">freq_slope = <span class="number">60</span> <span class="comment"># Frequency slope of the chirp (MHz/us)</span></span><br><span class="line">adc_samples = <span class="number">128</span> <span class="comment"># Number of samples from a single chirp</span></span><br><span class="line"></span><br><span class="line">start_freq = <span class="number">77.4201</span> <span class="comment"># Starting frequency of the chirp (GHz)</span></span><br><span class="line">idle_time = <span class="number">30</span> <span class="comment"># Time before starting next chirp (us)</span></span><br><span class="line">ramp_end_time = <span class="number">62</span> <span class="comment"># Time after sending each chirp (us)</span></span><br><span class="line">num_chirps = <span class="number">128</span> <span class="comment"># Number of chirps per frame</span></span><br><span class="line">num_tx = <span class="number">2</span> <span class="comment"># Number of transmitters</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Range resolution    ÔºüÔºü ËøôÈáåÊ≤°ÊúâÁúãÊáÇ</span></span><br><span class="line">range_res = (c * sample_rate * <span class="number">1e3</span>) / (<span class="number">2</span> * freq_slope * <span class="number">1e12</span> * adc_samples)</span><br><span class="line">print(<span class="string">f'Range Resolution: <span class="subst">{range_res}</span> [meters/second]'</span>)  <span class="comment">#Range Resolution: 0.048828125 [meters/second]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply the range resolution factor to the range indices</span></span><br><span class="line">ranges = np.arange(adc_samples) * range_res</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Make sure your equation translates to the following</span></span><br><span class="line">velocity_res = c / (<span class="number">2</span> * start_freq * <span class="number">1e9</span> * (idle_time + ramp_end_time) * <span class="number">1e-6</span> * num_chirps * num_tx)</span><br><span class="line">print(<span class="string">f'Velocity Resolution: <span class="subst">{velocity_res}</span> [meters/second]'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply the velocity resolution factor to the doppler indicies</span></span><br><span class="line">velocities = np.arange(num_chirps) - (num_chirps // <span class="number">2</span>)</span><br><span class="line">velocities = velocities * velocity_res</span><br><span class="line"></span><br><span class="line">powers = np.abs(range_doppler)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot with units</span></span><br><span class="line">plt.imshow(powers.T, extent=[velocities.min(), velocities.max(), ranges.max(), ranges.min()])</span><br><span class="line">plt.xlabel(<span class="string">'Velocity (meters per second)'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Range (meters)'</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">plt.plot(velocities, powers)</span><br><span class="line">plt.xlabel(<span class="string">'Velocity (meters per second)'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Reflected Power'</span>)</span><br><span class="line">plt.title(<span class="string">'Interpreting a Single Frame - Doppler'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901105825831.png" alt=""></p>
<h3 id="3-ËßíÂ∫¶ËÆ°ÁÆó"><a href="#3-ËßíÂ∫¶ËÆ°ÁÆó" class="headerlink" title="3. ËßíÂ∫¶ËÆ°ÁÆó"></a>3. ËßíÂ∫¶ËÆ°ÁÆó</h3><p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111120724.png" alt=""></p>
<h4 id="1-Range-FFT-1"><a href="#1-Range-FFT-1" class="headerlink" title=".1. Range FFT"></a>.1. Range FFT</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Read in frame data</span></span><br><span class="line">frame = np.load(<span class="string">'../assets/doppler_example_1.npy'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Manually cast to signed ints</span></span><br><span class="line">frame.real = frame.real.astype(np.int16)</span><br><span class="line">frame.imag = frame.imag.astype(np.int16)</span><br><span class="line"></span><br><span class="line">print(<span class="string">f'Shape of frame: <span class="subst">{frame.shape}</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Meta data about the data</span></span><br><span class="line">num_chirps = <span class="number">128</span> <span class="comment"># Number of chirps in the frame</span></span><br><span class="line">num_samples = <span class="number">128</span> <span class="comment"># Number of ADC samples per chirp</span></span><br><span class="line"></span><br><span class="line">num_tx = <span class="number">2</span></span><br><span class="line">num_rx = <span class="number">4</span></span><br><span class="line">num_vx = num_tx * num_rx <span class="comment"># Number of virtual antennas</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">range_plot = np.fft.fft(frame, axis=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Visualize Results</span></span><br><span class="line">plt.imshow(np.abs(range_plot.sum(<span class="number">1</span>)).T)</span><br><span class="line">plt.ylabel(<span class="string">'Range Bins'</span>)</span><br><span class="line">plt.title(<span class="string">'Interpreting a Single Frame - Range'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111228073.png" alt=""></p>
<h4 id="2-Doppler-FFT"><a href="#2-Doppler-FFT" class="headerlink" title=".2. Doppler FFT"></a>.2. Doppler FFT</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">range_doppler = np.fft.fft(range_plot, axis=<span class="number">0</span>)</span><br><span class="line">range_doppler = np.fft.fftshift(range_doppler, axes=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Visualize Results</span></span><br><span class="line">plt.imshow(np.log(np.abs(range_doppler).T).sum(<span class="number">1</span>))</span><br><span class="line">plt.xlabel(<span class="string">'Doppler Bins'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Range Bins'</span>)</span><br><span class="line">plt.title(<span class="string">'Interpreting a Single Frame - Doppler'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111309395.png" alt=""></p>
<h4 id="3-Azimuth-FFT"><a href="#3-Azimuth-FFT" class="headerlink" title=".3.  Azimuth FFT"></a>.3.  Azimuth FFT</h4><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">num_angle_bins = <span class="number">64</span></span><br><span class="line">padding = ((<span class="number">0</span>,<span class="number">0</span>), (<span class="number">0</span>,num_angle_bins-range_doppler.shape[<span class="number">1</span>]), (<span class="number">0</span>,<span class="number">0</span>))</span><br><span class="line">range_azimuth = np.pad(range_doppler, padding, mode=<span class="string">'constant'</span>)</span><br><span class="line">range_azimuth = np.fft.fft(range_azimuth, axis=<span class="number">1</span>)</span><br><span class="line">range_azimuth = range_azimuth</span><br><span class="line"><span class="comment"># Visualize Results</span></span><br><span class="line">plt.imshow(np.log(np.abs(range_azimuth).sum(<span class="number">0</span>).T))</span><br><span class="line">plt.xlabel(<span class="string">'Azimuth (Angle) Bins'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Range Bins'</span>)</span><br><span class="line">plt.title(<span class="string">'Interpreting a Single Frame - Azimuth'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111409348.png" alt=""></p>
<h4 id="4-ÂéüÁêÜÊé®ÂØº"><a href="#4-ÂéüÁêÜÊé®ÂØº" class="headerlink" title=".4. ÂéüÁêÜÊé®ÂØº"></a>.4. ÂéüÁêÜÊé®ÂØº</h4><p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901165336582.png" alt=""></p>
<h3 id="4-Noise-Removal"><a href="#4-Noise-Removal" class="headerlink" title="4. Noise Removal"></a>4. Noise Removal</h3><h4 id="1-ÂéªÈô§ÂÖ∑Êúâ0ÁöÑÂ§öÊôÆÂãíÈÄüÂ∫¶‰ø°Âè∑"><a href="#1-ÂéªÈô§ÂÖ∑Êúâ0ÁöÑÂ§öÊôÆÂãíÈÄüÂ∫¶‰ø°Âè∑" class="headerlink" title=".1. ÂéªÈô§ÂÖ∑Êúâ0ÁöÑÂ§öÊôÆÂãíÈÄüÂ∫¶‰ø°Âè∑"></a>.1. ÂéªÈô§ÂÖ∑Êúâ0ÁöÑÂ§öÊôÆÂãíÈÄüÂ∫¶‰ø°Âè∑</h4><blockquote>
<p>0Â§öÊôÆÂãíÊª§Ê≥¢ÁöÑÁº∫ÁÇπÊòØÈõ∑Ëææ‰∏çËÉΩÊ£ÄÊµãÂà∞Ë∑ØÂæÑ‰∏≠ÁöÑÈùôÊ≠¢ÁõÆÊ†á, ËøôÂ∞ÜÂØºËá¥Ê£ÄÊµãÂ§±Ë¥•.</p>
</blockquote>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clutter_removal</span><span class="params">(input_val, axis=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="string">"""Perform basic static clutter removal by removing the mean from the input_val on the specified doppler axis.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        input_val (ndarray): Array to perform static clutter removal on. Usually applied before performing doppler FFT.</span></span><br><span class="line"><span class="string">            e.g. [num_chirps, num_vx_antennas, num_samples], it is applied along the first axis.</span></span><br><span class="line"><span class="string">        axis (int): Axis to calculate mean of pre-doppler.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        ndarray: Array with static clutter removed.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="comment"># Reorder the axes</span></span><br><span class="line">    reordering = np.arange(len(input_val.shape))   <span class="comment">#[0,1,2,] </span></span><br><span class="line">    reordering[<span class="number">0</span>] = axis</span><br><span class="line">    reordering[axis] = <span class="number">0</span></span><br><span class="line">    input_val = input_val.transpose(reordering)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Apply static clutter removal</span></span><br><span class="line">    mean = input_val.transpose(reordering).mean(<span class="number">0</span>)</span><br><span class="line">    output_val = input_val - mean</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> output_val.transpose(reordering)</span><br></pre></td></tr></tbody></table></figure>

<h4 id="2-Âõ∫ÂÆöÊùÇÊ≥¢ÈòàÂÄºÂàÜÂâ≤-fixed-clutter-thresholding"><a href="#2-Âõ∫ÂÆöÊùÇÊ≥¢ÈòàÂÄºÂàÜÂâ≤-fixed-clutter-thresholding" class="headerlink" title=".2. Âõ∫ÂÆöÊùÇÊ≥¢ÈòàÂÄºÂàÜÂâ≤( fixed clutter thresholding)"></a>.2. <strong>Âõ∫ÂÆöÊùÇÊ≥¢ÈòàÂÄºÂàÜÂâ≤( fixed clutter thresholding)</strong></h4><blockquote>
<p>Âú®Âõ∫ÂÆöÈòàÂÄºÁöÑÊÉÖÂÜµ‰∏ã, ÂØπÈòàÂÄº‰ª•‰∏ãÁöÑ‰ø°Âè∑ËøõË°åÂâîÈô§. ËØ•ÊñπÊ≥ïÂú®Ê£ÄÊµãÈòàÂÄºËÆæÁΩÆËøáÈ´òÁöÑÊÉÖÂÜµ‰∏ã, ‰ºöÂá∫Áé∞ÊûÅÂ∞ëÁöÑËôöË≠¶(false alarms), ‰ΩÜÂêåÊó∂‰πü‰ºöÊé©ÁõñÊúâÊïàÁõÆÊ†á. Â¶ÇÊûúÈòàÂÄºËÆæÁΩÆÂæóÂ§™‰Ωé, Âàô‰ºöÂØºËá¥ËøáÂ§öÁöÑÈîôËØØË≠¶Êä•. Â¶ÇÂú®‰∏ãÂõæ‰∏≠, Âõ∫ÂÆöÈòàÂÄºÂØºËá¥ËôöË≠¶ÂíåÊºèÊ£ÄÂº±ÁõÆÊ†á.</p>
<ul>
<li>ËôöË≠¶Áéá(false alarm rateÔºâÊòØÈõ∑ËææÈÄöËøáÂô™Â£∞ÊàñÂÖ∂‰ªñÂπ≤Êâ∞‰ø°Âè∑ÂèëÁé∞ÈîôËØØ‰ø°Âè∑ÁöÑÈÄüÁéá. ÂÆÉÊòØÂú®Ê≤°ÊúâÊúâÊïàÁõÆÊ†áÂ≠òÂú®ÁöÑÊÉÖÂÜµ‰∏ã, Ê£ÄÊµãÂà∞Èõ∑ËææÁõÆÊ†áÂ≠òÂú®ÁöÑ‰∏ÄÁßçÂ∫¶Èáè.</li>
</ul>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104240757.png" alt=""></p>
<h4 id="3-Âä®ÊÄÅÈòàÂÄºÂàÜÂâ≤-dynamic-thresholding"><a href="#3-Âä®ÊÄÅÈòàÂÄºÂàÜÂâ≤-dynamic-thresholding" class="headerlink" title=".3. Âä®ÊÄÅÈòàÂÄºÂàÜÂâ≤(dynamic thresholding)"></a>.3. <strong>Âä®ÊÄÅÈòàÂÄºÂàÜÂâ≤(dynamic thresholding)</strong></h4><blockquote>
<p>Âä®ÊÄÅÈòàÂÄºÂàÜÂâ≤ÈÄöËøáÊîπÂèòÈòàÂÄºÊ∞¥Âπ≥Êù•Èôç‰ΩéËØØÊä•Áéá. Âà©Áî®ËøôÁßçÂêç‰∏∫ <strong>CFAR(Constant False Alarm Rate)</strong>ÁöÑÊäÄÊúØ, ÂèØ‰ª•<code>ÁõëÊµãÊØè‰∏Ä‰∏™ÊàñÊØè‰∏ÄÁªÑË∑ùÁ¶ªÂ§öÊôÆÂãíbinÁöÑÂô™Â£∞</code>, Âπ∂Â∞Ü‰ø°Âè∑‰∏éÊú¨Âú∞ÁöÑÂô™Â£∞Ê∞¥Âπ≥ËøõË°åÊØîËæÉ. Ê≠§ÊØîËæÉÁî®‰∫éÂàõÂª∫‰∏Ä‰∏™ÈòàÂÄº, ËØ•ÈòàÂÄº‰∏∫<strong>CFAR</strong>.</p>
<ul>
<li><strong>CFAR</strong> Ê†πÊçÆËΩ¶ËæÜÂë®Âõ¥ÁéØÂ¢ÉÂèòÂåñÊ£ÄÊµãÈòàÂÄº. ÈÄöËøáÂÆûÁé∞ÊÅíÂÆöÁöÑËôöË≠¶Áéá, ÂèØ‰ª•Ëß£ÂÜ≥ËôöË≠¶ÈóÆÈ¢ò.</li>
</ul>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104419947.png" alt=""></p>
<h5 id="1-Cell-Averaging-CFAR-CA-CFAR"><a href="#1-Cell-Averaging-CFAR-CA-CFAR" class="headerlink" title="1. Cell Averaging CFAR (CA-CFAR)"></a>1. Cell Averaging CFAR (CA-CFAR)</h5><blockquote>
<p><strong>CA-CFAR</strong>ÊµãÈáèË¢´ÊµãÂçïÂÖÉ(CUT)‰∏§‰æßÁöÑËÆ≠ÁªÉÂçïÂÖÉÁöÑÂπ≤Êâ∞Á®ãÂ∫¶. ÁÑ∂ÂêéÁî®Ëøô‰∏™ÊµãÈáèÊù•ÂÜ≥ÂÆöÁõÆÊ†áÊòØÂê¶Âú®Ë¢´ÊµãÂçïÂÖÉ(CUT)‰∏≠. ËØ•ËøáÁ®ãÈÅçÂéÜÊâÄÊúâÁöÑË∑ùÁ¶ªÂ§öÊôÆÂãíÂçïÂÖÉ, Âπ∂Ê†πÊçÆÂô™Â£∞‰º∞ËÆ°Á°ÆÂÆöÁõÆÊ†áÁöÑÂ≠òÂú®.</p>
</blockquote>
<p>FFT binsÊòØÂú®ÈÄöËøáÂ§ö‰∏™ÂïÅÂïæÁöÑ<code>Range Doppler FFT</code>ÁîüÊàêÁöÑ. <strong>CA-CFAR</strong>‰ΩøÁî®ÊªëÂä®Á™óÂè£ÈÅçÂéÜÊï¥‰∏™FFT bins . ÊØè‰∏™Á™óÂè£Áî±‰ª•‰∏ãÂçïÂÖÉÊ†ºÁªÑÊàêÔºö</p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028105734872.png" alt=""></p>
<ul>
<li><strong>Cell Under Test</strong>ÔºöÈÄöËøá<code>ÊØîËæÉ‰ø°Âè∑ÁîµÂπ≥ÂíåÂô™Â£∞‰º∞ËÆ°ÂÄº(ÈòàÂÄº)Êù•Ê£ÄÊµãÁõÆÊ†áÊòØÂê¶Â≠òÂú®ÁöÑÂçïÂÖÉ</code>.</li>
<li><strong>Training Cells</strong>ÔºöÂú®ËÆ≠ÁªÉÂçïÂÖÉ‰∏ä<code>ÊµãÈáèÂô™Â£∞Ê∞¥Âπ≥</code>. ËÆ≠ÁªÉÂçïÂÖÉÂèØ‰ª•ÂàÜ‰∏∫‰∏§‰∏™Âå∫Âüü, ÊªûÂêé‰∫éCUTÁöÑÂçïÂÖÉÁß∞‰∏∫<code>ÊªûÂêéËÆ≠ÁªÉÂçïÂÖÉ,</code> ËÄå<code>È¢ÜÂÖà‰∫éCUTÁöÑÂçïÂÖÉÁß∞‰∏∫ÂâçÂØºËÆ≠ÁªÉÂçïÂÖÉ</code>. ÈÄöËøáÂØπËÆ≠ÁªÉÂçïÂÖÉ‰∏ãÁöÑÂô™Â£∞ËøõË°åÂπ≥ÂùáÊù•‰º∞ËÆ°Âô™Â£∞. Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ã, ÈááÁî®ÂâçÂØºÊàñÊªûÂêéÁöÑÂô™Â£∞Âπ≥ÂùáÂÄº, ËÄåÂú®ÂÖ∂‰ªñÊÉÖÂÜµ‰∏ã, ÂàôÂêàÂπ∂ÂâçÂØºÂíåÊªûÂêéÁöÑÂô™Â£∞Âπ≥ÂùáÂÄº, Âπ∂ËÄÉËôë‰∏§ËÄÖ‰∏≠ËæÉÈ´òÁöÑ‰∏Ä‰∏™Áî®‰∫éÂô™Â£∞Ê∞¥Âπ≥‰º∞ËÆ°. ËÆ≠ÁªÉÂçïÂÖÉÁöÑÊï∞ÈáèÂ∫îÊ†πÊçÆÁéØÂ¢ÉÁ°ÆÂÆö. Â¶ÇÊûú‰∫§ÈÄöÂú∫ÊôØÁπÅÂøô, ÂàôÂ∫î‰ΩøÁî®ËæÉÂ∞ëÁöÑËÆ≠ÁªÉÂçïÂÖÉ, Âõ†‰∏∫Èó¥ÈöîËæÉËøëÁöÑÁõÆÊ†á‰ºöÂΩ±ÂìçÂô™Â£∞‰º∞ËÆ°.</li>
<li><strong>Guard Cells</strong> ÔºöÁ¥ßÈÇªCUTÁöÑÂçïÂÖÉË¢´ÊåáÂÆö‰∏∫‰øùÊä§ÂçïÂÖÉ. <code>‰øùÊä§ÂçïÂÖÉÁöÑÁõÆÁöÑÊòØÈÅøÂÖçÁõÆÊ†á‰ø°Âè∑Ê≥ÑÊºèÂà∞ËÆ≠ÁªÉÂçïÂÖÉ‰∏≠</code>, ËøôÂèØËÉΩ‰ºöÂØπÂô™Â£∞‰º∞ËÆ°‰∫ßÁîü‰∏çÂà©ÂΩ±Âìç. ‰øùÊä§ÂçïÂÖÉÁöÑÊï∞ÈáèÂ∫î<code>Ê†πÊçÆÁõÆÊ†á‰ø°Âè∑‰ªéË¢´ÊµãÂçïÂÖÉ‰∏≠Ê≥ÑÊºèÂá∫Êù•ÁöÑÊÉÖÂÜµÊù•Á°ÆÂÆö. Â¶ÇÊûúÁõÆÊ†áÂèçÂ∞ÑÂæàÂº∫, ÂÆÉ‰ª¨ÈÄöÂ∏∏‰ºöËøõÂÖ•Âë®Âõ¥ÁöÑÂçïÂÖÉ</code>. „ÄÄ</li>
<li><strong>Threshold Factor (Offset)</strong>Ôºö‰ΩøÁî®<code>ÂÅèÁßªÂÄºÊù•Áº©ÊîæÂô™Â£∞ÈòàÂÄº</code>. Â¶ÇÊûú‰ø°Âè∑Âº∫Â∫¶‰ª•ÂØπÊï∞ÂΩ¢ÂºèÂÆö‰πâ, ÂàôÂ∞ÜÊ≠§ÂÅèÁßªÂÄºÊ∑ªÂä†Âà∞Âπ≥ÂùáÂô™Â£∞‰º∞ËÆ°‰∏≠, Âê¶ÂàôÁõ∏‰πò.</li>
</ul>
<h6 id="1-1d-CA-CFAR"><a href="#1-1d-CA-CFAR" class="headerlink" title=".1. 1d CA-CFAR"></a>.1. 1d CA-CFAR</h6><p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111153793.png" alt=""></p>
<ol>
<li>Á°ÆÂÆöËÆ≠ÁªÉÂçïÂÖÉÂíå‰øùÂç´ÂçïÂÖÉÁöÑÊï∞Èáè</li>
<li>ÂºÄÂßãÂú®Êï¥‰∏™FFT 1DÈòµÂàó‰∏ä‰∏ÄÊ¨°ÊªëÂä®‰∏Ä‰∏™ÂçïÂÖÉÊ†ºÁöÑÁ™óÂè£. ÊÄªÁ™óÂè£Â§ßÂ∞èÂ∫î‰∏∫Ôºö2ÔºàT + GÔºâ+ CUT</li>
<li>ÂØπ‰∫éÊØè‰∏ÄÊ≠•, Â∞Ü<code>ÊâÄÊúâÂâçÂØºÊàñÊªûÂêéËÆ≠ÁªÉÂçïÂÖÉÂÜÖÁöÑ‰ø°Âè∑ÔºàÂô™Â£∞ÔºâÁõ∏Âä†</code></li>
<li>ÂØπÊÄªÂíåÊ±ÇÂπ≥ÂùáÂÄº‰ª•Á°ÆÂÆöÂô™Â£∞ÈòàÂÄº</li>
<li>‰ΩøÁî®ÈÄÇÂΩìÁöÑÂÅèÁßªÈáèÂÄºÁº©ÊîæÈòàÂÄº</li>
<li>Âú®CUT‰∏≠ÁöÑË¢´Êµã‰ø°Âè∑‰ªéÁ™óÂè£Ëµ∑ÁÇπT + G + 1ÂºÄÂßãÁöÑ</li>
<li>Â∞Ü5‰∏≠ÊµãÈáèÁöÑ‰ø°Âè∑‰∏é4‰∏≠ÊµãÈáèÁöÑÈòàÂÄºËøõË°åÊØîËæÉ</li>
<li>Â¶ÇÊûúÂú®CUT‰∏≠ÊµãÈáèÁöÑ‰ø°Âè∑ÁîµÂπ≥Â∞è‰∫éÊâÄÊµãÈáèÁöÑÈòàÂÄº, ÂàôÂ∞Ü0ÂÄºÂàÜÈÖçÁªôCUT‰∏≠ÁöÑ‰ø°Âè∑, Âê¶ÂàôÂàÜÈÖç1.</li>
</ol>
<figure class="highlight matlab"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% Implement 1D CFAR using lagging cells on the given noise and target scenario.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% Close and delete all currently open figures</span></span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line"><span class="comment">% Data_points</span></span><br><span class="line">Ns = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">% Generate random noise</span></span><br><span class="line">s=<span class="built_in">abs</span>(<span class="built_in">randn</span>(Ns,<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">%Targets location. Assigning bin 100, 200, 300 and 700 as Targets with the amplitudes of 8, 9, 4, 11.</span></span><br><span class="line">s([<span class="number">100</span> ,<span class="number">200</span>, <span class="number">350</span>, <span class="number">700</span>])=[<span class="number">8</span> <span class="number">15</span> <span class="number">7</span> <span class="number">13</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">%plot the output</span></span><br><span class="line"><span class="built_in">plot</span>(s);</span><br><span class="line"></span><br><span class="line"><span class="comment">% <span class="doctag">TODO:</span> Apply CFAR to detect the targets by filtering the noise.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 1. Define the following:</span></span><br><span class="line"><span class="comment">% 1a. Training Cells</span></span><br><span class="line">T = <span class="number">12</span>;</span><br><span class="line"><span class="comment">% 1b. Guard Cells </span></span><br><span class="line">G = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">% Offset : Adding room above noise threshold for desired SNR </span></span><br><span class="line">offset=<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">% Vector to hold threshold values </span></span><br><span class="line">threshold_cfar = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">%Vector to hold final signal after thresholding</span></span><br><span class="line">signal_cfar = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">% 2. Slide window across the signal length</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:(Ns-(G+T+<span class="number">1</span>))     </span><br><span class="line"></span><br><span class="line">    <span class="comment">% 2. - 5. Determine the noise threshold by measuring it within the training cells</span></span><br><span class="line"></span><br><span class="line">    noise_level =sum(s(<span class="built_in">i</span>:<span class="built_in">i</span>+T<span class="number">-1</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 6. Measuring the signal within the CUT</span></span><br><span class="line"></span><br><span class="line">    threshold = (noise_level/T)*offset;</span><br><span class="line">    threshold_cfar=[threshold_cfar,{threshold}];</span><br><span class="line"></span><br><span class="line">    signal=s(<span class="built_in">i</span>+T+G);</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 8. Filter the signal above the threshold</span></span><br><span class="line">    <span class="keyword">if</span> (signal&lt;threshold)</span><br><span class="line">        signal=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    signal_cfar = [signal_cfar, {signal}];</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">% plot the filtered signal</span></span><br><span class="line"><span class="built_in">plot</span> (cell2mat(signal_cfar),<span class="string">'g--'</span>);</span><br><span class="line"><span class="comment">% plot original sig, threshold and filtered signal within the same figure.</span></span><br><span class="line"><span class="built_in">figure</span>,<span class="built_in">plot</span>(s);</span><br><span class="line"><span class="built_in">hold</span> on,<span class="built_in">plot</span>(cell2mat(<span class="built_in">circshift</span>(threshold_cfar,G)),<span class="string">'r--'</span>,<span class="string">'LineWidth'</span>,<span class="number">2</span>)</span><br><span class="line"><span class="built_in">hold</span> on, <span class="built_in">plot</span> (cell2mat(<span class="built_in">circshift</span>(signal_cfar,(T+G))),<span class="string">'g--'</span>,<span class="string">'LineWidth'</span>,<span class="number">4</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">'Signal'</span>,<span class="string">'CFAR Threshold'</span>,<span class="string">'detection'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110327085.png" alt=""></p>
<h6 id="2-2D-CA-CFAR"><a href="#2-2D-CA-CFAR" class="headerlink" title=".2. 2D CA-CFAR"></a>.2. 2D CA-CFAR</h6><blockquote>
<p>‰∫åÁª¥ÊÅíËôöË≠¶Á±ª‰ºº‰∫é‰∏ÄÁª¥ÊÅíËôöË≠¶, ‰ΩÜÂú®<code>Ë∑ùÁ¶ªÂ§öÊôÆÂãíÂùóÁöÑ‰∏§‰∏™Áª¥Â∫¶‰∏äÈÉΩÂÆûÁé∞‰∫Ü</code>. 2D CA-CFARÂåÖÊã¨ËÆ≠ÁªÉÂçïÂÖÉ,Ë¢´ÊµãÂçïÂÖÉ‰ª•Âèä‰øùÊä§ÂçïÂÖÉ, ‰ª•Èò≤Ê≠¢ÁõÆÊ†á‰ø°Âè∑ÂØπÂô™Â£∞‰º∞ËÆ°ÁöÑÂΩ±Âìç.</p>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110438197.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111210885.png" alt=""></p>
<ol>
<li>Á°ÆÂÆöÊØè‰∏™Áª¥Â∫¶TrÂíåTdÁöÑËÆ≠ÁªÉÂçïÂÖÉÊï∞. ÂêåÊ†∑, ÈÄâÊã©‰øùÊä§ÂçïÂÖÉÊ†ºGrÂíåGdÁöÑÊï∞Èáè.</li>
<li>Âú®Êï¥‰∏™ÂçïÂÖÉÁü©Èòµ‰∏äÊªëÂä®ÂæÖÊµãÂçïÂÖÉ(CUT).</li>
<li>ÈÄâÊã©ÊÄªÁöÑÂåÖÂê´ËÆ≠ÁªÉ, ‰øùÊä§ÂíåÊµãËØïÂçïÂÖÉÁöÑÁΩëÊ†º. Grid Size = (2Tr+2Gr+1)(2Td+2Gd+1).</li>
<li>‰øùÊä§Âå∫ÂüüÂíåË¢´ÊµãÂçïÂÖÉÁöÑÊÄªÊï∞Ôºö(2Gr+1)(2Gd+1).</li>
<li>ËÆ≠ÁªÉÂçïÂÖÉÁöÑÊÄªÊï∞‰∏∫Ôºö(2Tr+2Gr+1)(2Td+2Gd+1) - (2Gr+1)(2Gd+1)</li>
<li><code>ÊµãÈáèÂπ∂Âπ≥ÂùáÊâÄÊúâËÆ≠ÁªÉÂçïÂÖÉÁöÑÂô™Â£∞, Âπ∂Ëé∑ÂæóÈòàÂÄº</code>.</li>
<li><code>Â∞ÜÂÅèÁßªÈáèÔºàÂ¶ÇÊûú‰ª•dB‰∏∫Âçï‰ΩçÁöÑ‰ø°Âè∑Âº∫Â∫¶ÔºâÊ∑ªÂä†Âà∞ÈòàÂÄº, ‰ª•Â∞ÜÈîôËØØË≠¶Êä•‰øùÊåÅÂú®ÊúÄ‰ΩéÊ∞¥Âπ≥.</code></li>
<li>Á°ÆÂÆö<code>Ë¢´ÊµãÂçïÂÖÉÁöÑ‰ø°Âè∑ÁîµÂπ≥.</code></li>
<li>Â¶ÇÊûúCUT‰ø°Âè∑ÁîµÂπ≥Â§ß‰∫éÈòàÂÄº, ÂàôÂ∞ÜÂÄºÂàÜÈÖç‰∏∫1, Âê¶ÂàôÂ∞ÜÂÖ∂Á≠â‰∫éÈõ∂.</li>
<li>Áî±‰∫éË¢´ÊµãÂçïÂÖÉ‰∏ç‰Ωç‰∫éËæπÁºò, ËÄåËÆ≠ÁªÉÂçïÂÖÉÂç†ÊçÆ‰∫ÜËæπÁºò, Êàë‰ª¨Â∞ÜËæπÁºòÊäëÂà∂‰∏∫Èõ∂. ‰ªª‰ΩïÊó¢‰∏çÊòØ1‰πü‰∏çÊòØ0ÁöÑÂçïÂÖÉÊ†ºÂÄº, ‰∏∫ÂÖ∂ÂàÜÈÖç‰∏Ä‰∏™Ôºê.</li>
</ol>
<figure class="highlight matlab"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% *%TODO* :</span></span><br><span class="line"><span class="comment">%Select the number of Training Cells in both the dimensions.</span></span><br><span class="line"></span><br><span class="line">Tr=<span class="number">10</span>;</span><br><span class="line">Td=<span class="number">8</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">% *%TODO* :</span></span><br><span class="line"><span class="comment">%Select the number of Guard Cells in both dimensions around the Cell under </span></span><br><span class="line"><span class="comment">%test (CUT) for accurate estimation</span></span><br><span class="line"></span><br><span class="line">Gr=<span class="number">4</span>;</span><br><span class="line">Gd=<span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">% *%TODO* :</span></span><br><span class="line"><span class="comment">% offset the threshold by SNR value in dB</span></span><br><span class="line"></span><br><span class="line">off_set=<span class="number">1.4</span>;</span><br><span class="line"><span class="comment">% *%TODO* :</span></span><br><span class="line"><span class="comment">%design a loop such that it slides the CUT across range doppler map by</span></span><br><span class="line"><span class="comment">%giving margins at the edges for Training and Guard Cells.</span></span><br><span class="line"><span class="comment">%For every iteration sum the signal level within all the training</span></span><br><span class="line"><span class="comment">%cells. To sum convert the value from logarithmic to linear using db2pow</span></span><br><span class="line"><span class="comment">%function. Average the summed values for all of the training</span></span><br><span class="line"><span class="comment">%cells used. After averaging convert it back to logarithimic using pow2db.</span></span><br><span class="line"><span class="comment">%Further add the offset to it to determine the threshold. Next, compare the</span></span><br><span class="line"><span class="comment">%signal under CUT with this threshold. If the CUT level &gt; threshold assign</span></span><br><span class="line"><span class="comment">%it a value of 1, else equate it to 0.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% Use RDM[x,y] as the matrix from the output of 2D FFT for implementing</span></span><br><span class="line"><span class="comment">% CFAR</span></span><br><span class="line"></span><br><span class="line">RDM = RDM/<span class="built_in">max</span>(<span class="built_in">max</span>(RDM)); <span class="comment">% Normalizing</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% *%TODO* :</span></span><br><span class="line"><span class="comment">% The process above will generate a thresholded block, which is smaller </span></span><br><span class="line"><span class="comment">%than the Range Doppler Map as the CUT cannot be located at the edges of</span></span><br><span class="line"><span class="comment">%matrix. Hence,few cells will not be thresholded. To keep the map size same</span></span><br><span class="line"><span class="comment">% set those values to 0. </span></span><br><span class="line"></span><br><span class="line"><span class="comment">%Slide the cell under test across the complete martix,to note: start point</span></span><br><span class="line"><span class="comment">%Tr+Td+1 and Td+Gd+1</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = Tr+Gr+<span class="number">1</span>:(Nr/<span class="number">2</span>)-(Tr+Gr)</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = Td+Gd+<span class="number">1</span>:(Nd)-(Td+Gd)</span><br><span class="line">        <span class="comment">%Create a vector to store noise_level for each iteration on training cells</span></span><br><span class="line">        noise_level = <span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="comment">%Step through each of bins and the surroundings of the CUT</span></span><br><span class="line">        <span class="keyword">for</span> p = <span class="built_in">i</span>-(Tr+Gr) : <span class="built_in">i</span>+(Tr+Gr)</span><br><span class="line">            <span class="keyword">for</span> q = <span class="built_in">j</span>-(Td+Gd) : <span class="built_in">j</span>+(Td+Gd)</span><br><span class="line">                <span class="comment">%Exclude the Guard cells and CUT cells</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">abs</span>(<span class="built_in">i</span>-p) &gt; Gr || <span class="built_in">abs</span>(<span class="built_in">j</span>-q) &gt; Gd)</span><br><span class="line">                    <span class="comment">%Convert db to power</span></span><br><span class="line">                    noise_level = noise_level + db2pow(RDM(p,q));</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">%Calculate threshould from noise average then add the offset</span></span><br><span class="line">        threshold = pow2db(noise_level/(<span class="number">2</span>*(Td+Gd+<span class="number">1</span>)*<span class="number">2</span>*(Tr+Gr+<span class="number">1</span>)-(Gr*Gd)<span class="number">-1</span>));</span><br><span class="line">        <span class="comment">%Add the SNR to the threshold</span></span><br><span class="line">        threshold = threshold + off_set;</span><br><span class="line">        <span class="comment">%Measure the signal in Cell Under Test(CUT) and compare against</span></span><br><span class="line">        CUT = RDM(<span class="built_in">i</span>,<span class="built_in">j</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (CUT &lt; threshold)</span><br><span class="line">            RDM(<span class="built_in">i</span>,<span class="built_in">j</span>) = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            RDM(<span class="built_in">i</span>,<span class="built_in">j</span>) = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">RDM(RDM~=<span class="number">0</span> &amp; RDM~=<span class="number">1</span>) = <span class="number">0</span>;</span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110714250.png" alt=""></p>
<h5 id="2-Ordered-Statistics-CFAR-OS-CFAR"><a href="#2-Ordered-Statistics-CFAR-OS-CFAR" class="headerlink" title="2. Ordered Statistics CFAR (OS CFAR)"></a>2. Ordered Statistics CFAR (OS CFAR)</h5><h5 id="3-Maximum-Minimum-Statistic-MAMIS-CFAR"><a href="#3-Maximum-Minimum-Statistic-MAMIS-CFAR" class="headerlink" title="3. Maximum Minimum Statistic (MAMIS CFAR)"></a>3. Maximum Minimum Statistic (MAMIS CFAR)</h5><h5 id="4-multiple-variants-of-CA-CFAR"><a href="#4-multiple-variants-of-CA-CFAR" class="headerlink" title="4. multiple variants of CA-CFAR"></a>4. multiple variants of CA-CFAR</h5><h3 id="5-Áõ∏ÂÖ≥Áü•ËØÜ"><a href="#5-Áõ∏ÂÖ≥Áü•ËØÜ" class="headerlink" title="5. Áõ∏ÂÖ≥Áü•ËØÜ"></a>5. Áõ∏ÂÖ≥Áü•ËØÜ</h3><h4 id="1-FFT"><a href="#1-FFT" class="headerlink" title="1. FFT"></a>1. FFT</h4><blockquote>
<p>numpy.fft.<strong>fft</strong>(x, n = 10) Âíå scipy.fftpack.fft(x, n = 10)</p>
<ul>
<li>Á¨¨‰∏Ä‰∏™ÂèÇÊï∞xË°®Á§∫ËæìÂÖ•ÁöÑÂ∫èÂàóÔºå</li>
<li>Á¨¨‰∫å‰∏™ÂèÇÊï∞nÂà∂ÂÆöFFTÁöÑÁÇπÊï∞ÔºånÂÄºÂ¶ÇÊûúÊ≤°ÊúâÁöÑËØùÔºåÈÇ£‰πàÂ∞±ÈªòËÆ§ËæìÂÖ•Â∫èÂàóÁöÑ‰∏™Êï∞‰∏∫FFTÁöÑÁÇπÊï∞</li>
<li>‰∏§ËÄÖËôΩÁÑ∂Áõ∏ÂêåÔºå‰ΩÜÊòØscipy.fftpack.fftÁöÑÊïàÁéáÊõ¥È´òÔºåÊé®Ëçê‰ºòÂÖà‰ΩøÁî®„ÄÇ</li>
</ul>
<p>numpyÂíåscipy‰∏≠ÈÉΩÊúâ<strong>fftshift</strong>ÔºåÁî®‰∫éÂ∞ÜFFTÂèòÊç¢‰πãÂêéÁöÑÈ¢ëË∞±ÊòæÁ§∫ËåÉÂõ¥‰ªé[0, N]Âèò‰∏∫Ôºö<a href="N‰∏∫ÂÅ∂Êï∞">-N/2, N/2-1</a>         ÊàñËÄÖ<a href="N‰∏∫Â•áÊï∞">-(N-1)/2, (N-1)/2</a></p>
<p><strong>fftfreqÔºö</strong>Âú®ÁîªÈ¢ëË∞±ÂõæÁöÑÊó∂ÂÄôÔºåË¶ÅÁªôÂá∫Ê®™ÂùêÊ†áÁöÑÊï∞Â≠óÈ¢ëÁéáÔºõscipy.fftpack.fftfreq(n, d=1.0)</p>
<ul>
<li>Á¨¨‰∏Ä‰∏™ÂèÇÊï∞nÊòØFFTÁöÑÁÇπÊï∞Ôºå‰∏ÄËà¨ÂèñFFT‰πãÂêéÁöÑÊï∞ÊçÆÁöÑÈïøÂ∫¶ÔºàsizeÔºâ</li>
<li>Á¨¨‰∫å‰∏™ÂèÇÊï∞dÊòØÈááÊ†∑Âë®ÊúüÔºåÂÖ∂ÂÄíÊï∞Â∞±ÊòØÈááÊ†∑È¢ëÁéáFsÔºåÂç≥d=1/Fs</li>
</ul>
</blockquote>
<h4 id="2-resource"><a href="#2-resource" class="headerlink" title="2. resource"></a>2. resource</h4><ul>
<li><a href="https://blog.csdn.net/qq_40603614/article/details/112706620" target="_blank" rel="noopener">ËÆæÂ§áËøûÊé•</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/128514763" target="_blank" rel="noopener">Âô™Èü≥Â§ÑÁêÜ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/344519720" target="_blank" rel="noopener">CFAR python code</a></li>
<li><a href="https://blog.csdn.net/qq_35605018/article/details/108816709" target="_blank" rel="noopener">csdn matlab handle</a></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liudongdong1.github.io" rel="external nofollow noreferrer">liudongdong1</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liudongdong1.github.io/2021/07/01/aiot/mmwave/tidevicecoding/">https://liudongdong1.github.io/2021/07/01/aiot/mmwave/tidevicecoding/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="https://liudongdong1.github.io" target="_blank">liudongdong1</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/mmwave/">
                                    <span class="chip bg-color">mmwave</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo,douban" data-wechat-qrcode-helper="<p>ÂæÆ‰ø°Êâ´‰∏ÄÊâ´Âç≥ÂèØÂàÜ‰∫´ÔºÅ</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">Ëµè</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">‰Ω†ÁöÑËµèËØÜÊòØÊàëÂâçËøõÁöÑÂä®Âäõ</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">ÊîØ‰ªòÂÆù</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">ÂæÆ ‰ø°</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="ÊîØ‰ªòÂÆùÊâìËµè‰∫åÁª¥Á†Å">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="ÂæÆ‰ø°ÊâìËµè‰∫åÁª¥Á†Å">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2021/07/03/yu-yan-kuang-jia/designpattern/she-ji-mo-shi/flyweightmode/">
                    <div class="card-image">
                        
                        <img src="https://gitee.com/github-25970295/blogImage/raw/master/img/20210514222616.png" class="responsive-img" alt="FlyweightMode">
                        
                        <span class="card-title">FlyweightMode</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
ËøêÁî®ÂÖ±‰∫´ÊäÄÊúØÊúâÊïàÂú∞ÊîØÊåÅÂ§ßÈáèÁªÜÁ≤íÂ∫¶ÂØπË±°ÁöÑÂ§çÁî®„ÄÇÁ≥ªÁªüÂè™‰ΩøÁî®Â∞ëÈáèÁöÑÂØπË±°ÔºåËÄåËøô‰∫õÂØπË±°ÈÉΩÂæàÁõ∏‰ººÔºåÁä∂ÊÄÅÂèòÂåñÂæàÂ∞èÔºåÂèØ‰ª•ÂÆûÁé∞ÂØπË±°ÁöÑÂ§öÊ¨°Â§çÁî®„ÄÇÁî±‰∫é‰∫´ÂÖÉÊ®°ÂºèË¶ÅÊ±ÇËÉΩÂ§üÂÖ±‰∫´ÁöÑÂØπË±°ÂøÖÈ°ªÊòØÁªÜÁ≤íÂ∫¶ÂØπË±°ÔºåÂõ†Ê≠§ÂÆÉÂèàÁß∞‰∏∫ËΩªÈáèÁ∫ßÊ®°ÂºèÔºåÂÆÉÊòØ‰∏ÄÁßçÂØπË±°ÁªìÊûÑÂûãÊ®°Âºè„ÄÇ‰∫´ÂÖÉÊ®°ÂºèÁªìÊûÑËæÉ‰∏∫Â§ç
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-07-03
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%AF%AD%E8%A8%80%E6%A1%86%E6%9E%B6/" class="post-category">
                                    ËØ≠Ë®ÄÊ°ÜÊû∂
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/java/">
                        <span class="chip bg-color">java</span>
                    </a>
                    
                    <a href="/tags/designPattern/">
                        <span class="chip bg-color">designPattern</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/06/30/ruan-jian-gong-ju/git/githubsearch/">
                    <div class="card-image">
                        
                        <img src="https://cdn.stocksnap.io/img-thumbs/280h/flowers-garden_4QRUJ27WQS.jpg" class="responsive-img" alt="GithubSearch">
                        
                        <span class="card-title">GithubSearch</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            

https://docs.github.com/cn/github/searching-for-information-on-github/searching-on-github/searching-for-repositories


                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-06-30
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/" class="post-category">
                                    ËΩØ‰ª∂Â∑•ÂÖ∑
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Git/">
                        <span class="chip bg-color">Git</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- ‰ª£Á†ÅÂùóÂäüËÉΩ‰æùËµñ -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- ‰ª£Á†ÅËØ≠Ë®Ä -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- ‰ª£Á†ÅÂùóÂ§çÂà∂ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ‰ª£Á†ÅÂùóÊî∂Áº© -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- ‰ª£Á†ÅÂùóÊäòË°å -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC ÊÇ¨ÊµÆÊåâÈíÆ. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ‰øÆÂ§çÊñáÁ´†Âç°Áâá div ÁöÑÂÆΩÂ∫¶. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // ÂàáÊç¢TOCÁõÆÂΩïÂ±ïÂºÄÊî∂Áº©ÁöÑÁõ∏ÂÖ≥Êìç‰Ωú.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <!-- <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="463294659"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>
            <a href="https://liudongdong1.github.io" target="_blank">liudongdong</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;Á´ôÁÇπÊÄªÂ≠óÊï∞:&nbsp;<span
                class="white-color">1206.4k</span>&nbsp;Â≠ó
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;ÊÄªËÆøÈóÆÈáè:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;Ê¨°
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;ÊÄªËÆøÈóÆ‰∫∫Êï∞:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;‰∫∫
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/liudongdong1/" class="tooltipped" target="_blank" data-tooltip="ËÆøÈóÆÊàëÁöÑGitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:3463264078@qq.com" class="tooltipped" target="_blank" data-tooltip="ÈÇÆ‰ª∂ËÅîÁ≥ªÊàë" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>














    <a href="https://blog.csdn.net/liudongdong19/" class="tooltipped" target="_blank" data-tooltip="ÂÖ≥Ê≥®ÊàëÁöÑCSDN: https://blog.csdn.net/liudongdong19/" data-position="top" data-delay="50">
        <i class="fab fa-csdn">C</i>
    </a>





</div>
    </div>
</footer>

<div class="progress-bar"></div>
 -->

    <!-- ÊêúÁ¥¢ÈÅÆÁΩ©Ê°Ü -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- ÂõûÂà∞È°∂ÈÉ®ÊåâÈíÆ -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script type="text/javascript" src="/js/CFS.Snow.min.js"></script>
    <!-- ÁÇπÂáªÁàÜÁÅØÊïàÊûú -->
    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
    <script type="text/javascript" src="/js/fireworks.js"></script>
    <!--Âä®ÊÄÅÁ∫øÊù°ËÉåÊôØ-->
    <script type="text/javascript"
        color="122 103 238" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
    </script>
    <!-- Â§©Ê∞î -->
    <!-- weather -->
    <!-- weather -->
    <script type="text/javascript">
         WIDGET = {FID: 'knAMQaFanP'}
    </script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon-refresh.min.js" async="async"></script>
    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    
    <!-- {% include '_custom/custom.swig' %} -->

</body>

</html>
