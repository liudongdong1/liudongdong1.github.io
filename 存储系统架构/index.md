# 存储系统架构


## 1. 存储系统架构

### 1. 中低端 SAN/NAS 融合存储架构：双控制器

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409133029764.png)

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409133343520.png)

- `写入数据在双控 CACHE 中各保存一份，避免单控故障导致数据丢失`。
- `每个控制板的后端分别接入物理磁盘的环路` —— 业务负载均衡，提升整体系统性能
- `将多个 LUN 的负载或者同一个 LUN 的负载均衡在两个控制器上`，避免性能瓶颈
- 一控制器故障时，另一控制器在主机多路径软件配合下接管业务负载，确保不中断

### 2. 高端 SAN 阵列架构：多控制器

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409133504379.png)

- `数据平面采用 PCIe 互联`，引擎内 4 控通过背板 PCIe 通道互联，提供高达 128GB/s 的框内互联带宽。引擎间采用双交换组网，PCIe 光缆互联，提供 128GB/s 的引擎间互联带宽。控制器间数据转发与镜像优先使用框内背板互联通道，背板互联通道不可达时，选择引擎间交换通道。系统总数据交换带宽（包括引擎内和引擎间）高达 640GB/s。
- `管理控制平面采用 GE 组网`，SVP 的两个网口形成两个管理平面，所有引擎和交换机都同时接入两个管理平面。在 GE 网络故障时，管理控制平面还可以复用数据平面的 PCIe 通道传输管理控制器消息。
- `引擎内 4 个控制器共享后端 SAS 接口卡，引擎内任意控制器故障，对引擎剩余控制器到硬盘的连接无影响`。引擎支持缓存持续镜像技术，有控制器故障故障时，系统对缓存镜像重新分布，保持所有缓存都仍有镜像，系统不转透写，业务也不会中断。

### 3. 高端 SAN 阵列架构：网格存储

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409133649079.png)

- 网格存储被业内称为革命性的新一代存储架构，它是采用了`大规模并行的分布式网格存储技术`，使用了 “Scale out”(横向扩展) 的存储架构，利用多路网格模块并行分担存储负荷，并通过细粒度数据分布算法保证数据的恒定均衡分布，它不但提高了系统的可靠性、可用性和存取效率，还易于扩展。
- 在网格存储系统里面，没有任何主控的模块，系统由一个个的网格组成 的。每个网格叫数据模块，每个独立的数据模块包括紧耦合的 CPU 处理能力，缓存能力加上磁盘存储能力。
- `网格存储系统的主要部分被称为 modules（模块）`。模块提供处`理单元、缓存、主机接口和基于标准的英特尔和 Linux 系统`。它们通过内部的冗余的以 太网交换机实现冗余连接。所有模块在一起形成一个网格体系结构的工作模式，因此，该系统可以基于本身具有的并行方式及其强大计算能力，适用于很多的整合、混合计算环境。
- 从根本上说，接口模块其实和数据模块的结构基本相同，但是承担的功能略有不同：接口模块除承担数据模块的同等功能外，`还包括 FC 接口和 iSCSI 接口的主机系统连接以及远程镜像的连接支持`。在概念层面上，模块（Module）是系统架构的基本元素，提供物理容量空间、处理能力和缓存，各数据模块间的关系是平等的、无主次之分。
- 网格体系架构利用 “伪随机” 的分布式方式，通过独特的算法，能够把一个特定的工作任务是进行战略性的分 离，使总的工作量分布在更多个模块上，系统的整体性能会通过增加更多的模块进一步提升。
- 网格存储系统包含一个冗余的交换以太网络结构，负责进行数据之间的通信模块。包括两个接口模块之间的数据交换；接口模块和数据模块之间的数据交换；以及两个数据模块之间的数据交换。

### 4. 集群 NAS 存储架构

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409133839686.png)

### 5. 分布式存储架构：有中心节点

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409133935708.png)

### 6. 分布式对象存储架构

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409134011184.png)

## 2. 存储组件

### 1. 盘控制分离控制框

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409134149249.png)



### 2.  2U 2.5 硬盘框

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409134238917.png)

### 3. 4U 2.5 硬盘框

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409134305367.png)

### 4. 机械硬盘

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409134455485.png)

![](https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220409134657767.png)

## Resource

- https://cuichongxin.blog.csdn.net/article/details/113550162


---

> 作者: liudongdong1  
> URL: liudongdong1.github.io/%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84/  

