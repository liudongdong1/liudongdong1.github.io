# WirePCB


> 利用Multisim可以实现模拟，数字电路系统仿真，也可以实现PCB设计制作，一般使用Multisim进行电路仿真设计，将生成的网表修改后导入AltiumDesign.
>
> 1.`原理图库`，需要有原理图库才能画原理图
> 2.**`画原理图`**
> 3.`封装库`，需要有封装库才能画PCB板
> 4.`元器件库`
> 5.`集成库`，元器件库与PCB封装库的集存（其实这个库可以不需要，有原理图库与PCB库就能画了，第一步迈出就好了）
> 6.**PCB板**

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327212902.png)
![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210326220721.png)

- BOM（Bill of Materials）是`指元器件清单`，我们设计的PCB图中有很多元器件，`如电容、电阻、电感等`，BOM文件就列出了我们所有用到的元器件的类型以及相关信息（阻值、容值、封装类型），`BOM文件一般是在我们设计结束后自动生成的`，不需要我们新建；
- `Schematic library文件`：顾名思义，就是`原理图库文件`，我们用到的一些元器件`可能在默认的原理图库中没有相对应的元件图`，需要我们自己设计，这时就要新建一个Schematic library文件；
- `PCB library文件`：PCB库文件，也叫封装文件，我们`用到的些元器件可能在默认的PCB库中没有相对应的元件封装`，也需要我们自己设计，这时就要新建一个PCB library文件。

封装就是指一个实际的元器件在PCB板上的表现，一般由焊盘、轮廓线、标识符等等部分，比如这就是一个三极管的封装：

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210326221646.png)

> - `原理图中的元件来自原理图库文件`，`PCB文件中的PCB封装图一般由原理图文件导入`，`原理图库文件中的每个元件符号都在PCB库文件中对应着一个封装图形`。根据这种对应关系，当从原理图文件中将原理图导入到PCB文件中时，`Altium Designer根据原理图中的连接方式用每个元件符号对应的PCB封装图代替元件符号到PCB文件中，供开板者进行布局和布线`。
>
> - 根据需求板子功能；根据功能设计原理图（难点，核心。`若没有元件符号没有在原理图库中时还需要自己绘制`）；
> - 将所设计原理图导入PCB文件中，进行元件布局、布线（关键。必要时也可在PCB中直接添加原理图中未涉及完的元件）；
> - 确定无误后，导出加工需要的GERBER文件。

### 1. 原理图设计

> - **在原理图的绘制过程中，各个元件的大小是不能调整的。如果原理图纸张放不下，需要对图纸进行设置**：设计->文档选项，右键->选项->文档选项。
>
> - 在进行原理图的绘制，首先需要在图纸上放置需要的元件符号。Altium Designer的元件库中能够找到一般常用的电子元件，用户只需要在元件库中查找到所需的元件符号，并放置在图纸的适当位置即可。
> - **.SCHLIB为原理图中的电子元件，.PCBLIB为PCB图中的电子元件，.INTLIB整合了两者并将它们相对应起来。**
> - Altium Designer原理图的绘制主要是有两个要素：元素符号和线路连接。绘制原理图的主要操作就是将元件符号放置在原理图图纸上，然后用线将元件符号中的引脚连接起来，建立正确的电气连接。

- 库搜索：“库”面板->Search，弹出搜索库的对话框，查找元件功能，可以在范围中选择**Components（元件）、Protel Footprints（PCB封装）、3D Models（3D模型）和Database Components（数据库元件）**四种查找类型。
- 元件属性设置具体包含元件的基本属性设置、元件的扩展属性设置、元件的模型设置、元件引脚编号等。比如说：电容的大小，电阻的大小等等。
- 电气连接有两种实现方式：一种是“物理连接”，即直接使用导线将各个元件连接起来；另一种是“逻辑连接”，即不需要实际的连线操作，而是通过设置网络标号使元件之间具有电气连接关系。
- **总线是一组具有相同性质的并行信号线的组合，如数据总线、地址总线、控制总线等的组合。**在大规模的原理图的设计，尤其是数字电路的设计中，如果只用导线来完成各元件之间的电气连接，那么整个原理图的连线就会变得杂乱和繁琐。而总线的使用就会大大简化原理图的连线操作。
- 在Altium Designer中，默认情况下，导线会在T形交叉点处自动放置电气节点，表示所画线路在电气意义上是连接的。但是在其他的情况下，如十字交叉点处，由于系统无法判断导线是否连接，就不会放置电气节点。如果导线是互相连接的，就需要自己手动放置电气节点。放置手工接点的方法：放置->手工接点。
- **网格表：**在由原理图生成的各种报表中，网络表是最为重要的。所谓网络，指的是彼此连接在一起的一组元件引脚，一个电路实际上就是由若干个网络组成的。而网络表就是对电路或者电路原理图的一个完整描述，描述的内容包括两个方面：
  - 电路原理图中的所有元件的信息（包括元件标识、元件引脚、PCB封装形式等等）；
  - 网络的连接信息（包括网络名称、网络节点等）。
  - 创建方式：
    - **基于单个原理图文件的网络表：设计->工程的网络表->PCAD；**
    - **基于整个项目的网络表：设计->文件的网络表->PCAD。**

> **网络表的默认后缀名为.NET，它是一个简单的ASCII码文本文件，由多行文本组成。内容分成两大部分：一部分是元件的信息，一部分是网络信息。**红色框出来的部分从上到下，从左到右依次为：元件封装、元件标识、元件管脚。
>
> ![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210326222759.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327175418.png)

#### 1.1. 电路板层

> PCB一般包括很多层，不同的层包含不同的设计信息。制板商通常会将各层分开制作，然后经过压制、处理，最后生成各种功能的电路板。电路板层的颜色与显示设置：设计->板层颜色；右键->选项->板层颜色。**电路板层的层数设置：设计->层叠管理，右键->选项->层叠管理。**

Altium Designer一般有以下六种类型的工作层：

- Signal Layers（信号层）：即铜箔层，用于完成电气连接。如Top Layer、Mid Layer、Buttom Layer；
- Internal Planes Layers（中间层）：也称为内部电源与地线层，也属于铜箔层，用于建立电源和地线网络。如Internal Layer；
- Mechanical Layers（机械层）：用于描述电路板机械结构、标注及加工等生产和组装信息所使用的层面，不能完成电气连接特性。如Mechanical Layer；
- Mask Layers（阻焊层）：用于保护铜线，也可以防止焊接错误。如Top Paste（顶层锡膏防护层）、BottomPaste（底层锡膏防护层）、Top Solder（顶层阻焊层）、Bottom Solder（底层阻焊层）；
- SilkScreen Layers（丝印层）：也称为图例，通常用于放置元件标号、文字和符号，以标示出各零件在电路板中的位置。如Top Overlay（顶层丝印层）、Bottom Overlay（底层丝印层）；
  其它层：Drill Guides（钻孔）、Drill Drawing（钻孔图）、Keep-Out Layer（禁止布线层）。

常见层数不同的电路板：

- 单面板：PCB中元件集中在其中的一面（元件面），导线集中在另一面（焊接面）；
- 双面板：电路板的两面都可以布线，不过要同时使用两面的布线就必须在两面之间有适当的电路连接操行，这种电路间的桥梁叫做过孔。过孔是在PCB上充满或涂上金属的小洞，它可以与两面的导线相连接。在双层板中通常不区分元件面和焊接面；
- 多层板：常用的多层板有4层板、6层板等。简单的4层板是在Top Layer（顶层）和Bottom Layer（底层）的基础上增加了电源层和地线层，这样的好处极大程度地解决了电磁干扰的问题；6层板通常是在4层板的基础上增加了两层Mid Layer。

#### 1.2. 布线规则

- Electrical（电气规则）：用于系统DRC（电气规则检查）功能。当布线的过程中违反了电气规则时，DRC检查器将自动报警提示。电气规则包括：Clearance（安全间距规则，默认10mil）、Short-Circuit（短路规则，拥有不同网络标号的对象相交报错）、Un-Routed Net（取消布线网络规则，是否可以出现未连接的网络）、Un-Connected Pin（未连接引脚规则，是否可以出现未连接的引脚）；
- Routing（布线规则）：设置自动布线过程中的布线规则。如：布线宽度、布线优先级、布线拓扑结构、布线工作层规则、导线拐弯规则、布线过孔样式规则（默认过孔直径50mil，孔径28mil）等；
  SMT（表贴封装规则）：设置表面安装型元件的走线规则。如：表面安装元件的焊盘与导线拐角处最小间距规则等；
- Mask（阻焊规则）：设置阻焊剂铺设的尺寸。如：阻焊层与焊盘之间的间距规则、锡膏防护层与焊盘之间的间距规则；Plane（中间层布线规则）、Testpoint（测试点规则）、Manufacturing（生产制造规则）、High Speed（高速信号相关规则）、Placement（元件放置规则）、Signal Integrity（信号完整性规则）。

> 【Design Item ID】我们一般会填写这个器件的名称，这是中国器件在这个原理图库的唯一标识符。
> 然后是【Designator】，是器件的位号，这个是一定要有的，用来在原理图中定位这个器件。
> 接下来是【Comment】，填写元器件的注释，一般来说，我们可以将元器件的Value值填写在里面。
> 最后是【Description】，填写器件的描述，比如这个器件是什么作用，是什么器件，是什么封装的等等。

### 2. 库导入

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327175216.png)

### [3. 实验教程](https://www.bilibili.com/video/BV1ei4y1L7TU?p=10&spm_id_from=pageDriver)

#### 3.1. 原理图库制作

> 注意控制原理图库中器件的大小，且位置在中心位置区域；
>
> 1.首先，进入原理图优选项，要`设置原理图的尺寸`，比如A4纸大小等参数
>
> 2.`绘制总线--总线入口--放置线（`线可以连接端口）--
>   在每根线上放置网络标号（比如VCC，GND，P37等，数字自动递增），
>   在`放置网络标识时可以按Tab键修改编号`，这样下一个标识直接出来，点一下就可以放下一个。。。
>
> 3.原理图绘制完后，把里面的？全部改为数字，点`工具--标注--更新更改列表--OK--接收更改列表--执行变更`
>
> 4.原理图绘制完后，要点`工具--编译文档，检查原理图有没有错误`
>
> 5.原理图添加封装，把`各个元器件，都要对应到封装，没有封装库，先要添加封装库`
>   每个元器件双击点出来，`点FootPrint，就可以操作出来`
>   如果元器件比较多，可以用封装管理器，以列表形式检查每个元器件有没有对应的封装

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327191656.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327191940.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327194016.png)

- Design-> Make Schematic Library： 把元器件原理图 添加到自己的原理图库；

#### 3.2. 封装库制作

> 比如要绘制一个0603的封装库，先去`百度查0603的尺寸`(这里可以去淘宝，立创，datasheet），这个尺寸也就是说框框要多大，焊盘要多大等，才能放得下这个元器件。
> 而0603有两个焊盘，加起来是2.54x0.8mm，一个是0.8*0.955毫米，两个焊盘之间的距离为0.63
>
> 1.点`放置焊盘`，但默认是圆形的焊盘，中间还有个洞，不是我们所需要的，所以双击
>   1)`properties--Layer--由multi layer改成Top Layer`
>   2)`Size and Shape--Shape--由Round改成Rectangular`
>   可以看到，焊盘已经改成矩型了，且是顶层中间没有过孔，就是贴片焊盘
>
> 2.在任何时刻，按`Q键可以把单位在mil与mm之间切换`
>
> 3.再次`双击，把Size and Shape--(X/Y)--0.955mm 0.8mm`
>
> 4.再复制一个，先选中此焊盘，按ctrl+c，出现十字，再点左击此焊盘，复制到剪贴板，再移到别的地方，按Ctrl+V，再点左击放置
>
> 5.改复制出的新焊盘的标号为2，之前的是1
>
> 6.`确定两个焊盘之间的距离`，先把两个焊盘重叠，再按M键--通过XY移动选中对像--X:1.585mm
>   计算方法，这是按中断位置来计算的，所以就是0.955+0.63就可以了
>
> 7.为这`两个焊盘画上边框，线宽正常情况下用0.2mm`

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327194802.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327195242.png)

#### 3.3. 原理图操作

在Properties 设计原理图界面相关属性，搜索时后根据Header2, Res2这类的标识，先找器件，然后放置走线，使用wire    `按空格键进行器件旋转`，点击连线后，右击鼠标可以取消继续连线；标识批量修改：

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327190346.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327190716.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327175635.png)

- 设计好原理图后，通过design update PCB document， 然后validate changes and execute changes ；`选中需要旋转的元器件，鼠标左键选中后不放，并移动元器件，同时按下键盘空格键space，此时元器件便逆向旋转90度；` `其中在原理图中可以使用X，Y进行镜像，但是在PCB中不能使用镜像；`

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327181843.png)

#### 3.4. PCB 封装操作

> 1.打开`绘制卡的原理图--Update PCB--执行变更`--这样每个元器件的封装都已经调入到了PCB画板中,并已连好了网格线
>
> 2.`选中底框--删除`
>
> 3.PCB布线
>   1）`点中器件中心，可以拖动器件，在拖动的时候可以按空格键改变角度`，可以`按L键换层`
>
>   2）器件可以锁定，`双击锁定，则不能移动`
>
>   3）`器件对齐`，选中多个，可以以多种方式对齐
>
>   4）`走线的时候，不要放置焊盘，而是放置过孔，要不改都不好改`
>
>   5）放置`字符串`，可以起到`标注`的作用
>
>   6）添加`泪滴，把其它工作作完再添加，要修改需要移除泪滴才能操作`，点工具--泪滴--（添加/删除）--确定
>
>   7）`覆铜，`
>
> 4.`定位孔，放置焊盘，把标号去掉`，大小为Hole Size孔3mm，焊盘5mm，Size and Shape(X/Y)都改为同样的值，就为通孔，一般放于4个角上，拧螺丝用
>
> 5.走线，`一般CPU引脚为8mil，普通走线为10mil，VCC，GND20mil，先拉简单的，短的`
>   1）先可以把`电源线，GND线隐藏`
>   2）`布好信号线后，再把VCC显示出来，布VCC线`
>   3）GND线不用连起来，只要打好过也就可以了
>
> 6.`走线优化`，哪根线不好看就调哪根，目的是`为了减少弯个数，间距尽量拉宽，走线短点`
>
> 7.`添加泪滴`
>
> 8.`整板覆铜`，先`选中GND网络，延着四边画一条线，还有背面，同样覆铜`，这样所有的GND都连在一起了，`GND不用走线的`
>
> 9.`保存PCB，然后DRC检查`，没有错误就可以了

- 选择走线工具，进行电路连线, 连线有俩种，一种是通过wire； 另一种是通过 netlabel 网络标识。 `注意 连线line 并不具备电器特性，就类似在里面添加文本，主要用来进行标注`，
- 要理解不同的层连线；
- 当电路多的时候可以模块化电路原理图设计，然后根据模块化电路进行PCB排版；
- 如果有外部接口，要考虑实际情况下时候好插线；
- 注意连线的宽度与 器件间的间隙；不能太宽；
- `使用焊盘方式进行不同层交互式走线`；
- 原理引脚要对应； 大小要和实际器件对应；
- 焊盘：绿色的部分是空的；灰色的部分是铜箔，用焊锡丝将引脚与焊盘固定连接；紫色的部分是阻焊层；
- https://item.szlcsc.com/15549.html  使用现成的；

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327223142.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327183152.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327185225.png)

#### 3.5. 打样

> 0.联系淘宝卖家，了解了工艺，流程等
>   常规工艺   是   85元   5-10片   
>   工艺：板厚1.6，有铅喷锡，绿油白字，双面FR4，过孔盖油（GERBER文件，过孔只按文件加工），铜厚1盎司
>   常规：最小线宽、线距0.2mm、最小过孔0.3mm、文字高度0.8MM 以上，最小槽0.8mm以上（这些是否符合
>
> 1.`pcb板画好后，要在Mechanical1层画出框框`，这个框框表示机械层，用于加工时切割
>
>    这也是第一次生成的Gerber文件给卖家时，说有问题，下不了单，也洗不了板，后来才加上去的
>
> 2.`生产了gerber文件，发送到厂家去，打样或量产。`
>   点文件--制板输出--Gerber 文件--
>     通用--英寸：2：5(精度）
>     层--全选--镜像--全不选 机械层--不打勾  包括未连接的焊盘打勾
>     钻孔图层--
>     光圈--嵌入的孔径 打勾
>     高级--去掉首位的零
>     确定--保存为CAMtastic1.Cam文件
>
> 3.再次打开PCB--文件--制板输出Gerber文件--
>     通用--...
>     层--全不选 镜像--全不选 右边--Mechanical1打勾
>     钻孔图层--Drill Drawing Plots下打勾  Drill Guide Plots下打勾 镜像不勾
>
> 4.输出坐标文件
>   再次打开PCB--文件--制板输出--NC Drill File
>     所有选项全部默认即可
>
> 5.把输出的文件夹(Project Outputs for xxx)，打包，发给厂家就可以了

#### 3.6. 焊接

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328104901.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328105101.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328105252.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328105211.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328105440.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328104227.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328104132.png)

![吸枪](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328105731.png)

#### 3.7. 注意事项

> 1.不会更改PCB画布大小
>   a.先`点放置线条`，随便用哪层都可以，`画一个框框出来`，然后`选中此框框，点设计--板子形状--根据选定对像定义`
>   b.`设计--板子形状--定义板切割`，可以按自己的图形来切割板子，比如在板子中切割一个三角形出来等
>
> 2.走线时不会改线宽
>   a.当某种类型的走线画完后，比如VCC线，`选中一小段VCC线，右键--找到相似对像--VCC后面的any改same--点确定`
>     --选中了所有的VCC，同时属性框也弹出来了，把10mil改成20mil即可
>   b.比如端口的线宽为10mil，VCC为20mil，点设计--规则--DesignRules--Routing--Width--Width
>       --Where The Ojbect Matches--Net--VCC--Preferred Width：20mil--Max Width 20mil--确定
>         也就是说，优先尺20mil，最大20mil就行了，这样在走VCC线时，自动就是20mil了
>   c.最简单的方法，在走线时，`按TAB键，弹出框框中修改走线宽度`
>
> 3.`铺铜`操作不会
>   `点工具--铺铜--铺铜管理器--从...创建新铺铜--板外形--
>     实心铜皮区域--连接到网络`：GND--Pour Over All Same Net Objects--移除死铜打勾--层：Top Layer
>   另外还要添加一个，Bottom Layer层的铜皮设置
>   当移除死铜打勾后，可以看到哪些区域没有铜皮，则在这此地方打洞，Net：GND，让死铜区域上下连接
>
> 4.如何`锁定某器件`，防止误移动
>   `右击某器件--弹出菜单--Component Locked：打勾为锁定，取消为不锁定`
>
> 5.画PCB板时，圆点到其它地方去了，`点--编辑--原点--设置，出现十字光标`，点一下PCB边框左下角就可以了
>   原点代表0，0位置，有利于计算坐标
>
> 6.绘制PCB中，`如果更改了某器件的原理图后，`可以打开PCB绘布，`点 设计--Import Changes From xxx.xxx--删除背景`
>
> 7.如果`导入过来的PCB元件，没有线或者少线`，这是因为原理图`每个脚的编号与PCB的编号不批配`，或者`关联的封装不一致`

### 4. 系统设计

- 自下而上： 器件分为不同的模块，先对每一个模块进行具体设计；了解Port 和Off sheet Connector的使用；在design 里面选择 create symble from sheet;
- 自上而下：
- 设计PCB板子连线的时候，可以参考嘉立创手册；
- 走线的时候按照 主控芯片，相关芯片，电源，尽量先走顶层；
- 排线的时候可以使用软件分屏工具，模块化进行布局；
- 连线的时候有限信号线，然后5v，3.3V电源线，GND最后通过底层和顶层铺铜，通过打孔增加导电性；

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328101752.png)

- 电器检查--》design-rule check; 除GND外没有问题后，开始补泪滴（可以全局设置）；
- 如果出现问题，则去铜，去泪滴，去铜孔，修改PCB库和原理图库，保存更新；`注意不同的商城器件封装可能不一样；`
- 焊接的时候以最小系统为单位；

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327213114.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327215223.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210327215348.png)

### 4.1. Multisim 

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328123658.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328124652.png)

![元件库](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328124828.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328125830.png)

![](https://gitee.com/github-25970295/blogImage/raw/master/img/20210328125137.png)

- 进行仿真的时候务必加入GND；

### 5. 学习资源

- [Altium Designer 学习-----手把手绘制Arduino PCB线路板（零基础）](https://www.bilibili.com/video/BV1zE411q72a?p=14)
- [焊接教程](https://www.bilibili.com/video/BV1eJ411K7rM?from=search&seid=5403760049233021482)
- [Multisim仿真入门](https://www.bilibili.com/video/BV1M7411A7cE?p=6&spm_id_from=pageDriver)
- [模拟电路实验](https://www.bilibili.com/video/BV1UT4y137cn?from=search&seid=17899204823600282448)

---

> 作者: liudongdong1  
> URL: liudongdong1.github.io/wirepcb/  

