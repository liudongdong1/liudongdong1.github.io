<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>SpringAnnotation - DAY By DAY</title><meta name=author content="LiuDongdong"><meta name=author-link content="https://liudongdong1.github.io/"><meta name=description content="1. @SpringBootApplication @SpringBootApplication public class SpringSecurityJwtGuideApplication { public static void main(java.lang.String[] args) { SpringApplication.run(SpringSecurityJwtGuideApplication.class, args); } } æˆ‘ä»¬å¯ä»¥æŠŠ @SpringBootApplicationçœ‹ä½œæ˜¯ @Configurationã€@EnableA"><meta name=keywords content="Java,SpringBoot,Framework"><meta itemprop=name content="SpringAnnotation"><meta itemprop=description content="1. @SpringBootApplication @SpringBootApplication public class SpringSecurityJwtGuideApplication { public static void main(java.lang.String[] args) { SpringApplication.run(SpringSecurityJwtGuideApplication.class, args); } } æˆ‘ä»¬å¯ä»¥æŠŠ @SpringBootApplicationçœ‹ä½œæ˜¯ @Configurationã€@EnableA"><meta itemprop=datePublished content="2021-06-19T21:31:56+00:00"><meta itemprop=dateModified content="2023-09-28T22:56:31+08:00"><meta itemprop=wordCount content="7824"><meta itemprop=image content="/logo.png"><meta itemprop=keywords content="Java,SpringBoot,Framework,"><meta property="og:title" content="SpringAnnotation"><meta property="og:description" content="1. @SpringBootApplication @SpringBootApplication public class SpringSecurityJwtGuideApplication { public static void main(java.lang.String[] args) { SpringApplication.run(SpringSecurityJwtGuideApplication.class, args); } } æˆ‘ä»¬å¯ä»¥æŠŠ @SpringBootApplicationçœ‹ä½œæ˜¯ @Configurationã€@EnableA"><meta property="og:type" content="article"><meta property="og:url" content="liudongdong1.github.io/springannotation/"><meta property="og:image" content="/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-06-19T21:31:56+00:00"><meta property="article:modified_time" content="2023-09-28T22:56:31+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/logo.png"><meta name=twitter:title content="SpringAnnotation"><meta name=twitter:description content="1. @SpringBootApplication @SpringBootApplication public class SpringSecurityJwtGuideApplication { public static void main(java.lang.String[] args) { SpringApplication.run(SpringSecurityJwtGuideApplication.class, args); } } æˆ‘ä»¬å¯ä»¥æŠŠ @SpringBootApplicationçœ‹ä½œæ˜¯ @Configurationã€@EnableA"><meta name=application-name content="DAY By DAY"><meta name=apple-mobile-web-app-title content="DAY By DAY"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=liudongdong1.github.io/springannotation/><link rel=prev href=liudongdong1.github.io/07latex%E7%9A%84%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5/><link rel=next href=liudongdong1.github.io/openfeign/><link rel=stylesheet href=/liudongdong1.github.io/css/style.min.css><link rel=stylesheet href=/liudongdong1.github.io/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/liudongdong1.github.io/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"SpringAnnotation","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"liudongdong1.github.io\/springannotation\/"},"genre":"posts","keywords":"Java, SpringBoot, Framework","wordcount":7824,"url":"liudongdong1.github.io\/springannotation\/","datePublished":"2021-06-19T21:31:56+00:00","dateModified":"2023-09-28T22:56:31+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"LiuDongdong","logo":"\/images\/person.png"},"author":{"@type":"Person","name":"liudongdong1"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=liudongdong1.github.io/ title="DAY By DAY"><img class="lazyload logo" src=/liudongdong1.github.io/svg/loading.min.svg data-src=/fixit.min.svg data-srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" data-sizes=auto alt="DAY By DAY" title="DAY By DAY"><span class=header-title-text></span></a><span id=typeit-header-subtitle-desktop class="typeit header-subtitle"></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> æ‰€æœ‰æ–‡ç« </a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> åˆ†ç±»</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> æ ‡ç­¾</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/friends/ title=å‹æƒ…é“¾æ¥><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> å‹é“¾</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> å…³äº</a></li><li class="menu-item delimiter"></li><li class="menu-item language"><span role=button aria-label=é€‰æ‹©è¯­è¨€ title=é€‰æ‹©è¯­è¨€>ç®€ä½“ä¸­æ–‡<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item>æ²¡æœ‰æ›´å¤šç¿»è¯‘</li></ul></li><li class="menu-item search" id=search-desktop><input type=text placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹ ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=æœç´¢><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=æ¸…ç©º><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=liudongdong1.github.io/ title="DAY By DAY"><img class="lazyload logo" src=/liudongdong1.github.io/svg/loading.min.svg data-src=/fixit.min.svg data-srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" data-sizes=auto alt=/fixit.min.svg title=/fixit.min.svg><span class=header-title-text></span></a><span id=typeit-header-subtitle-mobile class="typeit header-subtitle"></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹ ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=æœç´¢><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=æ¸…ç©º><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>å–æ¶ˆ</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> æ‰€æœ‰æ–‡ç« </a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> åˆ†ç±»</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> æ ‡ç­¾</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/friends/ title=å‹æƒ…é“¾æ¥><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> å‹é“¾</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> å…³äº</a></li><li class="menu-item text-center"><a class=menu-link href=https://liudongdong1.github.io/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw' aria-hidden=true></i></a></li><li class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language"><span role=button aria-label=é€‰æ‹©è¯­è¨€ title=é€‰æ‹©è¯­è¨€>ç®€ä½“ä¸­æ–‡<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option disabled>æ²¡æœ‰æ›´å¤šç¿»è¯‘</option></select></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container data-page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>ç›®å½• <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom id=aside-sakana><div class=sakana-widget><div class=sakana-item id=takina-widget></div><div class=sakana-item id=chisato-widget></div></div><script>function initSakanaWidget(){const e=SakanaWidget.getCharacter("takina");SakanaWidget.registerCharacter("takina-slow",e),new SakanaWidget({character:"takina-slow",controls:!1,autoFit:!0,stroke:{color:"#b4b4b4",width:2}}).mount("#takina-widget");const t=SakanaWidget.getCharacter("chisato");SakanaWidget.registerCharacter("chisato-slow",t),new SakanaWidget({character:"chisato-slow",controls:!1,autoFit:!0,stroke:{color:"#b4b4b4",width:2}}).mount("#chisato-widget")}</script><script async onload=initSakanaWidget() src=https://cdn.jsdelivr.net/npm/sakana-widget@2.3.0/lib/sakana.min.js></script></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>SpringAnnotation</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
liudongdong1</span></span>
<span class=post-category>æ”¶å½•äº <a href=liudongdong1.github.io/categories/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;Categories</a>&ensp;<a href=liudongdong1.github.io/categories/framework/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;Framework</a></span></div><div class=post-meta-line><span title="2021-06-19 21:31:56"><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-06-19>2021-06-19</time>
</span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 7824 å­—&nbsp;
<i class="fa-regular fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 16 åˆ†é’Ÿ&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title=SpringAnnotation>
<i class="fa-regular fa-eye fa-fw"></i>&nbsp;<span id=busuanzi_value_page_pv>-</span>&nbsp;æ¬¡é˜…è¯»
</span>&nbsp;</div></div><div class=featured-image><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://cdn.pixabay.com/photo/2021/05/27/14/40/anemone-6288318__340.jpg data-srcset="https://cdn.pixabay.com/photo/2021/05/27/14/40/anemone-6288318__340.jpg, https://cdn.pixabay.com/photo/2021/05/27/14/40/anemone-6288318__340.jpg 1.5x, https://cdn.pixabay.com/photo/2021/05/27/14/40/anemone-6288318__340.jpg 2x" data-sizes=auto alt=https://cdn.pixabay.com/photo/2021/05/27/14/40/anemone-6288318__340.jpg title=https://cdn.pixabay.com/photo/2021/05/27/14/40/anemone-6288318__340.jpg></div><div class="details toc" id=toc-static kept=true><div class="details-summary toc-title"><span>ç›®å½•</span>
<span><i class="details-icon fa-solid fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#1-springbootapplication>1. <code>@SpringBootApplication</code></a></li><li><a href=#2-spring-bean-ç›¸å…³>2. Spring Bean ç›¸å…³</a></li><li><a href=#3-å¤„ç†å¸¸è§çš„-http-è¯·æ±‚ç±»å‹>3. å¤„ç†å¸¸è§çš„ HTTP è¯·æ±‚ç±»å‹</a></li><li><a href=#4-å‰åç«¯ä¼ å€¼>4. å‰åç«¯ä¼ å€¼</a></li><li><a href=#5-è¯»å–é…ç½®ä¿¡æ¯>5. è¯»å–é…ç½®ä¿¡æ¯</a></li><li><a href=#6-å‚æ•°æ ¡éªŒ>6. å‚æ•°æ ¡éªŒ</a></li><li><a href=#7-å…¨å±€å¤„ç†-controller-å±‚å¼‚å¸¸>7. å…¨å±€å¤„ç† Controller å±‚å¼‚å¸¸</a></li><li><a href=#8-jpa-ç›¸å…³>8. JPA ç›¸å…³</a></li><li><a href=#9-äº‹åŠ¡-transactional>9. äº‹åŠ¡ <code>@Transactional</code></a></li><li><a href=#10-json-æ•°æ®å¤„ç†>10. json æ•°æ®å¤„ç†</a></li><li><a href=#11-æµ‹è¯•ç›¸å…³>11. æµ‹è¯•ç›¸å…³</a></li><li><a href=#èµ„æºé“¾æ¥>èµ„æºé“¾æ¥</a></li></ul></li></ul></nav></div></div><div class=content id=content><h3 id=1-springbootapplication>1. <code>@SpringBootApplication</code></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@SpringBootApplication</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SpringSecurityJwtGuideApplication</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>String</span><span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        SpringApplication<span style=color:#f92672>.</span><span style=color:#a6e22e>run</span><span style=color:#f92672>(</span>SpringSecurityJwtGuideApplication<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> args<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥æŠŠ <code>@SpringBootApplication</code>çœ‹ä½œæ˜¯ <code>@Configuration</code>ã€<code>@EnableAutoConfiguration</code>ã€<code>@ComponentScan</code> æ³¨è§£çš„é›†åˆã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> org.springframework.boot.autoconfigure<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Target</span><span style=color:#f92672>(</span>ElementType<span style=color:#f92672>.</span><span style=color:#a6e22e>TYPE</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Retention</span><span style=color:#f92672>(</span>RetentionPolicy<span style=color:#f92672>.</span><span style=color:#a6e22e>RUNTIME</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Documented</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Inherited</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@SpringBootConfiguration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@EnableAutoConfiguration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ComponentScan</span><span style=color:#f92672>(</span>excludeFilters <span style=color:#f92672>=</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>@Filter</span><span style=color:#f92672>(</span>type <span style=color:#f92672>=</span> FilterType<span style=color:#f92672>.</span><span style=color:#a6e22e>CUSTOM</span><span style=color:#f92672>,</span> classes <span style=color:#f92672>=</span> TypeExcludeFilter<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>@Filter</span><span style=color:#f92672>(</span>type <span style=color:#f92672>=</span> FilterType<span style=color:#f92672>.</span><span style=color:#a6e22e>CUSTOM</span><span style=color:#f92672>,</span> classes <span style=color:#f92672>=</span> AutoConfigurationExcludeFilter<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span> <span style=color:#f92672>})</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#a6e22e>@interface</span> SpringBootApplication <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> org.springframework.boot<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Target</span><span style=color:#f92672>(</span>ElementType<span style=color:#f92672>.</span><span style=color:#a6e22e>TYPE</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Retention</span><span style=color:#f92672>(</span>RetentionPolicy<span style=color:#f92672>.</span><span style=color:#a6e22e>RUNTIME</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Documented</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#a6e22e>@interface</span> SpringBootConfiguration <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>æ ¹æ® SpringBoot å®˜ç½‘ï¼Œè¿™ä¸‰ä¸ªæ³¨è§£çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š</p><ul><li><code>@EnableAutoConfiguration</code>ï¼šå¯ç”¨ SpringBoot çš„è‡ªåŠ¨é…ç½®æœºåˆ¶</li><li><code>@ComponentScan</code>ï¼š æ‰«æè¢«<code>@Component</code> (<code>@Service</code>,<code>@Controller</code>)æ³¨è§£çš„ beanï¼Œæ³¨è§£é»˜è®¤ä¼šæ‰«æè¯¥ç±»æ‰€åœ¨çš„åŒ…ä¸‹æ‰€æœ‰çš„ç±»ã€‚</li><li><code>@Configuration</code>ï¼šå…è®¸åœ¨ Spring ä¸Šä¸‹æ–‡ä¸­<code>æ³¨å†Œé¢å¤–çš„ bean æˆ–å¯¼å…¥å…¶ä»–é…ç½®ç±»</code></li></ul><h3 id=2-spring-bean-ç›¸å…³>2. Spring Bean ç›¸å…³</h3><h4 id=20-qualifier>2.0. @Qualifier</h4><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>@Autowired</code> æŒ‰ç±»å‹è£…é… <strong>Spring Bean</strong>ã€‚ å¦‚æœå®¹å™¨ä¸­æœ‰å¤šä¸ªç›¸åŒç±»å‹çš„ <strong>bean</strong>ï¼Œåˆ™æ¡†æ¶å°†æŠ›å‡º <code>NoUniqueBeanDefinitionException</code>ï¼Œ ä»¥æç¤ºæœ‰å¤šä¸ªæ»¡è¶³æ¡ä»¶çš„ <strong>bean</strong> è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚é€šè¿‡ä½¿ç”¨ <code>@Qualifier</code> æ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥æ¶ˆé™¤éœ€è¦æ³¨å…¥å“ªä¸ª <strong>bean</strong> çš„é—®é¢˜ã€‚@Componentæˆ–è€…@Beanæ³¨è§£ä¸­å£°æ˜çš„<code>valueå±æ€§</code>ä»¥ç¡®å®šåç§°</p></blockquote><blockquote><p><strong>@Primary</strong> æ³¨è§£å®šä¹‰äº†é¦–é€‰é¡¹ã€‚é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™å°†ä½¿ç”¨ä¸ <code>@Primary</code> æ³¨é‡Šå…³è”çš„ <strong>bean</strong>, å¦‚æœ <code>@Qualifier</code> å’Œ <code>@Primary</code> æ³¨é‡Šéƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆ <code>@Qualifier</code> æ³¨é‡Šå°†å…·æœ‰ä¼˜å…ˆæƒã€‚åŸºæœ¬ä¸Šï¼Œ<code>@Primary</code> æ˜¯å®šä¹‰äº†é»˜è®¤å€¼ï¼Œè€Œ <code>@Qualifier</code> åˆ™éå¸¸å…·ä½“ã€‚</p></blockquote><h4 id=21-autowired-resource>2.1. <code>@Autowired</code> &@Resource</h4><ul><li>è‡ªåŠ¨å¯¼å…¥å¯¹è±¡åˆ°ç±»ä¸­ï¼Œ<code>è¢«æ³¨å…¥è¿›çš„ç±»åŒæ ·è¦è¢« Spring å®¹å™¨ç®¡ç†</code>æ¯”å¦‚ï¼šService ç±»æ³¨å…¥åˆ° Controller ç±»ä¸­ã€‚</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Service</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserService</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/users&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserController</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>private</span> UserService userService<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><blockquote><p>@Resourceå’Œ@Autowiredæ³¨è§£éƒ½æ˜¯ç”¨æ¥å®ç°ä¾èµ–æ³¨å…¥çš„ã€‚åªæ˜¯@AutoWriedæŒ‰by typeè‡ªåŠ¨æ³¨å…¥ï¼Œè€Œ@Resourceé»˜è®¤æŒ‰byNameè‡ªåŠ¨æ³¨å…¥ã€‚springå°†nameå±æ€§è§£æä¸ºbeançš„åå­—ï¼Œè€Œtypeå±æ€§åˆ™è¢«è§£æä¸ºbeançš„ç±»å‹ã€‚æ‰€ä»¥å¦‚æœä½¿ç”¨nameå±æ€§ï¼Œåˆ™ä½¿ç”¨byNameçš„è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ï¼Œå¦‚æœä½¿ç”¨typeå±æ€§åˆ™ä½¿ç”¨byTypeçš„è‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚å¦‚æœéƒ½æ²¡æœ‰æŒ‡å®šï¼Œåˆ™é€šè¿‡åå°„æœºåˆ¶ä½¿ç”¨byNameè‡ªåŠ¨æ³¨å…¥ç­–ç•¥ã€‚<strong>nameå€¼æ˜¯é…ç½®beané‡Œçš„nameå±æ€§æŒ‡å®šçš„å€¼ï¼Œè€Œä¸æ˜¯idçš„å€¼</strong></p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Resource</span><span style=color:#f92672>(</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;bucket&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String bucketName<span style=color:#f92672>;</span>    
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Resource</span><span style=color:#f92672>(</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;style&#34;</span><span style=color:#f92672>)</span>    
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> String styleName<span style=color:#f92672>;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;bucket&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;java.lang.String&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>&lt;constructor-arg</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${oos.bucketName}&#34;</span><span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&lt;/bean&gt;</span> 
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!-- å›¾ç‰‡æ ·å¼å --&gt;</span> <span style=color:#f92672>&lt;bean</span> <span style=color:#a6e22e>name=</span><span style=color:#e6db74>&#34;style&#34;</span> <span style=color:#a6e22e>class=</span><span style=color:#e6db74>&#34;java.lang.String&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>&lt;constructor-arg</span> <span style=color:#a6e22e>value=</span><span style=color:#e6db74>&#34;${oos.styleName}&#34;</span><span style=color:#f92672>/&gt;</span> <span style=color:#f92672>&lt;/bean&gt;</span>
</span></span></code></pre></div><h4 id=22-componentrepositoryservice-controller>2.2. <code>@Component</code>,<code>@Repository</code>,<code>@Service</code>, <code>@Controller</code></h4><p>æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ <code>@Autowired</code> æ³¨è§£è®© Spring å®¹å™¨å¸®æˆ‘ä»¬è‡ªåŠ¨è£…é… beanã€‚è¦æƒ³æŠŠç±»æ ‡è¯†æˆå¯ç”¨äº <code>@Autowired</code> æ³¨è§£è‡ªåŠ¨è£…é…çš„ bean çš„ç±»,å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ³¨è§£å®ç°ï¼š</p><ul><li><code>@Component</code> ï¼šé€šç”¨çš„æ³¨è§£ï¼Œå¯æ ‡æ³¨ä»»æ„ç±»ä¸º <code>Spring</code> ç»„ä»¶ã€‚å¦‚æœä¸€ä¸ª Bean ä¸çŸ¥é“å±äºå“ªä¸ªå±‚ï¼Œå¯ä»¥ä½¿ç”¨<code>@Component</code> æ³¨è§£æ ‡æ³¨ã€‚</li><li><code>@Repository</code> : å¯¹åº”æŒä¹…å±‚å³ Dao å±‚ï¼Œä¸»è¦ç”¨äºæ•°æ®åº“ç›¸å…³æ“ä½œã€‚</li><li><code>@Service</code> : å¯¹åº”æœåŠ¡å±‚ï¼Œä¸»è¦æ¶‰åŠä¸€äº›å¤æ‚çš„é€»è¾‘ï¼Œéœ€è¦ç”¨åˆ° Dao å±‚ã€‚</li><li><code>@Controller</code> : å¯¹åº” Spring MVC æ§åˆ¶å±‚ï¼Œä¸»è¦ç”¨äºæ¥å—ç”¨æˆ·è¯·æ±‚å¹¶è°ƒç”¨ Service å±‚è¿”å›æ•°æ®ç»™å‰ç«¯é¡µé¢ã€‚</li></ul><h4 id=23-restcontroller>2.3. <code>@RestController</code></h4><p><code>@RestController</code>æ³¨è§£æ˜¯<code>@Controllerå’Œ</code>@<code>ResponseBody</code>çš„åˆé›†,è¡¨ç¤ºè¿™æ˜¯ä¸ªæ§åˆ¶å™¨ bean,å¹¶ä¸”æ˜¯å°†å‡½æ•°çš„è¿”å›å€¼ç›´æ¥å¡«å…¥ HTTP å“åº”ä½“ä¸­,æ˜¯ REST é£æ ¼çš„æ§åˆ¶å™¨ã€‚</p><p>å•ç‹¬ä½¿ç”¨ <code>@Controller</code> ä¸åŠ  <code>@ResponseBody</code>çš„è¯ä¸€èˆ¬ä½¿ç”¨åœ¨è¦è¿”å›ä¸€ä¸ªè§†å›¾çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µå±äºæ¯”è¾ƒä¼ ç»Ÿçš„ Spring MVC çš„åº”ç”¨ï¼Œå¯¹åº”äºå‰åç«¯ä¸åˆ†ç¦»çš„æƒ…å†µã€‚<code>@Controller</code> +<code>@ResponseBody</code> è¿”å› JSON æˆ– XML å½¢å¼æ•°æ®</p><p><code>@RestController</code>åªè¿”å›å¯¹è±¡ï¼Œå¯¹è±¡æ•°æ®ç›´æ¥ä»¥ JSON æˆ– XML å½¢å¼å†™å…¥ HTTP å“åº”(Response)ä¸­ï¼Œè¿™ç§æƒ…å†µå±äº RESTful WebæœåŠ¡ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰æ—¥å¸¸å¼€å‘æ‰€æ¥è§¦çš„æœ€å¸¸ç”¨çš„æƒ…å†µï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰ã€‚<img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619135625071.png data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619135625071.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619135625071.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619135625071.png 2x" data-sizes=auto alt=https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619135625071.png title=https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619135625071.png></p><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485544&amp;idx=1&amp;sn=3cc95b88979e28fe3bfe539eb421c6d8&amp;chksm=cea247a3f9d5ceb5e324ff4b8697adc3e828ecf71a3468445e70221cce768d1e722085359907&amp;token=1725092312&amp;lang=zh_CN#rd" target=_blank rel="external nofollow noopener noreferrer">@Controller +@ResponseBody<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> è¿”å›JSON æˆ– XML å½¢å¼æ•°æ®, å¦‚æœä½ éœ€è¦åœ¨Spring4ä¹‹å‰å¼€å‘ RESTful WebæœåŠ¡çš„è¯ï¼Œä½ éœ€è¦ä½¿ç”¨<code>@Controller</code> å¹¶ç»“åˆ<code>@ResponseBody</code>æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯è¯´<code>@Controller</code> +<code>@ResponseBody</code>= <code>@RestController</code>ï¼ˆSpring 4 ä¹‹åæ–°åŠ çš„æ³¨è§£ï¼‰ã€‚</p><h4 id=24-scope>2.4. <code>@Scope</code></h4><p>å£°æ˜ Spring Bean çš„ä½œç”¨åŸŸï¼Œä½¿ç”¨æ–¹æ³•:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Scope</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;singleton&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> Person <span style=color:#a6e22e>personSingleton</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> Person<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>å››ç§å¸¸è§çš„ Spring Bean çš„ä½œç”¨åŸŸï¼š</strong></p><ul><li>singleton : å”¯ä¸€ bean å®ä¾‹ï¼Œ<code>Spring ä¸­çš„ bean é»˜è®¤éƒ½æ˜¯å•ä¾‹çš„</code>ã€‚</li><li><code>prototype : æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ bean å®ä¾‹</code>ã€‚</li><li><code>request</code> :<code> æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼Œè¯¥ bean ä»…åœ¨å½“å‰ HTTP request å†…æœ‰æ•ˆã€‚</code></li><li><code>session </code>: æ¯ä¸€æ¬¡ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼Œè¯¥ <code>bean ä»…åœ¨å½“å‰ HTTP session å†…æœ‰æ•ˆã€‚</code></li></ul><h4 id=25-configuration>2.5. <code>@Configuration</code></h4><p>ä¸€èˆ¬ç”¨æ¥å£°æ˜é…ç½®ç±»ï¼Œå¯ä»¥ä½¿ç”¨ <code>@Component</code>æ³¨è§£æ›¿ä»£ï¼Œä¸è¿‡ä½¿ç”¨<code>@Configuration</code>æ³¨è§£å£°æ˜é…ç½®ç±»æ›´åŠ è¯­ä¹‰åŒ–ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AppConfig</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> TransferService <span style=color:#a6e22e>transferService</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> TransferServiceImpl<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=3-å¤„ç†å¸¸è§çš„-http-è¯·æ±‚ç±»å‹>3. å¤„ç†å¸¸è§çš„ HTTP è¯·æ±‚ç±»å‹</h3><p><strong>5 ç§å¸¸è§çš„è¯·æ±‚ç±»å‹:</strong></p><ul><li><strong>GET</strong> ï¼šè¯·æ±‚ä»æœåŠ¡å™¨è·å–ç‰¹å®šèµ„æºã€‚ä¸¾ä¸ªä¾‹å­ï¼š<code>GET /users</code>ï¼ˆè·å–æ‰€æœ‰å­¦ç”Ÿï¼‰</li><li><strong>POST</strong> ï¼šåœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºã€‚ä¸¾ä¸ªä¾‹å­ï¼š<code>POST /users</code>ï¼ˆåˆ›å»ºå­¦ç”Ÿï¼‰</li><li><strong>PUT</strong> ï¼šæ›´æ–°æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ›´æ–°åçš„æ•´ä¸ªèµ„æºï¼‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼š<code>PUT /users/12</code>ï¼ˆæ›´æ–°ç¼–å·ä¸º 12 çš„å­¦ç”Ÿï¼‰</li><li><strong>DELETE</strong> ï¼šä»æœåŠ¡å™¨åˆ é™¤ç‰¹å®šçš„èµ„æºã€‚ä¸¾ä¸ªä¾‹å­ï¼š<code>DELETE /users/12</code>ï¼ˆåˆ é™¤ç¼–å·ä¸º 12 çš„å­¦ç”Ÿï¼‰</li><li><strong>PATCH</strong> ï¼šæ›´æ–°æœåŠ¡å™¨ä¸Šçš„èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ›´æ”¹çš„å±æ€§ï¼Œå¯ä»¥çœ‹åšä½œæ˜¯éƒ¨åˆ†æ›´æ–°ï¼‰ï¼Œä½¿ç”¨çš„æ¯”è¾ƒå°‘ï¼Œè¿™é‡Œå°±ä¸ä¸¾ä¾‹å­äº†ã€‚</li></ul><h4 id=31-get-è¯·æ±‚>3.1. GET è¯·æ±‚</h4><p><code>@GetMapping("users")</code> ç­‰ä»·äº<code>@RequestMapping(value="/users",method=RequestMethod.GET)</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@GetMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/users&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>List<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;&gt;</span> <span style=color:#a6e22e>getAllUsers</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> userRepository<span style=color:#f92672>.</span><span style=color:#a6e22e>findAll</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=32-post-è¯·æ±‚>3.2. POST è¯·æ±‚</h4><p><code>@PostMapping("users")</code> ç­‰ä»·äº<code>@RequestMapping(value="/users",method=RequestMethod.POST)</code></p><p>å…³äº<code>@RequestBody</code>æ³¨è§£çš„ä½¿ç”¨ï¼Œåœ¨ä¸‹é¢çš„â€œå‰åç«¯ä¼ å€¼â€è¿™å—ä¼šè®²åˆ°ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@PostMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/users&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>createUser</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@Valid</span> <span style=color:#a6e22e>@RequestBody</span> UserCreateRequest userCreateRequest<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> userRespository<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>user<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=33-put-è¯·æ±‚>3.3. PUT è¯·æ±‚</h4><p><code>@PutMapping("/users/{userId}")</code> ç­‰ä»·äº<code>@RequestMapping(value="/users/{userId}",method=RequestMethod.PUT)</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@PutMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/users/{userId}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>updateUser</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@PathVariable</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;userId&#34;</span><span style=color:#f92672>)</span> Long userId<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Valid</span> <span style=color:#a6e22e>@RequestBody</span> UserUpdateRequest userUpdateRequest<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=34-delete-è¯·æ±‚>3.4. <strong>DELETE è¯·æ±‚</strong></h4><p><code>@DeleteMapping("/users/{userId}")</code>ç­‰ä»·äº<code>@RequestMapping(value="/users/{userId}",method=RequestMethod.DELETE)</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@DeleteMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/users/{userId}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> ResponseEntity <span style=color:#a6e22e>deleteUser</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@PathVariable</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;userId&#34;</span><span style=color:#f92672>)</span> Long userId<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=35-patch-è¯·æ±‚>3.5. <strong>PATCH è¯·æ±‚</strong></h4><p>ä¸€èˆ¬å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯ PUT ä¸å¤Ÿç”¨äº†ä¹‹åæ‰ç”¨ PATCH è¯·æ±‚å»æ›´æ–°æ•°æ®ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>  <span style=color:#a6e22e>@PatchMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/profile&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> ResponseEntity <span style=color:#a6e22e>updateStudent</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@RequestBody</span> StudentUpdateRequest studentUpdateRequest<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        studentRepository<span style=color:#f92672>.</span><span style=color:#a6e22e>updateDetail</span><span style=color:#f92672>(</span>studentUpdateRequest<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ResponseEntity<span style=color:#f92672>.</span><span style=color:#a6e22e>ok</span><span style=color:#f92672>().</span><span style=color:#a6e22e>build</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=4-å‰åç«¯ä¼ å€¼>4. å‰åç«¯ä¼ å€¼</h3><h4 id=41-pathvariable-å’Œ-requestparam>4.1. <code>@PathVariable</code> å’Œ <code>@RequestParam</code></h4><p><code>@PathVariable</code>ç”¨äºè·å–è·¯å¾„å‚æ•°ï¼Œ<code>@RequestParam</code>ç”¨äºè·å–æŸ¥è¯¢å‚æ•°ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@GetMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/klasses/{klassId}/teachers&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> List<span style=color:#f92672>&lt;</span>Teacher<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getKlassRelatedTeachers</span><span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>@PathVariable</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;klassId&#34;</span><span style=color:#f92672>)</span> Long klassId<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>@RequestParam</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;type&#34;</span><span style=color:#f92672>,</span> required <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>)</span> String type <span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>å¦‚æœæˆ‘ä»¬è¯·æ±‚çš„ url æ˜¯ï¼š<code>/klasses/{123456}/teachers?type=web</code></p><p>é‚£ä¹ˆæˆ‘ä»¬æœåŠ¡è·å–åˆ°çš„æ•°æ®å°±æ˜¯ï¼š<code>klassId=123456,type=web</code>ã€‚</p><h4 id=42-requestbody>4.2. <code>@RequestBody</code></h4><p>ç”¨äºè¯»å– Request è¯·æ±‚ï¼ˆå¯èƒ½æ˜¯ POST,PUT,DELETE,GET è¯·æ±‚ï¼‰çš„ body éƒ¨åˆ†å¹¶ä¸”<strong>Content-Type ä¸º application/json</strong> æ ¼å¼çš„æ•°æ®ï¼Œæ¥æ”¶åˆ°æ•°æ®ä¹‹åä¼šè‡ªåŠ¨å°†æ•°æ®ç»‘å®šåˆ° Java å¯¹è±¡ä¸Šå»ã€‚ç³»ç»Ÿä¼šä½¿ç”¨<code>HttpMessageConverter</code>æˆ–è€…è‡ªå®šä¹‰çš„<code>HttpMessageConverter</code>å°†è¯·æ±‚çš„ body ä¸­çš„ json å­—ç¬¦ä¸²è½¬æ¢ä¸º java å¯¹è±¡ã€‚</p><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªæ³¨å†Œçš„æ¥å£ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@PostMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/sign-up&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> ResponseEntity <span style=color:#a6e22e>signUp</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@RequestBody</span> <span style=color:#a6e22e>@Valid</span> UserRegisterRequest userRegisterRequest<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  userService<span style=color:#f92672>.</span><span style=color:#a6e22e>save</span><span style=color:#f92672>(</span>userRegisterRequest<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> ResponseEntity<span style=color:#f92672>.</span><span style=color:#a6e22e>ok</span><span style=color:#f92672>().</span><span style=color:#a6e22e>build</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><code>UserRegisterRequest</code>å¯¹è±¡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@AllArgsConstructor</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@NoArgsConstructor</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserRegisterRequest</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NotBlank</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String userName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NotBlank</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String password<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NotBlank</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String fullName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>æˆ‘ä»¬å‘é€ post è¯·æ±‚åˆ°è¿™ä¸ªæ¥å£ï¼Œå¹¶ä¸” body æºå¸¦ JSON æ•°æ®ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#f92672>&#34;userName&#34;</span>:<span style=color:#e6db74>&#34;coder&#34;</span>,<span style=color:#f92672>&#34;fullName&#34;</span>:<span style=color:#e6db74>&#34;shuangkou&#34;</span>,<span style=color:#f92672>&#34;password&#34;</span>:<span style=color:#e6db74>&#34;123456&#34;</span>}
</span></span></code></pre></div><p>è¿™æ ·æˆ‘ä»¬çš„åç«¯å°±å¯ä»¥ç›´æ¥æŠŠ json æ ¼å¼çš„æ•°æ®æ˜ å°„åˆ°æˆ‘ä»¬çš„ <code>UserRegisterRequest</code> ç±»ä¸Šã€‚</p><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogpictureV2/raw/master/@RequestBody.png data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/@RequestBody.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/@RequestBody.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/@RequestBody.png 2x" data-sizes=auto alt=https://gitee.com/github-25970295/blogpictureV2/raw/master/@RequestBody.png title=https://gitee.com/github-25970295/blogpictureV2/raw/master/@RequestBody.png></p><p>ğŸ‘‰ éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<strong>ä¸€ä¸ªè¯·æ±‚æ–¹æ³•åªå¯ä»¥æœ‰ä¸€ä¸ª<code>@RequestBody</code>ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ª<code>@RequestParam</code>å’Œ<code>@PathVariable</code></strong>ã€‚ å¦‚æœä½ çš„æ–¹æ³•å¿…é¡»è¦ç”¨ä¸¤ä¸ª <code>@RequestBody</code>æ¥æ¥å—æ•°æ®çš„è¯ï¼Œå¤§æ¦‚ç‡æ˜¯ä½ çš„æ•°æ®åº“è®¾è®¡æˆ–è€…ç³»ç»Ÿè®¾è®¡å‡ºé—®é¢˜äº†ï¼</p><h3 id=5-è¯»å–é…ç½®ä¿¡æ¯>5. è¯»å–é…ç½®ä¿¡æ¯</h3><p>æˆ‘ä»¬çš„æ•°æ®æº<code>application.yml</code>å†…å®¹å¦‚ä¸‹ï¼šï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>wuhan2020</span>: <span style=color:#ae81ff>2020å¹´åˆæ­¦æ±‰çˆ†å‘äº†æ–°å‹å† çŠ¶ç—…æ¯’ï¼Œç–«æƒ…ä¸¥é‡ï¼Œä½†æ˜¯ï¼Œæˆ‘ç›¸ä¿¡ä¸€åˆ‡éƒ½ä¼šè¿‡å»ï¼æ­¦æ±‰åŠ æ²¹ï¼ä¸­å›½åŠ æ²¹ï¼</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>my-profile</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Guideå“¥</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>email</span>: <span style=color:#ae81ff>koushuangbwcx@163.com</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>library</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>location</span>: <span style=color:#ae81ff>æ¹–åŒ—æ­¦æ±‰åŠ æ²¹ä¸­å›½åŠ æ²¹</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>books</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>å¤©æ‰åŸºæœ¬æ³•</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>description</span>: <span style=color:#ae81ff>äºŒåäºŒå²çš„æ—æœå¤•åœ¨çˆ¶äº²ç¡®è¯Šé˜¿å°”èŒ¨æµ·é»˜ç—…è¿™å¤©ï¼Œå¾—çŸ¥è‡ªå·±æš—æ‹å¤šå¹´çš„æ ¡å›­ç”·ç¥è£´ä¹‹å³å°†å‡ºå›½æ·±é€ çš„æ¶ˆæ¯â€”â€”å¯¹æ–¹è€ƒå–çš„å­¦æ ¡ï¼Œæ°æ˜¯çˆ¶äº²å½“å¹´ä¸ºå¥¹æ”¾å¼ƒçš„é‚£æ‰€ã€‚</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>æ—¶é—´çš„ç§©åº</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>description</span>: <span style=color:#ae81ff>ä¸ºä»€ä¹ˆæˆ‘ä»¬è®°å¾—è¿‡å»ï¼Œè€Œéæœªæ¥ï¼Ÿæ—¶é—´â€œæµé€â€æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ˜¯æˆ‘ä»¬å­˜åœ¨äºæ—¶é—´ä¹‹å†…ï¼Œè¿˜æ˜¯æ—¶é—´å­˜åœ¨äºæˆ‘ä»¬ä¹‹ä¸­ï¼Ÿå¡æ´›Â·ç½—éŸ¦åˆ©ç”¨è¯—æ„çš„æ–‡å­—ï¼Œé‚€è¯·æˆ‘ä»¬æ€è€ƒè¿™ä¸€äº˜å¤éš¾é¢˜â€”â€”æ—¶é—´çš„æœ¬è´¨ã€‚</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>äº†ä¸èµ·çš„æˆ‘</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>description</span>: <span style=color:#ae81ff>å¦‚ä½•å…»æˆä¸€ä¸ªæ–°ä¹ æƒ¯ï¼Ÿå¦‚ä½•è®©å¿ƒæ™ºå˜å¾—æ›´æˆç†Ÿï¼Ÿå¦‚ä½•æ‹¥æœ‰é«˜è´¨é‡çš„å…³ç³»ï¼Ÿ å¦‚ä½•èµ°å‡ºäººç”Ÿçš„è‰°éš¾æ—¶åˆ»ï¼Ÿ</span>
</span></span></code></pre></div><h4 id=51-valueå¸¸ç”¨>5.1. <code>@value</code>(å¸¸ç”¨)</h4><p>ä½¿ç”¨ <code>@Value("${property}")</code> è¯»å–æ¯”è¾ƒç®€å•çš„é…ç½®ä¿¡æ¯ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${wuhan2020}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>String wuhan2020<span style=color:#f92672>;</span>
</span></span></code></pre></div><h4 id=52-configurationpropertieså¸¸ç”¨>5.2. <code>@ConfigurationProperties</code>(å¸¸ç”¨)</h4><p>é€šè¿‡<code>@ConfigurationProperties</code>è¯»å–é…ç½®ä¿¡æ¯å¹¶ä¸ bean ç»‘å®šã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Component</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ConfigurationProperties</span><span style=color:#f92672>(</span>prefix <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;library&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LibraryProperties</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NotEmpty</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String location<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>Book<span style=color:#f92672>&gt;</span> books<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Setter</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Getter</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ToString</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Book</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String description<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  çœç•¥getter<span style=color:#f92672>/</span>setter
</span></span><span style=display:flex><span>  <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>ä½ å¯ä»¥åƒä½¿ç”¨æ™®é€šçš„ Spring bean ä¸€æ ·ï¼Œå°†å…¶æ³¨å…¥åˆ°ç±»ä¸­ä½¿ç”¨ã€‚</p><h4 id=53-propertysourceä¸å¸¸ç”¨>5.3. <code>PropertySource</code>ï¼ˆä¸å¸¸ç”¨ï¼‰</h4><p><code>@PropertySource</code>è¯»å–æŒ‡å®š properties æ–‡ä»¶</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Component</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@PropertySource</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;classpath:website.properties&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>WebSite</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Value</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;${url}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String url<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  çœç•¥getter<span style=color:#f92672>/</span>setter
</span></span><span style=display:flex><span>  <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼šã€Š<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247486181&amp;idx=2&amp;sn=10db0ae64ef501f96a5b0dbc4bd78786&amp;chksm=cea2452ef9d5cc384678e456427328600971180a77e40c13936b19369672ca3e342c26e92b50&amp;token=816772476&amp;lang=zh_CN#rd" target=_blank rel="external nofollow noopener noreferrer">10 åˆ†é’Ÿæå®š SpringBoot å¦‚ä½•ä¼˜é›…è¯»å–é…ç½®æ–‡ä»¶ï¼Ÿ<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>ã€‹ ã€‚</p><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619140555651.png data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619140555651.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619140555651.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619140555651.png 2x" data-sizes=auto alt=https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619140555651.png title=https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210619140555651.png></p><h3 id=6-å‚æ•°æ ¡éªŒ>6. å‚æ•°æ ¡éªŒ</h3><p><strong>æ•°æ®çš„æ ¡éªŒçš„é‡è¦æ€§å°±ä¸ç”¨è¯´äº†ï¼Œå³ä½¿åœ¨å‰ç«¯å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å¯¹ä¼ å…¥åç«¯çš„æ•°æ®å†è¿›è¡Œä¸€éæ ¡éªŒï¼Œé¿å…ç”¨æˆ·ç»•è¿‡æµè§ˆå™¨ç›´æ¥é€šè¿‡ä¸€äº› HTTP å·¥å…·ç›´æ¥å‘åç«¯è¯·æ±‚ä¸€äº›è¿æ³•æ•°æ®ã€‚</strong></p><p><strong>JSR(Java Specification Requestsï¼‰</strong> æ˜¯ä¸€å¥— JavaBean å‚æ•°æ ¡éªŒçš„æ ‡å‡†ï¼Œå®ƒå®šä¹‰äº†å¾ˆå¤šå¸¸ç”¨çš„æ ¡éªŒæ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†è¿™äº›æ³¨è§£åŠ åœ¨æˆ‘ä»¬ JavaBean çš„å±æ€§ä¸Šé¢ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨éœ€è¦æ ¡éªŒçš„æ—¶å€™è¿›è¡Œæ ¡éªŒäº†ï¼Œéå¸¸æ–¹ä¾¿ï¼</p><p>æ ¡éªŒçš„æ—¶å€™æˆ‘ä»¬å®é™…ç”¨çš„æ˜¯ <strong>Hibernate Validator</strong> æ¡†æ¶ã€‚Hibernate Validator æ˜¯ Hibernate å›¢é˜Ÿæœ€åˆçš„æ•°æ®æ ¡éªŒæ¡†æ¶ï¼ŒHibernate Validator 4.x æ˜¯ Bean Validation 1.0ï¼ˆJSR 303ï¼‰çš„å‚è€ƒå®ç°ï¼ŒHibernate Validator 5.x æ˜¯ Bean Validation 1.1ï¼ˆJSR 349ï¼‰çš„å‚è€ƒå®ç°ï¼Œç›®å‰æœ€æ–°ç‰ˆçš„ Hibernate Validator 6.x æ˜¯ Bean Validation 2.0ï¼ˆJSR 380ï¼‰çš„å‚è€ƒå®ç°ã€‚</p><p>SpringBoot é¡¹ç›®çš„ spring-boot-starter-web ä¾èµ–ä¸­å·²ç»æœ‰ hibernate-validator åŒ…ï¼Œä¸éœ€è¦å¼•ç”¨ç›¸å…³ä¾èµ–ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆé€šè¿‡ idea æ’ä»¶â€”Maven Helper ç”Ÿæˆï¼‰ï¼š</p><p><strong>æ³¨</strong>ï¼šæ›´æ–°ç‰ˆæœ¬çš„ spring-boot-starter-web ä¾èµ–ä¸­ä¸å†æœ‰ hibernate-validator åŒ…ï¼ˆå¦‚2.3.11.RELEASEï¼‰ï¼Œéœ€è¦è‡ªå·±å¼•å…¥ <code>spring-boot-starter-validation</code> ä¾èµ–ã€‚</p><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/2021/03/c7bacd12-1c1a-4e41-aaaf-4cad840fc073.png data-srcset="https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/2021/03/c7bacd12-1c1a-4e41-aaaf-4cad840fc073.png, https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/2021/03/c7bacd12-1c1a-4e41-aaaf-4cad840fc073.png 1.5x, https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/2021/03/c7bacd12-1c1a-4e41-aaaf-4cad840fc073.png 2x" data-sizes=auto alt=https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/2021/03/c7bacd12-1c1a-4e41-aaaf-4cad840fc073.png title=https://guide-blog-images.oss-cn-shenzhen.aliyuncs.com/2021/03/c7bacd12-1c1a-4e41-aaaf-4cad840fc073.png></p><p>é SpringBoot é¡¹ç›®éœ€è¦è‡ªè¡Œå¼•å…¥ç›¸å…³ä¾èµ–åŒ…ï¼Œè¿™é‡Œä¸å¤šåšè®²è§£ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼šã€Š<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485783&amp;idx=1&amp;sn=a407f3b75efa17c643407daa7fb2acd6&amp;chksm=cea2469cf9d5cf8afbcd0a8a1c9cc4294d6805b8e01bee6f76bb2884c5bc15478e91459def49&amp;token=292197051&amp;lang=zh_CN#rd" target=_blank rel="external nofollow noopener noreferrer">å¦‚ä½•åœ¨ Spring/Spring Boot ä¸­åšå‚æ•°æ ¡éªŒï¼Ÿä½ éœ€è¦äº†è§£çš„éƒ½åœ¨è¿™é‡Œï¼<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>ã€‹ã€‚</p><p>ğŸ‘‰ éœ€è¦æ³¨æ„çš„æ˜¯ï¼š <strong>æ‰€æœ‰çš„æ³¨è§£ï¼Œæ¨èä½¿ç”¨ JSR æ³¨è§£ï¼Œå³<code>javax.validation.constraints</code>ï¼Œè€Œä¸æ˜¯<code>org.hibernate.validator.constraints</code></strong></p><h4 id=61-ä¸€äº›å¸¸ç”¨çš„å­—æ®µéªŒè¯çš„æ³¨è§£>6.1. ä¸€äº›å¸¸ç”¨çš„å­—æ®µéªŒè¯çš„æ³¨è§£</h4><ul><li><code>@NotEmpty</code> è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²çš„ä¸èƒ½ä¸º null ä¹Ÿä¸èƒ½ä¸ºç©º</li><li><code>@NotBlank</code> è¢«æ³¨é‡Šçš„å­—ç¬¦ä¸²é nullï¼Œå¹¶ä¸”å¿…é¡»åŒ…å«ä¸€ä¸ªéç©ºç™½å­—ç¬¦</li><li><code>@Null</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º null</li><li><code>@NotNull</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸ä¸º null</li><li><code>@AssertTrue</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º true</li><li><code>@AssertFalse</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ä¸º false</li><li><code>@Pattern(regex=,flag=)</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»ç¬¦åˆæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼</li><li><code>@Email</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ Email æ ¼å¼ã€‚</li><li><code>@Min(value)</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</li><li><code>@Max(value)</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</li><li><code>@DecimalMin(value)</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å¤§äºç­‰äºæŒ‡å®šçš„æœ€å°å€¼</li><li><code>@DecimalMax(value)</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»å°äºç­‰äºæŒ‡å®šçš„æœ€å¤§å€¼</li><li><code>@Size(max=, min=)</code>è¢«æ³¨é‡Šçš„å…ƒç´ çš„å¤§å°å¿…é¡»åœ¨æŒ‡å®šçš„èŒƒå›´å†…</li><li><code>@Digits (integer, fraction)</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå…¶å€¼å¿…é¡»åœ¨å¯æ¥å—çš„èŒƒå›´å†…</li><li><code>@Past</code>è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ</li><li><code>@Future</code> è¢«æ³¨é‡Šçš„å…ƒç´ å¿…é¡»æ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ</li><li>&mldr;&mldr;</li></ul><h4 id=62-éªŒè¯è¯·æ±‚ä½“requestbody>6.2. éªŒè¯è¯·æ±‚ä½“(RequestBody)</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@AllArgsConstructor</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@NoArgsConstructor</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NotNull</span><span style=color:#f92672>(</span>message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;classId ä¸èƒ½ä¸ºç©º&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String classId<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Size</span><span style=color:#f92672>(</span>max <span style=color:#f92672>=</span> 33<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NotNull</span><span style=color:#f92672>(</span>message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;name ä¸èƒ½ä¸ºç©º&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Pattern</span><span style=color:#f92672>(</span>regexp <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;((^Man$|^Woman$|^UGM$))&#34;</span><span style=color:#f92672>,</span> message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;sex å€¼ä¸åœ¨å¯é€‰èŒƒå›´&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NotNull</span><span style=color:#f92672>(</span>message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;sex ä¸èƒ½ä¸ºç©º&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String sex<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Email</span><span style=color:#f92672>(</span>message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;email æ ¼å¼ä¸æ­£ç¡®&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@NotNull</span><span style=color:#f92672>(</span>message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;email ä¸èƒ½ä¸ºç©º&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String email<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>æˆ‘ä»¬åœ¨éœ€è¦éªŒè¯çš„å‚æ•°ä¸ŠåŠ ä¸Šäº†<code>@Valid</code>æ³¨è§£ï¼Œå¦‚æœéªŒè¯å¤±è´¥ï¼Œå®ƒå°†æŠ›å‡º<code>MethodArgumentNotValidException</code>ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/api&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PersonController</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@PostMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/person&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>Person<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getPerson</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@RequestBody</span> <span style=color:#a6e22e>@Valid</span> Person person<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ResponseEntity<span style=color:#f92672>.</span><span style=color:#a6e22e>ok</span><span style=color:#f92672>().</span><span style=color:#a6e22e>body</span><span style=color:#f92672>(</span>person<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=63-éªŒè¯è¯·æ±‚å‚æ•°path-variables-å’Œ-request-parameters>6.3. éªŒè¯è¯·æ±‚å‚æ•°(Path Variables å’Œ Request Parameters)</h4><p><strong>ä¸€å®šä¸€å®šä¸è¦å¿˜è®°åœ¨ç±»ä¸ŠåŠ ä¸Š <code>Validated</code> æ³¨è§£äº†ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥å‘Šè¯‰<code> Spring å»æ ¡éªŒæ–¹æ³•å‚æ•°</code>ã€‚</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/api&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Validated</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PersonController</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GetMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/person/{id}&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>getPersonByID</span><span style=color:#f92672>(</span><span style=color:#a6e22e>@Valid</span> <span style=color:#a6e22e>@PathVariable</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;id&#34;</span><span style=color:#f92672>)</span> <span style=color:#a6e22e>@Max</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> 5<span style=color:#f92672>,</span>message <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;è¶…è¿‡ id çš„èŒƒå›´äº†&#34;</span><span style=color:#f92672>)</span> Integer id<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ResponseEntity<span style=color:#f92672>.</span><span style=color:#a6e22e>ok</span><span style=color:#f92672>().</span><span style=color:#a6e22e>body</span><span style=color:#f92672>(</span>id<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>æ›´å¤šå…³äºå¦‚ä½•åœ¨ Spring é¡¹ç›®ä¸­è¿›è¡Œå‚æ•°æ ¡éªŒçš„å†…å®¹ï¼Œè¯·çœ‹ã€Š<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485783&amp;idx=1&amp;sn=a407f3b75efa17c643407daa7fb2acd6&amp;chksm=cea2469cf9d5cf8afbcd0a8a1c9cc4294d6805b8e01bee6f76bb2884c5bc15478e91459def49&amp;token=292197051&amp;lang=zh_CN#rd" target=_blank rel="external nofollow noopener noreferrer">å¦‚ä½•åœ¨ Spring/Spring Boot ä¸­åšå‚æ•°æ ¡éªŒï¼Ÿä½ éœ€è¦äº†è§£çš„éƒ½åœ¨è¿™é‡Œï¼<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>ã€‹è¿™ç¯‡æ–‡ç« ã€‚</p><h3 id=7-å…¨å±€å¤„ç†-controller-å±‚å¼‚å¸¸>7. å…¨å±€å¤„ç† Controller å±‚å¼‚å¸¸</h3><p><strong>ç›¸å…³æ³¨è§£ï¼š</strong></p><ol><li><code>@ControllerAdvice</code> :æ³¨è§£å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±»</li><li><code>@ExceptionHandler</code> :æ³¨è§£å£°æ˜å¼‚å¸¸å¤„ç†æ–¹æ³•</li></ol><p>å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿæ‹¿æˆ‘ä»¬åœ¨ç¬¬ 5 èŠ‚å‚æ•°æ ¡éªŒè¿™å—æ¥ä¸¾ä¾‹å­ã€‚å¦‚æœæ–¹æ³•å‚æ•°ä¸å¯¹çš„è¯å°±ä¼šæŠ›å‡º<code>MethodArgumentNotValidException</code>ï¼Œæˆ‘ä»¬æ¥å¤„ç†è¿™ä¸ªå¼‚å¸¸ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@ControllerAdvice</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ResponseBody</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>GlobalExceptionHandler</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * è¯·æ±‚å‚æ•°å¼‚å¸¸å¤„ç†
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ExceptionHandler</span><span style=color:#f92672>(</span>MethodArgumentNotValidException<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;?&gt;</span> handleMethodArgumentNotValidException<span style=color:#f92672>(</span>MethodArgumentNotValidException ex<span style=color:#f92672>,</span> HttpServletRequest request<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>       <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>æ›´å¤šå…³äº Spring Boot å¼‚å¸¸å¤„ç†çš„å†…å®¹ï¼Œè¯·çœ‹æˆ‘çš„è¿™ä¸¤ç¯‡æ–‡ç« ï¼š</p><ol><li><a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485568&amp;idx=2&amp;sn=c5ba880fd0c5d82e39531fa42cb036ac&amp;chksm=cea2474bf9d5ce5dcbc6a5f6580198fdce4bc92ef577579183a729cb5d1430e4994720d59b34&amp;token=2133161636&amp;lang=zh_CN#rd" target=_blank rel="external nofollow noopener noreferrer">SpringBoot å¤„ç†å¼‚å¸¸çš„å‡ ç§å¸¸è§å§¿åŠ¿<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247486379&amp;idx=2&amp;sn=48c29ae65b3ed874749f0803f0e4d90e&amp;chksm=cea24460f9d5cd769ed53ad7e17c97a7963a89f5350e370be633db0ae8d783c3a3dbd58c70f8&amp;token=1054498516&amp;lang=zh_CN#rd" target=_blank rel="external nofollow noopener noreferrer">ä½¿ç”¨æšä¸¾ç®€å•å°è£…ä¸€ä¸ªä¼˜é›…çš„ Spring Boot å…¨å±€å¼‚å¸¸å¤„ç†ï¼<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li></ol><h3 id=8-jpa-ç›¸å…³>8. JPA ç›¸å…³</h3><h4 id=81-åˆ›å»ºè¡¨>8.1. åˆ›å»ºè¡¨</h4><p><code>@Entity</code>å£°æ˜ä¸€ä¸ªç±»å¯¹åº”ä¸€ä¸ªæ•°æ®åº“å®ä½“ã€‚</p><p><code>@Table</code> è®¾ç½®è¡¨å</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Entity</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Table</span><span style=color:#f92672>(</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;role&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Role</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Id</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GeneratedValue</span><span style=color:#f92672>(</span>strategy <span style=color:#f92672>=</span> GenerationType<span style=color:#f92672>.</span><span style=color:#a6e22e>IDENTITY</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Long id<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String description<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    çœç•¥getter<span style=color:#f92672>/</span>setter<span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=82-åˆ›å»ºä¸»é”®>8.2. åˆ›å»ºä¸»é”®</h4><p><code>@Id</code> ï¼šå£°æ˜ä¸€ä¸ªå­—æ®µä¸ºä¸»é”®ã€‚</p><p>ä½¿ç”¨<code>@Id</code>å£°æ˜ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸»é”®çš„ç”Ÿæˆç­–ç•¥ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>@GeneratedValue</code> æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</p><p><strong>1.é€šè¿‡ <code>@GeneratedValue</code>ç›´æ¥ä½¿ç”¨ JPA å†…ç½®æä¾›çš„å››ç§ä¸»é”®ç”Ÿæˆç­–ç•¥æ¥æŒ‡å®šä¸»é”®ç”Ÿæˆç­–ç•¥ã€‚</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Id</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@GeneratedValue</span><span style=color:#f92672>(</span>strategy <span style=color:#f92672>=</span> GenerationType<span style=color:#f92672>.</span><span style=color:#a6e22e>IDENTITY</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> Long id<span style=color:#f92672>;</span>
</span></span></code></pre></div><p>JPA ä½¿ç”¨æšä¸¾å®šä¹‰äº† 4 ä¸­å¸¸è§çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œå¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>enum</span> GenerationType <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * ä½¿ç”¨ä¸€ä¸ªç‰¹å®šçš„æ•°æ®åº“è¡¨æ ¼æ¥ä¿å­˜ä¸»é”®
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * æŒä¹…åŒ–å¼•æ“é€šè¿‡å…³ç³»æ•°æ®åº“çš„ä¸€å¼ ç‰¹å®šçš„è¡¨æ ¼æ¥ç”Ÿæˆä¸»é”®,
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    TABLE<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *åœ¨æŸäº›æ•°æ®åº“ä¸­,ä¸æ”¯æŒä¸»é”®è‡ªå¢é•¿,æ¯”å¦‚Oracleã€PostgreSQLå…¶æä¾›äº†ä¸€ç§å«åš&#34;åºåˆ—(sequence)&#34;çš„æœºåˆ¶ç”Ÿæˆä¸»é”®
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    SEQUENCE<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * ä¸»é”®è‡ªå¢é•¿
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    IDENTITY<span style=color:#f92672>,</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *æŠŠä¸»é”®ç”Ÿæˆç­–ç•¥äº¤ç»™æŒä¹…åŒ–å¼•æ“(persistence engine),
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *æŒä¹…åŒ–å¼•æ“ä¼šæ ¹æ®æ•°æ®åº“åœ¨ä»¥ä¸Šä¸‰ç§ä¸»é”®ç”Ÿæˆ ç­–ç•¥ä¸­é€‰æ‹©å…¶ä¸­ä¸€ç§
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    AUTO
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><code>@GeneratedValue</code>æ³¨è§£é»˜è®¤ä½¿ç”¨çš„ç­–ç•¥æ˜¯<code>GenerationType.AUTO</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#a6e22e>@interface</span> GeneratedValue <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    GenerationType <span style=color:#a6e22e>strategy</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>default</span> AUTO<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    String <span style=color:#a6e22e>generator</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>default</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>ä¸€èˆ¬ä½¿ç”¨ MySQL æ•°æ®åº“çš„è¯ï¼Œä½¿ç”¨<code>GenerationType.IDENTITY</code>ç­–ç•¥æ¯”è¾ƒæ™®éä¸€ç‚¹ï¼ˆåˆ†å¸ƒå¼ç³»ç»Ÿçš„è¯éœ€è¦å¦å¤–è€ƒè™‘ä½¿ç”¨åˆ†å¸ƒå¼ IDï¼‰ã€‚</p><p><strong>2.é€šè¿‡ <code>@GenericGenerator</code>å£°æ˜ä¸€ä¸ªä¸»é”®ç­–ç•¥ï¼Œç„¶å <code>@GeneratedValue</code>ä½¿ç”¨è¿™ä¸ªç­–ç•¥</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Id</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@GeneratedValue</span><span style=color:#f92672>(</span>generator <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;IdentityIdGenerator&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@GenericGenerator</span><span style=color:#f92672>(</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;IdentityIdGenerator&#34;</span><span style=color:#f92672>,</span> strategy <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;identity&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> Long id<span style=color:#f92672>;</span>
</span></span></code></pre></div><p>ç­‰ä»·äºï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Id</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@GeneratedValue</span><span style=color:#f92672>(</span>strategy <span style=color:#f92672>=</span> GenerationType<span style=color:#f92672>.</span><span style=color:#a6e22e>IDENTITY</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> Long id<span style=color:#f92672>;</span>
</span></span></code></pre></div><p>jpa æä¾›çš„ä¸»é”®ç”Ÿæˆç­–ç•¥æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DefaultIdentifierGeneratorFactory</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>implements</span> MutableIdentifierGeneratorFactory<span style=color:#f92672>,</span> Serializable<span style=color:#f92672>,</span> ServiceRegistryAwareService <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>@SuppressWarnings</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;deprecation&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#a6e22e>DefaultIdentifierGeneratorFactory</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;uuid2&#34;</span><span style=color:#f92672>,</span> UUIDGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;guid&#34;</span><span style=color:#f92672>,</span> GUIDGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>			<span style=color:#75715e>// can be done with UUIDGenerator + strategy
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;uuid&#34;</span><span style=color:#f92672>,</span> UUIDHexGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>			<span style=color:#75715e>// &#34;deprecated&#34; for new use
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;uuid.hex&#34;</span><span style=color:#f92672>,</span> UUIDHexGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span> 	<span style=color:#75715e>// uuid.hex is deprecated
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;assigned&#34;</span><span style=color:#f92672>,</span> Assigned<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;identity&#34;</span><span style=color:#f92672>,</span> IdentityGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;select&#34;</span><span style=color:#f92672>,</span> SelectGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;sequence&#34;</span><span style=color:#f92672>,</span> SequenceStyleGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;seqhilo&#34;</span><span style=color:#f92672>,</span> SequenceHiLoGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;increment&#34;</span><span style=color:#f92672>,</span> IncrementGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;foreign&#34;</span><span style=color:#f92672>,</span> ForeignGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;sequence-identity&#34;</span><span style=color:#f92672>,</span> SequenceIdentityGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;enhanced-sequence&#34;</span><span style=color:#f92672>,</span> SequenceStyleGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		register<span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;enhanced-table&#34;</span><span style=color:#f92672>,</span> TableGenerator<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>register</span><span style=color:#f92672>(</span>String strategy<span style=color:#f92672>,</span> Class generatorClass<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>		LOG<span style=color:#f92672>.</span><span style=color:#a6e22e>debugf</span><span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;Registering IdentifierGenerator strategy [%s] -&gt; [%s]&#34;</span><span style=color:#f92672>,</span> strategy<span style=color:#f92672>,</span> generatorClass<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>final</span> Class previous <span style=color:#f92672>=</span> generatorStrategyToClassNameMap<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span> strategy<span style=color:#f92672>,</span> generatorClass <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span> previous <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>			LOG<span style=color:#f92672>.</span><span style=color:#a6e22e>debugf</span><span style=color:#f92672>(</span> <span style=color:#e6db74>&#34;    - overriding [%s]&#34;</span><span style=color:#f92672>,</span> previous<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>		<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=83-è®¾ç½®å­—æ®µç±»å‹>8.3. è®¾ç½®å­—æ®µç±»å‹</h4><p><code>@Column</code> å£°æ˜å­—æ®µã€‚</p><p><strong>ç¤ºä¾‹ï¼š</strong></p><p>è®¾ç½®å±æ€§ userName å¯¹åº”çš„æ•°æ®åº“å­—æ®µåä¸º user_nameï¼Œé•¿åº¦ä¸º 32ï¼Œéç©º</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Column</span><span style=color:#f92672>(</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;user_name&#34;</span><span style=color:#f92672>,</span> nullable <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>,</span> length<span style=color:#f92672>=</span>32<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> String userName<span style=color:#f92672>;</span>
</span></span></code></pre></div><p>è®¾ç½®å­—æ®µç±»å‹å¹¶ä¸”åŠ é»˜è®¤å€¼ï¼Œè¿™ä¸ªè¿˜æ˜¯æŒºå¸¸ç”¨çš„ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Column<span style=color:#f92672>(</span>columnDefinition <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;tinyint(1) default 1&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> Boolean enabled<span style=color:#f92672>;</span>
</span></span></code></pre></div><h4 id=84-æŒ‡å®šä¸æŒä¹…åŒ–ç‰¹å®šå­—æ®µ>8.4. æŒ‡å®šä¸æŒä¹…åŒ–ç‰¹å®šå­—æ®µ</h4><p><code>@Transient</code> ï¼šå£°æ˜ä¸éœ€è¦ä¸æ•°æ®åº“æ˜ å°„çš„å­—æ®µï¼Œåœ¨ä¿å­˜çš„æ—¶å€™ä¸éœ€è¦ä¿å­˜è¿›æ•°æ®åº“ ã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è®©<code>secrect</code> è¿™ä¸ªå­—æ®µä¸è¢«æŒä¹…åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ <code>@Transient</code>å…³é”®å­—å£°æ˜ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Entity<span style=color:#f92672>(</span>name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;USER&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Transient</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String secrect<span style=color:#f92672>;</span> <span style=color:#75715e>// not persistent because of @Transient
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>é™¤äº† <code>@Transient</code>å…³é”®å­—å£°æ˜ï¼Œ è¿˜å¯ä»¥é‡‡ç”¨ä¸‹é¢å‡ ç§æ–¹æ³•ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>static</span> String secrect<span style=color:#f92672>;</span> <span style=color:#75715e>// not persistent because of static
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>final</span> String secrect <span style=color:#f92672>=</span> <span style=color:#960050;background-color:#1e0010>â€œ</span>Satish<span style=color:#960050;background-color:#1e0010>â€</span><span style=color:#f92672>;</span> <span style=color:#75715e>// not persistent because of final
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>transient</span> String secrect<span style=color:#f92672>;</span> <span style=color:#75715e>// not persistent because of transient
</span></span></span></code></pre></div><p>ä¸€èˆ¬ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¯”è¾ƒå¤šã€‚</p><h4 id=85-å£°æ˜å¤§å­—æ®µ>8.5. å£°æ˜å¤§å­—æ®µ</h4><p><code>@Lob</code>:å£°æ˜æŸä¸ªå­—æ®µä¸ºå¤§å­—æ®µã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Lob</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> String content<span style=color:#f92672>;</span>
</span></span></code></pre></div><p>æ›´è¯¦ç»†çš„å£°æ˜ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Lob</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//æŒ‡å®š Lob ç±»å‹æ•°æ®çš„è·å–ç­–ç•¥ï¼Œ FetchType.EAGER è¡¨ç¤ºéå»¶è¿Ÿ åŠ è½½ï¼Œè€Œ FetchType. LAZY è¡¨ç¤ºå»¶è¿ŸåŠ è½½ ï¼›
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@Basic</span><span style=color:#f92672>(</span>fetch <span style=color:#f92672>=</span> FetchType<span style=color:#f92672>.</span><span style=color:#a6e22e>EAGER</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//columnDefinition å±æ€§æŒ‡å®šæ•°æ®è¡¨å¯¹åº”çš„ Lob å­—æ®µç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@Column</span><span style=color:#f92672>(</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;content&#34;</span><span style=color:#f92672>,</span> columnDefinition <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;LONGTEXT NOT NULL&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> String content<span style=color:#f92672>;</span>
</span></span></code></pre></div><h4 id=86-åˆ›å»ºæšä¸¾ç±»å‹çš„å­—æ®µ>8.6. åˆ›å»ºæšä¸¾ç±»å‹çš„å­—æ®µ</h4><p>å¯ä»¥ä½¿ç”¨æšä¸¾ç±»å‹çš„å­—æ®µï¼Œä¸è¿‡æšä¸¾å­—æ®µè¦ç”¨<code>@Enumerated</code>æ³¨è§£ä¿®é¥°ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>enum</span> Gender <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    MALE<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;ç”·æ€§&#34;</span><span style=color:#f92672>),</span>
</span></span><span style=display:flex><span>    FEMALE<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;å¥³æ€§&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String value<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    Gender<span style=color:#f92672>(</span>String str<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        value<span style=color:#f92672>=</span>str<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Entity</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Table</span><span style=color:#f92672>(</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;role&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Role</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Id</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@GeneratedValue</span><span style=color:#f92672>(</span>strategy <span style=color:#f92672>=</span> GenerationType<span style=color:#f92672>.</span><span style=color:#a6e22e>IDENTITY</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Long id<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String name<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String description<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Enumerated</span><span style=color:#f92672>(</span>EnumType<span style=color:#f92672>.</span><span style=color:#a6e22e>STRING</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Gender gender<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    çœç•¥getter<span style=color:#f92672>/</span>setter<span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=87-å¢åŠ å®¡è®¡åŠŸèƒ½>8.7. å¢åŠ å®¡è®¡åŠŸèƒ½</h4><p>åªè¦ç»§æ‰¿äº† <code>AbstractAuditBase</code>çš„ç±»éƒ½ä¼šé»˜è®¤åŠ ä¸Šä¸‹é¢å››ä¸ªå­—æ®µã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Data</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@AllArgsConstructor</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@NoArgsConstructor</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@MappedSuperclass</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@EntityListeners</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> AuditingEntityListener<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AbstractAuditBase</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@CreatedDate</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Column</span><span style=color:#f92672>(</span>updatable <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@JsonIgnore</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Instant createdAt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@LastModifiedDate</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@JsonIgnore</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Instant updatedAt<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@CreatedBy</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Column</span><span style=color:#f92672>(</span>updatable <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@JsonIgnore</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String createdBy<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@LastModifiedBy</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@JsonIgnore</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String updatedBy<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>æˆ‘ä»¬å¯¹åº”çš„å®¡è®¡åŠŸèƒ½å¯¹åº”åœ°é…ç½®ç±»å¯èƒ½æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼ˆSpring Security é¡¹ç›®ï¼‰:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@EnableJpaAuditing</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AuditSecurityConfiguration</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    AuditorAware<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>auditorAware</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#f92672>()</span> <span style=color:#f92672>-&gt;</span> Optional<span style=color:#f92672>.</span><span style=color:#a6e22e>ofNullable</span><span style=color:#f92672>(</span>SecurityContextHolder<span style=color:#f92672>.</span><span style=color:#a6e22e>getContext</span><span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>SecurityContext<span style=color:#f92672>::</span>getAuthentication<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>.</span><span style=color:#a6e22e>filter</span><span style=color:#f92672>(</span>Authentication<span style=color:#f92672>::</span>isAuthenticated<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>.</span><span style=color:#a6e22e>map</span><span style=color:#f92672>(</span>Authentication<span style=color:#f92672>::</span>getName<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>ç®€å•ä»‹ç»ä¸€ä¸‹ä¸Šé¢è®¾è®¡åˆ°çš„ä¸€äº›æ³¨è§£ï¼š</p><ol><li><p><code>@CreatedDate</code>: è¡¨ç¤ºè¯¥å­—æ®µä¸ºåˆ›å»ºæ—¶é—´æ—¶é—´å­—æ®µï¼Œåœ¨è¿™ä¸ªå®ä½“è¢« insert çš„æ—¶å€™ï¼Œä¼šè®¾ç½®å€¼</p></li><li><p><code>@CreatedBy</code> :è¡¨ç¤ºè¯¥å­—æ®µä¸ºåˆ›å»ºäººï¼Œåœ¨è¿™ä¸ªå®ä½“è¢« insert çš„æ—¶å€™ï¼Œä¼šè®¾ç½®å€¼</p><p><code>@LastModifiedDate</code>ã€<code>@LastModifiedBy</code>åŒç†ã€‚</p></li></ol><p><code>@EnableJpaAuditing</code>ï¼šå¼€å¯ JPA å®¡è®¡åŠŸèƒ½ã€‚</p><h4 id=88-åˆ é™¤ä¿®æ”¹æ•°æ®>8.8. åˆ é™¤/ä¿®æ”¹æ•°æ®</h4><p><code>@Modifying</code> æ³¨è§£æç¤º JPA è¯¥æ“ä½œæ˜¯ä¿®æ”¹æ“ä½œ,æ³¨æ„è¿˜è¦é…åˆ<code>@Transactional</code>æ³¨è§£ä½¿ç”¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Repository</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>UserRepository</span> <span style=color:#66d9ef>extends</span> JpaRepository<span style=color:#f92672>&lt;</span>User<span style=color:#f92672>,</span> Integer<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Modifying</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Transactional</span><span style=color:#f92672>(</span>rollbackFor <span style=color:#f92672>=</span> Exception<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>deleteByUserName</span><span style=color:#f92672>(</span>String userName<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=89-å…³è”å…³ç³»>8.9. å…³è”å…³ç³»</h4><ul><li><code>@OneToOne</code> å£°æ˜ä¸€å¯¹ä¸€å…³ç³»</li><li><code>@OneToMany</code> å£°æ˜ä¸€å¯¹å¤šå…³ç³»</li><li><code>@ManyToOne</code>å£°æ˜å¤šå¯¹ä¸€å…³ç³»</li><li><code>MangToMang</code>å£°æ˜å¤šå¯¹å¤šå…³ç³»</li></ul><p>æ›´å¤šå…³äº Spring Boot JPA çš„æ–‡ç« è¯·çœ‹æˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247485689&amp;idx=1&amp;sn=061b32c2222869932be5631fb0bb5260&amp;chksm=cea24732f9d5ce24a356fb3675170e7843addbfcc79ee267cfdb45c83fc7e90babf0f20d22e1&amp;token=292197051&amp;lang=zh_CN#rd" target=_blank rel="external nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚å¦‚ä½•åœ¨ Spring Boot æ­£ç¡®ä¸­ä½¿ç”¨ JPA<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> ã€‚</p><h3 id=9-äº‹åŠ¡-transactional>9. äº‹åŠ¡ <code>@Transactional</code></h3><p>åœ¨è¦å¼€å¯äº‹åŠ¡çš„æ–¹æ³•ä¸Šä½¿ç”¨<code>@Transactional</code>æ³¨è§£å³å¯!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Transactional</span><span style=color:#f92672>(</span>rollbackFor <span style=color:#f92672>=</span> Exception<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>save</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>æˆ‘ä»¬çŸ¥é“ Exception åˆ†ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ RuntimeException å’Œéè¿è¡Œæ—¶å¼‚å¸¸ã€‚åœ¨<code>@Transactional</code>æ³¨è§£ä¸­å¦‚æœä¸é…ç½®<code>rollbackFor</code>å±æ€§,é‚£ä¹ˆäº‹ç‰©åªä¼šåœ¨é‡åˆ°<code>RuntimeException</code>çš„æ—¶å€™æ‰ä¼šå›æ»š,åŠ ä¸Š<code>rollbackFor=Exception.class</code>,å¯ä»¥è®©äº‹ç‰©åœ¨é‡åˆ°éè¿è¡Œæ—¶å¼‚å¸¸æ—¶ä¹Ÿå›æ»šã€‚</p><p><code>@Transactional</code> æ³¨è§£ä¸€èˆ¬ç”¨åœ¨å¯ä»¥ä½œç”¨åœ¨<code>ç±»</code>æˆ–è€…<code>æ–¹æ³•</code>ä¸Šã€‚</p><ul><li><strong>ä½œç”¨äºç±»</strong>ï¼šå½“æŠŠ<code>@Transactional æ³¨è§£æ”¾åœ¨ç±»ä¸Šæ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰è¯¥ç±»çš„</code>public æ–¹æ³•éƒ½é…ç½®ç›¸åŒçš„äº‹åŠ¡å±æ€§ä¿¡æ¯ã€‚</li><li><strong>ä½œç”¨äºæ–¹æ³•</strong>ï¼šå½“ç±»é…ç½®äº†<code>@Transactional</code>ï¼Œæ–¹æ³•ä¹Ÿé…ç½®äº†<code>@Transactional</code>ï¼Œæ–¹æ³•çš„äº‹åŠ¡ä¼šè¦†ç›–ç±»çš„äº‹åŠ¡é…ç½®ä¿¡æ¯ã€‚</li></ul><p>æ›´å¤šå…³äºå…³äº Spring äº‹åŠ¡çš„å†…å®¹è¯·æŸ¥çœ‹ï¼š</p><ol><li><a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247484943&amp;idx=1&amp;sn=46b9082af4ec223137df7d1c8303ca24&amp;chksm=cea249c4f9d5c0d2b8212a17252cbfb74e5fbe5488b76d829827421c53332326d1ec360f5d63&amp;token=1082669959&amp;lang=zh_CN#rd" target=_blank rel="external nofollow noopener noreferrer">å¯èƒ½æ˜¯æœ€æ¼‚äº®çš„ Spring äº‹åŠ¡ç®¡ç†è¯¦è§£<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><a href="https://mp.weixin.qq.com/s?__biz=Mzg2OTA0Njk0OA==&amp;mid=2247486483&amp;idx=2&amp;sn=77be488e206186803531ea5d7164ec53&amp;chksm=cea243d8f9d5cacecaa5c5daae4cde4c697b9b5b21f96dfc6cce428cfcb62b88b3970c26b9c2&amp;token=816772476&amp;lang=zh_CN#rd" target=_blank rel="external nofollow noopener noreferrer">ä¸€å£æ°”è¯´å‡º 6 ç§ @Transactional æ³¨è§£å¤±æ•ˆåœºæ™¯<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li></ol><h3 id=10-json-æ•°æ®å¤„ç†>10. json æ•°æ®å¤„ç†</h3><h4 id=101-è¿‡æ»¤-json-æ•°æ®>10.1. è¿‡æ»¤ json æ•°æ®</h4><p><strong><code>@JsonIgnoreProperties</code> ä½œç”¨åœ¨ç±»ä¸Šç”¨äºè¿‡æ»¤æ‰ç‰¹å®šå­—æ®µä¸è¿”å›æˆ–è€…ä¸è§£æã€‚</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//ç”Ÿæˆjsonæ—¶å°†userRoleså±æ€§è¿‡æ»¤
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>@JsonIgnoreProperties</span><span style=color:#f92672>({</span><span style=color:#e6db74>&#34;userRoles&#34;</span><span style=color:#f92672>})</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String userName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String fullName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String password<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@JsonIgnore</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>UserRole<span style=color:#f92672>&gt;</span> userRoles <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong><code>@JsonIgnore</code>ä¸€èˆ¬ç”¨äºç±»çš„å±æ€§ä¸Šï¼Œä½œç”¨å’Œä¸Šé¢çš„<code>@JsonIgnoreProperties</code> ä¸€æ ·ã€‚</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String userName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String fullName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String password<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>//ç”Ÿæˆjsonæ—¶å°†userRoleså±æ€§è¿‡æ»¤
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@JsonIgnore</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> List<span style=color:#f92672>&lt;</span>UserRole<span style=color:#f92672>&gt;</span> userRoles <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;&gt;();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h4 id=102-æ ¼å¼åŒ–-json-æ•°æ®>10.2. æ ¼å¼åŒ– json æ•°æ®</h4><p><code>@JsonFormat</code>ä¸€èˆ¬ç”¨æ¥æ ¼å¼åŒ– json æ•°æ®ã€‚ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@JsonFormat</span><span style=color:#f92672>(</span>shape<span style=color:#f92672>=</span>JsonFormat<span style=color:#f92672>.</span><span style=color:#a6e22e>Shape</span><span style=color:#f92672>.</span><span style=color:#a6e22e>STRING</span><span style=color:#f92672>,</span> pattern<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&#34;</span><span style=color:#f92672>,</span> timezone<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;GMT&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> Date date<span style=color:#f92672>;</span>
</span></span></code></pre></div><h4 id=103-æ‰å¹³åŒ–å¯¹è±¡>10.3. æ‰å¹³åŒ–å¯¹è±¡</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Getter</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Setter</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ToString</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Account</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@JsonUnwrapped</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Location location<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@JsonUnwrapped</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> PersonInfo personInfo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Getter</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Setter</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@ToString</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Location</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>     <span style=color:#66d9ef>private</span> String provinceName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>     <span style=color:#66d9ef>private</span> String countyName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Getter</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@Setter</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>@ToString</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PersonInfo</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String userName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String fullName<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>æœªæ‰å¹³åŒ–ä¹‹å‰ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;location&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;provinceName&#34;</span>:<span style=color:#e6db74>&#34;æ¹–åŒ—&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;countyName&#34;</span>:<span style=color:#e6db74>&#34;æ­¦æ±‰&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;personInfo&#34;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;userName&#34;</span>: <span style=color:#e6db74>&#34;coder1234&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>&#34;fullName&#34;</span>: <span style=color:#e6db74>&#34;shaungkou&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ä½¿ç”¨<code>@JsonUnwrapped</code> æ‰å¹³å¯¹è±¡ä¹‹åï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Getter</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Setter</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ToString</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Account</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@JsonUnwrapped</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Location location<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@JsonUnwrapped</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> PersonInfo personInfo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;provinceName&#34;</span>:<span style=color:#e6db74>&#34;æ¹–åŒ—&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;countyName&#34;</span>:<span style=color:#e6db74>&#34;æ­¦æ±‰&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;userName&#34;</span>: <span style=color:#e6db74>&#34;coder1234&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;fullName&#34;</span>: <span style=color:#e6db74>&#34;shaungkou&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=11-æµ‹è¯•ç›¸å…³>11. æµ‹è¯•ç›¸å…³</h3><p><strong><code>@ActiveProfiles</code>ä¸€èˆ¬ä½œç”¨äºæµ‹è¯•ç±»ä¸Šï¼Œ ç”¨äºå£°æ˜ç”Ÿæ•ˆçš„ Spring é…ç½®æ–‡ä»¶ã€‚</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@SpringBootTest</span><span style=color:#f92672>(</span>webEnvironment <span style=color:#f92672>=</span> RANDOM_PORT<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ActiveProfiles</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;test&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Slf4j</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TestBase</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong><code>@Test</code>å£°æ˜ä¸€ä¸ªæ–¹æ³•ä¸ºæµ‹è¯•æ–¹æ³•</strong></p><p><strong><code>@Transactional</code>è¢«å£°æ˜çš„æµ‹è¯•æ–¹æ³•çš„æ•°æ®ä¼šå›æ»šï¼Œé¿å…æ±¡æŸ“æµ‹è¯•æ•°æ®ã€‚</strong></p><p><strong><code>@WithMockUser</code> Spring Security æä¾›çš„ï¼Œç”¨æ¥æ¨¡æ‹Ÿä¸€ä¸ªçœŸå®ç”¨æˆ·ï¼Œå¹¶ä¸”å¯ä»¥èµ‹äºˆæƒé™ã€‚</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Transactional</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@WithMockUser</span><span style=color:#f92672>(</span>username <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;user-id-18163138155&#34;</span><span style=color:#f92672>,</span> authorities <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;ROLE_TEACHER&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>should_import_student_success</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>......</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=èµ„æºé“¾æ¥>èµ„æºé“¾æ¥</h3><ul><li><a href=https://github.com/Snailclimb/JavaGuide target=_blank rel="external nofollow noopener noreferrer">https://github.com/Snailclimb/JavaGuide<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>ã€‚</li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2023-09-28 22:56:31">æ›´æ–°äº 2023-09-28&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=liudongdong1.github.io/springannotation/index.md title=é˜…è¯»åŸå§‹æ–‡æ¡£ class=link-to-markdown>é˜…è¯»åŸå§‹æ–‡æ¡£</a></span><span><a href=https://liudongdong1.github.io/edit/master/content/posts%5c%e6%a1%86%e6%9e%b6%e8%ae%be%e8%ae%a1%5cspringboot%5cspringAnnotation.md title=ç¼–è¾‘æ­¤é¡µ target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>ç¼–è¾‘æ­¤é¡µ</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="åˆ†äº«åˆ° Twitter" data-sharer=twitter data-url=liudongdong1.github.io/springannotation/ data-title=SpringAnnotation data-hashtags=Java,SpringBoot,Framework><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="åˆ†äº«åˆ° Facebook" data-sharer=facebook data-url=liudongdong1.github.io/springannotation/ data-hashtag=Java><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="åˆ†äº«åˆ° å¾®åš" data-sharer=weibo data-url=liudongdong1.github.io/springannotation/ data-title=SpringAnnotation data-image=https://cdn.pixabay.com/photo/2021/05/27/14/40/anemone-6288318__340.jpg><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=liudongdong1.github.io/tags/java/>Java</a>,&nbsp;<a href=liudongdong1.github.io/tags/springboot/>SpringBoot</a>,&nbsp;<a href=liudongdong1.github.io/tags/framework/>Framework</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>è¿”å›</a></span>&nbsp;|&nbsp;<span><a href=liudongdong1.github.io/>ä¸»é¡µ</a></span></section></div><div class=post-nav><a href=liudongdong1.github.io/07latex%E7%9A%84%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5/ class=prev rel=prev title="LaTex çš„å›¾ç‰‡æ’å…¥"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>LaTex çš„å›¾ç‰‡æ’å…¥</a>
<a href=liudongdong1.github.io/openfeign/ class=next rel=next title=OpenFeign>OpenFeign<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">ç”± <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.118.2">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.17-RC"><img class=fixit-icon src=/liudongdong1.github.io/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2020 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=https://liudongdong1.github.io/ target=_blank rel="external nofollow noopener noreferrer">LiuDongdong</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"><span class=site-time title='ç½‘ç«™è¿è¡Œä¸­ ...'><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i>&nbsp;<span class=run-times>ç½‘ç«™è¿è¡Œä¸­ ...</span></span></div><div class="footer-line ibruce"><span id=busuanzi_container_site_uv title=æ€»è®¿å®¢æ•°><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=æ€»è®¿é—®é‡><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=å›åˆ°é¡¶éƒ¨><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://liudongdong1.github.io/ title="åœ¨ GitHub ä¸ŠæŸ¥çœ‹æºä»£ç " target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:#0076ff;--bg-progress-dark:#fff></div><noscript><div class=noscript-warning>FixIt ä¸»é¢˜åœ¨å¯ç”¨ JavaScript çš„æƒ…å†µä¸‹æ•ˆæœæœ€ä½³ã€‚</div></noscript></div><link rel=stylesheet href=/liudongdong1.github.io/lib/katex/katex.min.css><link rel=stylesheet href=/liudongdong1.github.io/lib/cookieconsent/cookieconsent.min.css><script src=/liudongdong1.github.io/lib/autocomplete/autocomplete.min.js defer></script><script src=/liudongdong1.github.io/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script src=/liudongdong1.github.io/lib/lazysizes/lazysizes.min.js async defer></script><script src=/liudongdong1.github.io/lib/sharer/sharer.min.js async defer></script><script src=/liudongdong1.github.io/lib/typeit/index.umd.js defer></script><script src=/liudongdong1.github.io/lib/katex/katex.min.js defer></script><script src=/liudongdong1.github.io/lib/katex/auto-render.min.js defer></script><script src=/liudongdong1.github.io/lib/katex/copy-tex.min.js defer></script><script src=/liudongdong1.github.io/lib/katex/mhchem.min.js defer></script><script src=/liudongdong1.github.io/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/liudongdong1.github.io/lib/pangu/pangu.min.js defer></script><script src=/liudongdong1.github.io/lib/cell-watermark/watermark.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script>window.config={code:{copyTitle:"å¤åˆ¶åˆ°å‰ªè´´æ¿",editLockTitle:"é”å®šå¯ç¼–è¾‘ä»£ç å—",editUnLockTitle:"è§£é”å¯ç¼–è¾‘ä»£ç å—",editable:!0,maxShownLines:10},comment:{enable:!1},cookieconsent:{content:{dismiss:"åŒæ„",link:"äº†è§£æ›´å¤š",message:"æœ¬ç½‘ç«™ä½¿ç”¨ Cookies æ¥æ”¹å–„æ‚¨çš„æµè§ˆä½“éªŒã€‚"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"typeit-header-subtitle-desktop":`<span style='font-family: MMT,"æ²ç›®ä½“";'>å¾æ—¥ä¸‰çœå¾èº«</span>`,"typeit-header-subtitle-mobile":`<span style='font-family: MMT,"æ²ç›®ä½“";'>å¾æ—¥ä¸‰çœå¾èº«</span>`},enablePWA:!0,enablePangu:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"2R1K9SKLQZ",algoliaIndex:"index.zh-cn",algoliaSearchKey:"4a226aa1c5c98d6859e4d1386adb2bc7",highlightTag:"em",maxResultLength:10,noResultsFound:"æ²¡æœ‰æ‰¾åˆ°ç»“æœ",snippetLength:50,type:"algolia"},siteTime:"2020-12-18T16:15:22+08:00",typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},duration:-1,speed:100},watermark:{appendto:".wrapper>main",colspacing:30,content:'<img class="fixit-icon" src="/fixit.min.svg" alt="FixIt logo" /> FixIt ä¸»é¢˜',enable:!0,fontfamily:"inherit",fontsize:.85,height:21,opacity:.0125,rotate:15,rowspacing:60,width:150}}</script><script src=/liudongdong1.github.io/js/theme.min.js defer></script><script src=/liudongdong1.github.io/js/custom.min.js defer></script></body></html>