<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="面经_Linux, AIOT,Space&amp;Temporal Sequence Analysis,SpringBoot,liudongdong1,cloud">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>面经_Linux | DaybyDay</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="DaybyDay" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">DaybyDay</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">

      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/about">
          
          <i class="fas fa-user-circle" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>about</span>
        </a>
      </li>
      
      <li>
        <a href="/resume">
          
          <i class="fa fa-user-secret" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>resume</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/gallery" class="waves-effect waves-light">
      
      <i class="fas fa-camera" style="zoom: 0.6;"></i>
      
      <span>Galleries</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">DaybyDay</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-user-circle"></i>
			
			About
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/about " style="margin-left:75px">
				  
				   <i class="fa fas fa-user-circle" style="position: absolute;left:50px" ></i>
			      
		          <span>about</span>
                  </a>
                </li>
              
                <li>

                  <a href="/resume " style="margin-left:75px">
				  
				   <i class="fa fa fa-user-secret" style="position: absolute;left:50px" ></i>
			      
		          <span>resume</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/gallery" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-camera"></i>
			
			Galleries
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/liudongdong1" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/liudongdong1" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.pixabay.com/photo/2022/03/24/13/39/nature-7089143__340.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">面经_Linux</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    .toc-fixed .toc-link::before{
        position: fixed!important;/*当toc的位置改为fixed时，.toc-link::before也要改为fixed*/
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Linux/">
                                <span class="chip bg-color">Linux</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/OS/" class="post-category">
                                OS
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2022-03-22
                </div>
                

                <!-- 
                    <i class="fa fa-pencil"></i> Author: liudongdong1
                  -->

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2022-04-02
                </div>
                

                <!-- 
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    7.8k
                </div>
                 -->

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    28 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <blockquote>
<p>Linux，全称 GNU/Linux，是一种免费使用和自由传播的<a href="https://baike.baidu.com/item/类UNIX/9032872" target="_blank" rel="noopener">类 UNIX</a> 操作系统，其内核由<a href="https://baike.baidu.com/item/林纳斯·本纳第克特·托瓦兹/1034429" target="_blank" rel="noopener">林纳斯・本纳第克特・托瓦兹</a>于 1991 年 10 月 5 日首次发布，它主要受到 <a href="https://baike.baidu.com/item/Minix/7106045" target="_blank" rel="noopener">Minix</a> 和 Unix 思想的启发，是一个基于 <a href="https://baike.baidu.com/item/POSIX" target="_blank" rel="noopener">POSIX</a> 的多用户、<a href="https://baike.baidu.com/item/多任务/1011764" target="_blank" rel="noopener">多任务</a>、支持<a href="https://baike.baidu.com/item/多线程/1190404" target="_blank" rel="noopener">多线程</a>和多 <a href="https://baike.baidu.com/item/CPU" target="_blank" rel="noopener">CPU</a> 的操作系统。它能运行主要的 <a href="https://baike.baidu.com/item/Unix/219943" target="_blank" rel="noopener">Unix</a> 工具软件、应用程序和网络协议。它支持 <a href="https://baike.baidu.com/item/32位/5812218" target="_blank" rel="noopener">32 位</a>和 <a href="https://baike.baidu.com/item/64位" target="_blank" rel="noopener">64 位</a>硬件。Linux 继承了 Unix 以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。Linux 有上百种不同的发行版，如基于社区开发的 <a href="https://baike.baidu.com/item/debian/748667" target="_blank" rel="noopener">debian</a>、<a href="https://baike.baidu.com/item/archlinux/10857530" target="_blank" rel="noopener">archlinux</a>，和基于商业开发的 [Red Hat Enterprise Linux](<a href="https://baike.baidu.com/item/Red" target="_blank" rel="noopener">https://baike.baidu.com/item/Red</a> Hat Enterprise Linux/10770503)、<a href="https://baike.baidu.com/item/SUSE/60409" target="_blank" rel="noopener">SUSE</a>、[Oracle Linux](<a href="https://baike.baidu.com/item/Oracle" target="_blank" rel="noopener">https://baike.baidu.com/item/Oracle</a> Linux/6876458) 等。<a href="https://baike.baidu.com/item/Linux/27050#:~:text=Linux%EF%BC%8C%E5%85%A8%E7%A7%B0GNU%2FLinux%EF%BC%8C,%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E5%92%8C%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E3%80%82" target="_blank" rel="noopener">url</a></p>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/Unix-164801666585812.jpg" alt=""></p>
<h5 id="1-linux操作系统启动过程"><a href="#1-linux操作系统启动过程" class="headerlink" title=".1. linux操作系统启动过程"></a>.1. linux操作系统启动过程</h5><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220228130812455-16480166231442.png" alt=""></p>
<ul>
<li><p><code>内核引导</code>当计算机打开电源后，首先是<code>BIOS开机自检</code>，按照BIOS中设置的启动设备（通常是硬盘）来启动。<code>操作系统接管硬件</code>以后，首先<code>读入 /boot 目录下的内核文件</code>。</p>
</li>
<li><p><code>运行init</code>：init 进程是系统所有进程的起点，init 程序首先是需要读取配置文件 <code>/etc/inittab</code>。</p>
</li>
<li><p><code>运行级别</code>：ctrl+alt+F1–F6  切换到相应的终端</p>
<p>运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动</p>
<p>运行级别1：<code>单用户工作状态</code>，<code>root权限</code>，用于系统维护，禁止远程登陆`</p>
<p>运行级别2：<code>多用户状态(没有NFS)</code></p>
<p>运行级别3：<code>完全的多用户状态(有NFS)</code>，登陆后进入<code>控制台命令行模式</code></p>
<p>运行级别4：系统未使用，保留</p>
<p>运行级别5：<code>X11控制台</code>，登陆后进入<code>图形GUI模式</code></p>
<p>运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动</p>
</li>
</ul>
<h5 id="2-软连接和硬链接"><a href="#2-软连接和硬链接" class="headerlink" title=".2. 软连接和硬链接"></a>.2. 软连接和硬链接</h5><ul>
<li>硬链接：A 是 B 的硬链接（A 和 B 都是文件名），则 A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号相同，即<code>一个 inode 节点对应两个不同的文件名</code>，两个文件名指向同一个文件，A 和 B 对文件系统来说是完全平等的。如果<code>删除了其中一个，对另外一个没有影响</code>。<code>每增加一个文件名，inode 节点上的链接数增加一</code>，每删除一个对应的文件名，inode 节点上的链接数减一，直到为 0，inode 节点和对应的数据块被回收</li>
<li>软连接：没有任何文件系统的限制，任何用户可以创建指向目录的符号链接; 看作是<code>Windows 中的快捷方式</code>，可以让你快速链接到目标档案或目录。</li>
</ul>
<blockquote>
<ul>
<li>硬链接不可以<code>跨分区</code>，软件链可以跨分区。</li>
<li>不能对目录创建硬链接；不能对不同的文件系统创建硬链接；不能对不存在的文件创建硬链接</li>
<li>可以对目录创建软连接；可以跨文件系统；可以对不存在的文件创建软连接</li>
</ul>
</blockquote>
<blockquote>
<p><code>RAID 全称为独立磁盘冗余阵列</code> (Redundant Array of Independent Disks)，基本思想就是把多个相对便宜的硬盘组合起来，成为一个硬盘阵列组，使性能达到甚至超过一个价格昂贵、 容量巨大的硬盘。</p>
</blockquote>
<h5 id="3-Linux-一切皆文件"><a href="#3-Linux-一切皆文件" class="headerlink" title=".3. Linux 一切皆文件"></a>.3. Linux 一切皆文件</h5><blockquote>
<p><strong>Linux 中所有内容都是以文件的形式保存和管理，包括一切软硬件。</strong> 这样做最明显的好处是，开发者仅需要一套 API 和开发工具即可调取 Linux 系统中绝大部分的资源。同时也带来不利之处，如使用任何硬件设备都必须与根目录下某一目录执行挂载操作，否则无法使用。</p>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220228133441585-16480166231444.png" alt=""></p>
<h5 id="4-Linux-负载过高"><a href="#4-Linux-负载过高" class="headerlink" title=".4. Linux 负载过高"></a>.4. Linux 负载过高</h5><blockquote>
<p><strong>系统平均负载</strong>被定义为在特定时间间隔内运行队列中（在 CPU 上运行或者等待运行多少进程）的平均进程数。如果一个进程满足以下条件则其就会位于运行队列中：</p>
<ul>
<li>它没有在等待 I/O 操作的结果</li>
<li>它没有主动进入等待状态（没有调用 <code>wait</code>）</li>
<li>没有被停止 (如等待终止)</li>
</ul>
<p>在 Linux 中，进程分为三种状态，一种是<code>阻塞的进程</code>（blocked process），一种是<code>可运行的进程</code>（runnable process），另外就是<code>正在运行的进程</code>（running process）</p>
</blockquote>
<ul>
<li>通过命令 <code>ps ux</code> 排查哪些进程 cpu 占用率高；</li>
<li>查看对应 java 进程的<code>每个线程的 CPU 占用率</code>。通过命令 <code>ps -Lp 15047 cu</code>；</li>
<li><code>追踪线程内部</code>，查看 load 过高原因。通过命令 <code>jstack 15047</code>,查找到对应的 threadid，再反查代码。</li>
</ul>
<h5 id="5-inode-节点表"><a href="#5-inode-节点表" class="headerlink" title=".5. inode 节点表"></a>.5. inode 节点表</h5><p>Linux 通过 inode 节点表将文件的<code>逻辑结构和物理结构</code>进行转换。</p>
<ul>
<li>inode 节点是一个 64 字节长的表，表中包含了文件的相关信息，其中有<code>文件的大小、文件所有者、文件的存取许可方式以及文件的类型等重要信息</code>。在 inode 节点表中最重要的内容是<code>磁盘地址表</code>。在磁盘地址表中有 13 个块号，文件将以块号在磁盘地址表中出现的顺序依次读取相应的块。</li>
<li>Linux 文件系统通过把<code>inode 节点和文件名进行连接</code>，当需要读取该文件时，文件系统在当<code>前目录表中查找该文件名对应的项</code>，由此得到<code>该文件相对应的 inode 节点号</code>，通过该 inode 节点的磁盘地址表把分散存放的文件物理块连接成文件的逻辑结构。</li>
</ul>
<h5 id="6-网站访问过慢"><a href="#6-网站访问过慢" class="headerlink" title=".6. 网站访问过慢"></a>.6. 网站访问过慢</h5><ul>
<li>服务器出口带宽不够用<ul>
<li><code>本身服务器购买的出口带宽比较小</code>。一旦并发量大的话，就会造成分给每个用户的出口带宽就小，访问速度自然就会慢。</li>
<li><code>跨运营商网络导致带宽缩减</code>。例如，公司网站放在电信的网络上，那么客户这边对接是长城宽带或联通，这也可能导致带宽的缩减。</li>
</ul>
</li>
<li>服务器负载过大，导致响应不过来<ul>
<li>分析系统负载，使用 w 命令或者 uptime 命令查看系统负载。如果<code>负载很高，则使用 top 命令查看 CPU</code> ，<code>MEM 等占用情况</code>，要么是 <code>CPU 繁忙，要么是内存不够</code></li>
<li>如果这二者都正常，再去使用 sar 命令分析<code>网卡流量，分析是不是遭到了攻击</code>。一旦分析出问题的原因，采取对应的措施解决，如决定要不要杀死一些进程，或者禁止一些访问等。</li>
</ul>
</li>
<li>数据库瓶颈<ul>
<li>如果<code>慢查询比较多</code>。那么就要开发人员或 DBA 协助进行 SQL 语句的优化。</li>
<li>如果<code>数据库响应慢，考虑可以加一个数据库缓存</code>，如 Redis 等。然后，也可以搭建 MySQL 主从，一台 MySQL 服务器负责写，其他几台从数据库负责读。</li>
</ul>
</li>
<li>网站开发代码没有优化好<ul>
<li>SQL 语句没有优化，导致数据库读写相当耗时。</li>
</ul>
</li>
</ul>
<h5 id="7-网站访问慢，排查思路"><a href="#7-网站访问慢，排查思路" class="headerlink" title=".7. 网站访问慢，排查思路"></a>.7. 网站访问慢，排查思路</h5><p>1、首先要确定是<code>用户端还是服务端</code>的问题。当接到用户反馈访问慢，那边自己立即访问网站看看，如果自己这边访问快，基本断定是用户端问题，就需要耐心跟客户解释，协助客户解决问题。</p>
<blockquote>
<p>不要上来就看服务端的问题。一定要从源头开始，逐步逐步往下。</p>
</blockquote>
<p>2、如果访问也慢，那么可以利用浏览器的调试功能，看看<code>加载那一项数据消耗时间过多，是图片加载慢，还是某些数据加载慢。</code></p>
<p>3、针对<code>服务器负载</code>情况。查看<code>服务器硬件 (网络、CPU、内存) 的消耗情况</code>。如果是购买的云主机，比如阿里云，可以登录阿里云平台提供各方面的监控，比如 CPU、内存、带宽的使用情况。</p>
<p>4、如果发现<code>硬件资源消耗都不</code>高，那么就需要通过查<code>日志，比如看看 MySQL 慢查询的日志</code>，看看是不是某条 SQL 语句查询慢，导致网站访问慢。</p>
<h5 id="8-Linux-内核分类"><a href="#8-Linux-内核分类" class="headerlink" title=".8. Linux 内核分类"></a>.8. Linux 内核分类</h5><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20201117203235695-16480166231446.png" alt=""></p>
<blockquote>
<pre class=" language-shell"><code class="language-shell">tail +99 file1 | head -1  # tail 和head的用法， watch 命令监视，或者tail -f</code></pre>
</blockquote>
<h5 id="9-top-命令"><a href="#9-top-命令" class="headerlink" title=".9. top 命令"></a>.9. top 命令</h5><p>PID：进程的 ID<br>　　USER：进程所有者<br>　　PR：进程的优先级别，越小越优先被执行<br>　　NInice：值<br>　　VIRT：进程占用的虚拟内存<br>　　RES：进程占用的物理内存<br>　　SHR：进程使用的共享内存<br>　　S：进程的状态。S 表示休眠，R 表示正在运行，Z 表示僵死状态，N 表示该进程优先值为负数<br>　　<code>% CPU：进程占用 CPU 的使用率</code><br>　　<code>% MEM：进程使用的物理内存和总内存的百分比</code><br>　　TIME+：该进程启动后占用的总的 CPU 时间，即占用 CPU 使用时间的累加值。<br>　　COMMAND：进程启动命令名称</p>
<h5 id="10-通信手段"><a href="#10-通信手段" class="headerlink" title=".10. 通信手段"></a>.10. 通信手段</h5><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220303150029243-16480166231448.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220303150040804-164801662314410.png" alt=""></p>
<h5 id="11-编译链接"><a href="#11-编译链接" class="headerlink" title=".11. 编译链接"></a>.11. 编译链接</h5><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220304125924326.png" alt=""></p>
<h5 id="12-编译过程"><a href="#12-编译过程" class="headerlink" title=".12. 编译过程"></a>.12. 编译过程</h5><ul>
<li>预编译（预编译器处理如 <code>#include</code>、<code>#define</code> 等预编译指令，生成 <code>.i</code> 或 <code>.ii</code> 文件）</li>
<li>编译（编译器进行<code>词法分析、语法分析、语义分析、中间代码生成、目标代码生成、优化</code>，生成 <code>.s</code> 文件）</li>
<li>汇编（汇编器把<code>汇编码翻译成机器码</code>，生成 <code>.o</code> 文件）</li>
<li>链接（<code>连接器进行地址和空间分配、符号决议、重定位</code>，生成 <code>.out</code> 文件）</li>
</ul>
<h5 id="13-Linux-共享库"><a href="#13-Linux-共享库" class="headerlink" title=".13. Linux 共享库"></a>.13. Linux 共享库</h5><ul>
<li>路径:<ul>
<li><code>/lib</code>：存放<code>系统最关键和最基础的共享库</code>，如动态链接器、C 语言运行库、数学库等</li>
<li><code>/usr/lib</code>：存放非系统运行时所需要的关键性的库，主要是<code>开发库</code></li>
<li><code>/usr/local/lib</code>：存放跟操作系统本身并不十分相关的库，主要是一些<code>第三方应用程序的库</code></li>
<li>动态链接器会在 <code>/lib</code>、<code>/usr/lib</code> 和由 <code>/etc/ld.so.conf</code> 配置文件指定的，目录中查找共享库</li>
</ul>
</li>
<li>环境变量<ul>
<li><code>LD_LIBRARY_PATH</code>：临时改变某个应用程序的共享库查找路径，而不会影响其他应用程序</li>
<li><code>LD_PRELOAD</code>：指定预先装载的一些共享库甚至是目标文件</li>
<li><code>LD_DEBUG</code>：打开动态链接器的调试功能</li>
</ul>
</li>
</ul>
<h5 id="14-find-package-原理"><a href="#14-find-package-原理" class="headerlink" title=".14. find_package 原理"></a>.14. find_package 原理</h5><blockquote>
<p>find_package 采用两种模式搜索库：</p>
<ul>
<li><strong>Module 模式</strong>：搜索 <strong>CMAKE_MODULE_PATH</strong> 指定路径下的 <strong>FindXXX.cmake</strong> 文件，执行该文件从而找到 XXX 库。其中，具体查找库并给 <strong>XXX_INCLUDE_DIRS</strong> 和 <strong>XXX_LIBRARIES</strong> 两个变量赋值的操作由 FindXXX.cmake 模块完成。</li>
<li><strong>Config 模式</strong>：搜索 <strong>XXX_DIR</strong> 指定路径下的 <strong>XXXConfig.cmake</strong> 文件，执行该文件从而找到 XXX 库。其中具体查找库并给 <strong>XXX_INCLUDE_DIRS</strong> 和 <strong>XXX_LIBRARIES</strong> 两个变量赋值的操作由 XXXConfig.cmake 模块完成。</li>
</ul>
</blockquote>
<pre class=" language-makefile"><code class="language-makefile">set<span class="token punctuation">(</span>Caffe_DIR /home/wjg/projects/caffe/build<span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">#添加CaffeConfig.cmake的搜索路径</span>
find_package<span class="token punctuation">(</span>Caffe REQUIRED<span class="token punctuation">)</span>     <span class="token comment" spellcheck="true"># 这个命令</span>
if <span class="token punctuation">(</span>NOT Caffe_FOUND<span class="token punctuation">)</span>
    message<span class="token punctuation">(</span>FATAL_ERROR <span class="token string">"Caffe Not Found!"</span><span class="token punctuation">)</span>
<span class="token keyword">endif</span> <span class="token punctuation">(</span>NOT Caffe_FOUND<span class="token punctuation">)</span>
include_directories<span class="token punctuation">(</span><span class="token variable">$</span><span class="token punctuation">{</span>Caffe_INCLUDE_DIRS<span class="token punctuation">}</span><span class="token punctuation">)</span>
add_executable<span class="token punctuation">(</span>useSSD ssd_detect.cpp<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true"># 添加可执行文件</span>
target_link_libraries<span class="token punctuation">(</span>useSSD <span class="token variable">$</span><span class="token punctuation">{</span>Caffe_LIBRARIES<span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># 连接所需要的库文件</span>

<span class="token comment" spellcheck="true"># 创建共享库（把工程内的cpp文件都创建成共享库文件，方便通过头文件来调用）</span>
add_library<span class="token punctuation">(</span><span class="token variable">$</span><span class="token punctuation">{</span>PROJECT_NAME<span class="token punctuation">}</span> SHARED
src/cpp文件名
……
）
<span class="token comment" spellcheck="true"># 头文件</span>
include_directories<span class="token punctuation">(</span><span class="token string">"路径"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># 把刚刚生成的${PROJECT_NAME}库和所需的其它库链接起来</span>
target_link_libraries<span class="token punctuation">(</span><span class="token variable">$</span><span class="token punctuation">{</span>PROJECT_NAME<span class="token punctuation">}</span>
/usr/lib/i386-linux-gnu/libboost_system.so</code></pre>
<h5 id="15-Linux-管道命令"><a href="#15-Linux-管道命令" class="headerlink" title="15. Linux 管道命令"></a>15. Linux 管道命令</h5><blockquote>
<p>管道是一种通信机制，通常用于进程间的通信（也可通过 socket 进行网络通信），它表现出来的形式将前面每一个进程的输出（stdout）直接作为下一个进程的输入（stdin）</p>
</blockquote>
<h5 id="16-Linux-常用命令"><a href="#16-Linux-常用命令" class="headerlink" title="16. Linux 常用命令"></a>16. Linux 常用命令</h5><ul>
<li>which, find, whereis, cat</li>
<li>sed, awk, head, tail 查看大文件</li>
<li>free 查看内存</li>
</ul>
<h6 id="1-top"><a href="#1-top" class="headerlink" title=".1. top"></a>.1. top</h6><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220317193155375.png" alt=""></p>
<ol>
<li><p>第一行，<code>任务队列信息</code>，同 uptime 命令的执行结果，具体参数说明情况如下：</p>
<p>00:12:54 — 当前系统时间</p>
<p>up ？days, 4:49 — 系统<code>已经运行了？天 4 小时 49 分钟</code>（在这期间系统没有重启过）</p>
<p>21users — <code>当前有 1 个用户登录系统</code></p>
<p>load average: 0.06, 0.02, 0.00 — load average 后面的三个数分别是<code>1 分钟、5 分钟、15 分钟</code>的负载情况。load average 数据是每隔 5 秒钟检查一次活跃的进程数，然后按特定算法计算出的数值。如果这个数除以逻辑 CPU 的数量，结果高于 5 的时候就表明系统在超负荷运转了。</p>
</li>
<li><p>第二行，<code>Tasks — 任务（进程）</code>，具体信息说明如下：</p>
<p>系统现在共有 <code>256 个进程</code>，其中处于运行中的有 1 个，177 个在休眠（sleep），stoped 状态的有 0 个，zombie 状态（僵尸）的有 0 个。</p>
</li>
<li><p>第三行，<code>cpu 状态信息</code>，具体属性说明如下：</p>
<p>0.2% us — <code>用户空间</code>占用 CPU 的百分比。</p>
<p>0.2% sy — <code>内核空间</code>占用 CPU 的百分比。</p>
<p>0.0% ni — 改变过优先级的进程占用 CPU 的百分比</p>
<p>99.5% id — 空闲 CPU 百分比</p>
<p>0.0% wa —<code>IO 等待</code>占用 CPU 的百分比</p>
<p>0.0% hi —<code>硬中断（Hardware IRQ）</code>占用 CPU 的百分比</p>
<p>0.0% si —<code>软中断（Software Interrupts）</code>占用 CPU 的百分比</p>
</li>
<li><p>第四行，<code>内存状态</code>，具体信息如下：</p>
<p>2017552 total — 物理内存总量</p>
<p>720188 used — 使用中的内存总量</p>
<p>197916 free — 空闲内存总量</p>
<p>1099448 cached — <code>缓存的总量</code></p>
</li>
<li><p>第五行，<code>swap 交换分区信息</code>，具体信息说明如下：</p>
<p>998396 total — 交换区总量</p>
<p>989936 free — 空闲交换区总量</p>
<p>8460 used — 使用的交换区总量</p>
<p>1044136 cached — 缓冲的交换区总量</p>
</li>
</ol>
<h6 id="2-查看端口和进程"><a href="#2-查看端口和进程" class="headerlink" title=".2. 查看端口和进程"></a>.2. 查看端口和进程</h6><ul>
<li>先查看进程 <code>pid: ps -ef | grep 进程名</code></li>
<li>通过 pid 查看占用端口: <code>netstat -nap | grep 进程pid</code></li>
<li>直接通过端口查进程： <code>netstat -nap | grep 端口号</code></li>
</ul>
<h5 id="17-查看已经打开的文件"><a href="#17-查看已经打开的文件" class="headerlink" title="17. 查看已经打开的文件"></a>17. 查看已经打开的文件</h5><blockquote>
<p>lsof (list open files) 是一个<code>列出当前系统打开文件的工具</code>。在 linux 环境下，任何事物都以文件的形式存在，通过<code>文件不仅仅可以访问常规数据，还可以访问网络连接和硬件</code>。所以如传输控制协议 (TCP) 和用户数据报协议 (UDP) 套接字等，系统在后台都为该应用程序分配了一个文件描述符，无论这个文件的本质如何，该<code>文件描述符fd为应用程序与基础操作系统之间的交互提供了通用接口</code>。因为应用程序打开文件的描述符列表提供了大量关于这个应用程序本身的信息，因此通过 lsof 工具能够查看这个列表对系统监测以及排错将是很有帮助的。</p>
</blockquote>
<h5 id="18-文件系统"><a href="#18-文件系统" class="headerlink" title="18. 文件系统"></a>18. 文件系统</h5><ul>
<li>Windows：FCB 表 + FAT + 位图</li>
<li>Unix：<code>inode + 混合索引 + 成组链接</code></li>
</ul>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220305184924346.png" alt=""></p>
<h5 id="19-大端地址-amp-小端地址"><a href="#19-大端地址-amp-小端地址" class="headerlink" title="19. 大端地址&amp;小端地址"></a>19. 大端地址&amp;小端地址</h5><p>主机字节序又叫 CPU 字节序，其不是由操作系统决定的，而是由 <code>CPU 指令集架构</code>决定的。主机字节序分为两种：</p>
<ul>
<li><code>大端字节序</code>（Big Endian）：<code>高序字节存储在低位地址</code>，低序字节存储在高位地址</li>
<li><code>小端字节序（</code>Little Endian）：高序字节存储在<code>高位</code>地址，低序字节存储在低位地址</li>
</ul>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/v2-39ce3e66f9db750881e668e1159780e6_720w.jpg" alt=""></p>
<ul>
<li>x86（Intel、AMD）、MOS Technology 6502、Z80、VAX、PDP-11 等处理器为小端序；</li>
<li>Motorola 6800、Motorola 68000、PowerPC 970、System/370、SPARC（除 V9 外）等处理器为大端序；</li>
<li>ARM（默认小端序）、PowerPC（除 PowerPC 970 外）、DEC Alpha、SPARC V9、MIPS、PA-RISC 及 IA64 的字节序是可配置的。</li>
</ul>
<h5 id="20-通道"><a href="#20-通道" class="headerlink" title="20. 通道"></a>20. 通道</h5><ul>
<li><code>单向通道（单工通道）</code>：只有一个方向通信，没有反方向交互，如广播</li>
<li>双向交替通信（半双工通信）：通信双方都可发消息，但不能同时发送或接收</li>
<li><code>双向同时通信（全双工通信）</code>：通信双方可以同时发送和接收信息</li>
</ul>
<h5 id="20-通道复用计数"><a href="#20-通道复用计数" class="headerlink" title="20. 通道复用计数"></a>20. 通道复用计数</h5><ul>
<li><code>频分复用</code>（FDM，Frequency Division Multiplexing）：不同用户在不同频带，所用用户在同样时间占用不同带宽资源</li>
<li><code>时分复用（</code>TDM，Time Division Multiplexing）：不同用户在同一时间段的不同时间片，所有用户在不同时间占用同样的频带宽度</li>
<li><code>波分复用</code>（WDM，Wavelength Division Multiplexing）：光的频分复用</li>
<li><code>码分复用</code>（CDM，Code Division Multiplexing）：不同用户使用不同的码，可以在同样时间使用同样频带通信</li>
</ul>
<h5 id="21-操作系统malloc的实现原理"><a href="#21-操作系统malloc的实现原理" class="headerlink" title="21. 操作系统malloc的实现原理"></a>21. 操作系统malloc的实现原理</h5><blockquote>
<p>当开辟的空间小于 128K 时，调用 brk（）函数；当<code>开辟的空间大于 128K 时，调用 mmap（）</code>。malloc 采用的是<code>内存池的管理方式，以减少内存碎片</code>。先申请大块内存作为堆区，然后将堆区分为多个内存块。当用户申请内存时，直接从堆区分配一块合适的空闲快。采用<code>隐式链表将所有空闲块</code>，每一个空闲块记录了一个未分配的、连续的内存地址。</p>
</blockquote>
<h5 id="22-Zore-Copy-实现机制"><a href="#22-Zore-Copy-实现机制" class="headerlink" title="22. Zore Copy 实现机制"></a>22. Zore Copy 实现机制</h5><blockquote>
<p>“零拷贝”：在整个发送数据过程中，数据的复制是必不可少的，这里数据复制分两种类型，一种是 <code>CPU 参与的一个字节一个字节处理的数据复制</code>，一个是<code>CPU 不用参与，通过专有硬件 DMA 参与的，批量数据复制。</code></p>
</blockquote>
<h5 id="23-mmap-实现的零拷贝-I-O"><a href="#23-mmap-实现的零拷贝-I-O" class="headerlink" title="23. mmap 实现的零拷贝 I/O"></a>23. mmap 实现的零拷贝 I/O</h5><blockquote>
<p><strong>原理</strong>：<strong>mmap 是一种内存映射文件的方法</strong>，即将一个文件或者其它对象映射到进程的地址空间，实现文件磁盘地址和进程虚拟地址空间中一段虚拟地址的一一对映关系。实现这样的映射关系后，进程就可以采用指针的方式读写操作这一段内存，而系统会自动回写脏页面到对应的文件磁盘上，即完成了对文件的操作而不必再调用 read, write 等系统调用函数。相反，内核空间对这段区域的修改也直接反映用户空间，从而可以实现不同进程间的文件共享。</p>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220309213639693.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220309214141726.png" alt=""></p>
<ul>
<li>mmap 系统调用，导致<code>用户空间到内核空间的上下文切换</code> (第一次上下文切换)。通过 DMA 引擎将<code>磁盘文件</code>中的内容拷贝到<code>内核空间缓冲区</code>中 (第一次拷贝: hard drive ——&gt; kernel buffer)。</li>
<li>mmap 系统<code>调用返回</code>，导致<code>内核空间到用户空间的上下文切换</code> (第二次上下文切换)。接着<code>用户空间和内核空间共享这个缓冲区</code>，而不需要将数据从内核空间拷贝到用户空间。因为用户空间和内核空间<code>共享</code>了这个缓冲区数据，所以用户空间就可以像在操作自己缓冲区中数据一般操作这个由内核空间共享的缓冲区数据</li>
<li>发出 write 系统调用，<code>导致用户空间到内核空间的上下文切换</code> (第三次上下文切换)。将<code>数据从内核空间缓冲区拷贝到内核空间 socket 相关联的缓冲区</code> (第二次拷贝: kernel buffer ——&gt; socket buffer)。</li>
<li>write 系统调用返回，导致<code>内核空间到用户空间的上下文切换</code> (第四次上下文切换)。通过 <code>DMA 引擎将内核空间 socket 缓冲区中的数据传递到协议引擎</code> (第三次拷贝: socket buffer ——&gt; protocol engine</li>
<li>通过 mmap 实现的零拷贝 I/O 进行了 4 次用户空间与内核空间的上下文切换，以及 3 次数据拷贝。其中 3 次数据拷贝中包括了 2 次 DMA 拷贝和 1 次 CPU 拷贝</li>
</ul>
<h5 id="23-Linux-IO-流程"><a href="#23-Linux-IO-流程" class="headerlink" title="23. Linux IO 流程"></a>23. Linux IO 流程</h5><blockquote>
<p>应用程序代码运行在<code>用户模式</code>下，当应用程序需要实现<code>内核模式下的指令</code>时，先向<code>操作系统发送调用请``求</code>。操作系统收到请求后，执行系<code>统调用接口</code>，使处理器进入<code>内核模式</code>。当处理器处理完系统调用操作后，操作系统会让处理器返回用户模式，继续执行用户代码。</p>
<p><code>进程的虚拟地址空间</code>可分为两部分，<code>内核空间和用户空间</code>。内核空间中存放的是<code>内核代码和数据</code>，而进程的用户空间中存放的是<code>用户程序的代码和数据</code>。不管是内核空间还是用户空间，它们都处于<code>虚拟空间中，都是对物理地址的映射</code>。</p>
</blockquote>
<h5 id="23-Linux-虚拟文件系统"><a href="#23-Linux-虚拟文件系统" class="headerlink" title="23. Linux 虚拟文件系统"></a>23. Linux 虚拟文件系统</h5><blockquote>
<p>一个操作系统可以支持多种底层不同的文件系统（比如<code>NTFS, FAT, ext3, ext4</code>），为了给内核和用户进程提供统一的<code>文件系统视图</code>，Linux 在<code>用户进程和底层文件系统之间加入了一个抽象层</code>，即虚拟文件系统 (Virtual File System, VFS)，进程所有的文件操作都通过 VFS，<code>由 VFS 来适配各种底层不同的文件系统，完成实际的文件操作。</code></p>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220306213605105.png" alt=""></p>
<h5 id="24-虚拟文件系统主要模块"><a href="#24-虚拟文件系统主要模块" class="headerlink" title="24. 虚拟文件系统主要模块"></a>24. 虚拟文件系统主要模块</h5><ul>
<li><code>超级块（super_block）</code>，用于保存<code>一个文件系统的所有元数据</code>，相当于这个文件系统的信息库，为其他的模块提供信息。因此一个超级块可代表一个文件系统。文件系统的任意元数据修改都要修改超级块。超级块对象是常驻内存并被缓存的。</li>
<li><code>目录项模块</code>，管<code>理路径的目录项</code>。比如一个路径 /home/foo/hello.txt，那么目录项有 home, foo, hello.txt。目录项的块，存储的是<code>这个目录下的所有的文件的 inode 号和文件名等信息</code>。其内部是树形结构，操作系统检索一个文件，都是从根目录开始，按层次解析路径中的所有目录，直到定位到文件。</li>
<li><code>inode 模块</code>，管理一个<code>具体的文件</code>，是<code>文件的唯一标识</code>，<code>一个文件对应一个 inode</code>。通过 inode 可以方便的找到文件在磁盘扇区的位置。同时 <code>inode 模块可链接到 address_space 模块</code>，方便查找自身文件数据是否已经缓存。</li>
<li><code>打开文件列表模块</code>，包含所有内核已经打开的文件。已经打开的文件对象由<code>open 系统调用在内核中创建，也叫文件句柄</code>。打开文件列表模块中包含一个列表，每个列表表项是一个结构体 struct file，结构体中的信息用来表示打开的一个文件的各种状态参数。</li>
<li>file_operations 模块。这个模块中维护一个数据结构，是一系列函数指针的集合，其中包含所有可以使用的系统调用函数，例如 open、read、write、mmap 等。每个打开文件（打开文件列表模块的一个表项）都可以连接到 file_operations 模块，从而对任何已打开的文件，通过系统调用函数，实现各种操作。</li>
<li>address_space 模块，它表示一个文件在页缓存中已经缓存了的物理页。它是页缓存和外部设备中文件系统的桥梁。如果将文件系统可以理解成数据源，那么 address_space 可以说关联了内存系统和文件系统。</li>
</ul>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220306213734398.png" alt=""></p>
<h5 id="23-新建空文件"><a href="#23-新建空文件" class="headerlink" title="23. 新建空文件"></a>23. 新建空文件</h5><ul>
<li><p>新建一个空文件需要消耗掉一个<code>inode</code>，用来保存<code>用户、创建时间等元数据</code>。</p>
</li>
<li><p>新建一个空文件还需要消耗掉其所在<code>目录的 block 中一定的空间</code>，这些空间用来保存文件名，inode 号等信息。</p>
</li>
</ul>
<h5 id="24-一个字节消耗多少"><a href="#24-一个字节消耗多少" class="headerlink" title="24. 一个字节消耗多少"></a>24. 一个字节消耗多少</h5><blockquote>
<p>文件系统是按照<code>inode+block 来组织</code>的，所以不管你的文件多小，哪怕只有一个字节，在数据上都会消耗掉整整一个块 (当然还得算上 inode 等开销)。这个块大小可以通过<code>dumpe2fs</code>等命令来查看。如果想改变这个块大小怎么办？对不起，只能<code>重新格式化</code>。</p>
</blockquote>
<h5 id="24-文件很多时ls变慢"><a href="#24-文件很多时ls变慢" class="headerlink" title="24. 文件很多时ls变慢"></a>24. 文件很多时ls变慢</h5><blockquote>
<p>这就是当你的文件夹下面文件特别多，尤其是文件名也比较长的时候，它会消耗掉非常多的 block。当你遍历文件夹的时候，如果<code>Page Cache 中没有命中你要访问的 block</code>，就会穿透到磁盘上进行实际的 IO。在你的角度来看，就是你执行完<code>ls</code>后，卡住了。</p>
</blockquote>
<h5 id="24-rm-操作原理"><a href="#24-rm-操作原理" class="headerlink" title="24. rm 操作原理"></a>24. rm 操作原理</h5><blockquote>
<p>硬盘就是一个扇区组成的大数组，是无法被我们使用的，需要经过<code>分区、格式化和挂载</code>三个步骤。分区是把所有的扇区按照柱面分割成不同的大块，格式化就把原始的扇区数组变成了可被 Linux 文件系统使用的inode、block 等基本元素了。mkfs: 把我们的连续的磁盘空间进行划分和管理</p>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220306215537491.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220306215837425.png" alt=""></p>
<h5 id="23-什么是Linux-内核"><a href="#23-什么是Linux-内核" class="headerlink" title="23. 什么是Linux 内核"></a>23. 什么是Linux 内核</h5><ul>
<li>系统内存管理</li>
<li>应用程序管理</li>
<li>硬件设备管理</li>
<li>文件系统管理</li>
</ul>
<h5 id="24-交换空间"><a href="#24-交换空间" class="headerlink" title="24. 交换空间"></a>24. 交换空间</h5><ul>
<li>交换空间是 Linux 使用的一定空间，用于临时保存一些并发运行的程序。<code>当 RAM 没有足够的内存来容纳正在执行的所有程序时</code>，就会发生这种情况。</li>
</ul>
<h5 id="23-大文件为什么-cp-比mv-慢"><a href="#23-大文件为什么-cp-比mv-慢" class="headerlink" title="23. 大文件为什么 cp 比mv 慢"></a>23. 大文件为什么 cp 比mv 慢</h5><ul>
<li>cp 命令要把<code>所有的文件地址变量都找到，然后读取内容</code>，然后再<code>另外的文件夹地址下开辟一块内存去储存文件内容</code>。</li>
</ul>
<h5 id="26-给你一个包含-100-亿个-url-的文件，请你找出使用频率最高的-10-个-url，应该怎么做？"><a href="#26-给你一个包含-100-亿个-url-的文件，请你找出使用频率最高的-10-个-url，应该怎么做？" class="headerlink" title="26. 给你一个包含 100 亿个 url 的文件，请你找出使用频率最高的 10 个 url，应该怎么做？"></a>26. 给你一个包含 100 亿个 url 的文件，请你找出使用频率最高的 10 个 url，应该怎么做？</h5><ul>
<li>用<code>哈希分成多个文件</code>，再把这些小文件一次性加到内存用 map，取前 10。最后从每个文件的前 10; MapReduce 工作</li>
</ul>
<h5 id="27-网络中有上亿个-url，每个-url-都有一个-id-唯一标识，现在给你-100-台机器，你会怎么去设计他们的缓存系统？"><a href="#27-网络中有上亿个-url，每个-url-都有一个-id-唯一标识，现在给你-100-台机器，你会怎么去设计他们的缓存系统？" class="headerlink" title="27. 网络中有上亿个 url，每个 url 都有一个 id 唯一标识，现在给你 100 台机器，你会怎么去设计他们的缓存系统？"></a>27. <strong>网络中有上亿个 url，每个 url 都有一个 id 唯一标识，现在给你 100 台机器，你会怎么去设计他们的缓存系统？</strong></h5><ul>
<li>用哈希对流量分组，每台机器承接一定的流量，再搞点负载均衡的策略</li>
</ul>
<h5 id="28-本地机器只有-2-5G，但我想申请-4G-的内存空间，可以做到吗？"><a href="#28-本地机器只有-2-5G，但我想申请-4G-的内存空间，可以做到吗？" class="headerlink" title="28. 本地机器只有 2.5G，但我想申请 4G 的内存空间，可以做到吗？"></a>28. <strong>本地机器只有 2.5G，但我想申请 4G 的内存空间，可以做到吗？</strong></h5><ul>
<li>取决于你的系统总线数量，如果是 <code>32 位的，则最大的可寻址内存空间为 4G</code>，而如 <code>linux 系统还要保留 1G</code>，则不能申请，如果是 64 位的则可以申请</li>
</ul>
<h5 id="29-Kill-某个进程不能被杀死"><a href="#29-Kill-某个进程不能被杀死" class="headerlink" title="29. Kill 某个进程不能被杀死"></a>29. Kill 某个进程不能被杀死</h5><ul>
<li>SIGNKILL（9） 的效果是立即杀死进程。该信号不能被阻塞，处理和忽略。</li>
<li>SIGNTERM（15） 的效果是正常退出进程，退出前可以被阻塞或回调处理。并且它是 Linux 缺省的程序中断信号 (默认是 15)。</li>
<li><code>kill - 9 表示强制杀死该进程</code>；与 SIGTERM 相比，这个信号不能被捕获或忽略，同时接收这个信号的进程在收到这个信号时不能执行任何清理</li>
<li>处于<code>内核态的进程会屏蔽所有信号</code></li>
<li><code>僵死进程也不能被 kill</code></li>
</ul>
<h5 id="30-Debug-原理"><a href="#30-Debug-原理" class="headerlink" title="30. Debug 原理"></a>30. Debug 原理</h5><ul>
<li>JPDA (Java Platform Debugger Architecture),  Debuggge。<code>被调试者</code>。<code>传输纽带</code>  <code>调试者</code></li>
</ul>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/jdwp.jpg" alt=""></p>
<h5 id="31-malloc-出-100M，1G-的内存还剩多少"><a href="#31-malloc-出-100M，1G-的内存还剩多少" class="headerlink" title="31. malloc 出 100M，1G 的内存还剩多少"></a>31. malloc 出 100M，1G 的内存还剩多少</h5><ul>
<li>malloc 100M 内存成功时，其实并没有真实拿到。只有当 100M 内存中的任何一页，被写一次的时候，才成功。</li>
<li>malloc 100M 内存成功时，Linux 把 100M 内存全部以只读的形式，映射到一个全部清 0 的页面</li>
</ul>
<h5 id="32-简述一下虚拟内存和物理内存，为什么要用虚拟内存，好处是什么？"><a href="#32-简述一下虚拟内存和物理内存，为什么要用虚拟内存，好处是什么？" class="headerlink" title=".32. 简述一下虚拟内存和物理内存，为什么要用虚拟内存，好处是什么？"></a>.32. 简述一下虚拟内存和物理内存，为什么要用虚拟内存，好处是什么？</h5><ol>
<li><p><strong>物理内存</strong>：物理内存有四个层次，分别是寄存器、高速缓存、主存、磁盘。</p>
<p>寄存器：速度最快、量少、价格贵。</p>
<p>高速缓存：次之。</p>
<p>主存：再次之。</p>
<p>磁盘：速度最慢、量多、价格便宜。</p>
<p>操作系统会对物理内存进行管理，有一个部分称为<strong>内存管理器 (memory manager)</strong>，它的主要工作是有效的管理内存，记录哪些内存是正在使用的，在进程需要时分配内存以及在进程完成时回收内存。</p>
</li>
<li><p><strong>虚拟内存</strong>：操作系统<code>为每一个进程分配一个独立的地址空间</code>，虚拟内存。虚拟内存与物理内存存在映射关系，通过页表寻址完成虚拟地址和物理地址的转换。</p>
</li>
<li><p><strong>为什么要用虚拟内存</strong>：因为早期的内存分配方法存在以下问题：</p>
<p>（1）<code>进程地址空间不隔离</code>。会导致数据被随意修改。</p>
<p>（2）<code>内存使用效率低</code>。</p>
<p>（3）<code>程序运行的地址不确定</code>。操作系统随机为进程分配内存空间，所以程序运行的地址是不确定的。</p>
</li>
<li><p><strong>使用虚拟内存的好处</strong>：</p>
<p>（1）<code>扩大地址空间</code>。<code>每个进程独占一个 4G 空间，虽然真实物理内存没那么多</code>。</p>
<p>（2）<code>内存保护</code>：防止不同进程对物理内存的争夺和践踏，可以对特定内存地址提供写保护，防止恶意篡改。</p>
<p>（3）可以实现<code>内存共享</code>，方便进程通信。</p>
<p>（4）可以<code>避免内存碎片</code>，虽然物理内存可能不连续，但映射到虚拟内存上可以连续。</p>
</li>
<li><p><strong>使用虚拟内存的缺点</strong>：</p>
<p>（1）虚拟内存需要<code>额外构建数据结构，占用空间</code>。</p>
<p>（2）虚拟地址到物理地址的转换，<code>增加了执行时间</code>。</p>
<p>（3）<code>页面换入换出耗时</code>。</p>
<p>（4）<code>一页如果只有一部分数据，浪费内存</code>。</p>
</li>
</ol>
<h5 id="33-缺页中断"><a href="#33-缺页中断" class="headerlink" title=".33. 缺页中断"></a>.33. 缺页中断</h5><ol>
<li><strong>缺页异常</strong>：malloc 和 mmap 函数在分配内存时只是建立了进程虚拟地址空间，并没有分配虚拟内存对应的物理内存。当进程访问这些<code>没有建立映射关系的虚拟内存时</code>，处理器自动触发一个<strong>缺页异常，引发缺页中断</strong>。</li>
<li><strong>缺页中断</strong>：<code>缺页异常后将产生一个缺页中断</code>，此时操作系统会根据页表中的<strong>外存地址</strong>在外存中找到所缺的一页，将其调入<strong>内存</strong>。</li>
</ol>
<h5 id="34-孤儿进程，什么是僵尸进程，如何解决僵尸进程"><a href="#34-孤儿进程，什么是僵尸进程，如何解决僵尸进程" class="headerlink" title=".34. 孤儿进程，什么是僵尸进程，如何解决僵尸进程"></a>.34. 孤儿进程，什么是僵尸进程，如何解决僵尸进程</h5><ol>
<li><strong>孤儿进程</strong>：是指一个父进程退出后，而它的一个或多个子进程还在运行，那么这些子进程将成为孤儿进程。<code>孤儿进程将被 init 进程（进程号为 1）所收养</code>，并且由 init 进程对它们完整状态收集工作。</li>
<li><strong>僵尸进程</strong>：是指<code>一个进程使用 fork 函数创建子进程</code>，如果子进程退出，而<code>父进程并没有调用 wait () 或者 waitpid () 系统调用取得子进程的终止状态</code>，那么<code>子进程的进程描述符仍然保存在系统中</code>，占用系统资源，这种进程称为僵尸进程。<ol>
<li>fork 子进程之后我们都要及时使用 <strong>wait 系统调用</strong></li>
<li><strong>使用 kill 命令</strong>。</li>
</ol>
</li>
</ol>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liudongdong1.github.io" rel="external nofollow noreferrer">liudongdong1</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liudongdong1.github.io/2022/03/22/bian-cheng-yu-yan/mian-jing/mian-jing-linux/">https://liudongdong1.github.io/2022/03/22/bian-cheng-yu-yan/mian-jing/mian-jing-linux/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="https://liudongdong1.github.io" target="_blank">liudongdong1</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Linux/">
                                    <span class="chip bg-color">Linux</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo,douban" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2022/03/23/cun-chu-she-ji/cun-chu-xie-yi/">
                    <div class="card-image">
                        
                        <img src="https://cdn.pixabay.com/photo/2022/01/16/15/03/finch-6942278__340.jpg" class="responsive-img" alt="存储协议">
                        
                        <span class="card-title">存储协议</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
SAN（Storage Aera Network）：存储区域网络，一种通过网络方式连接存储设备和应用服务器的存储构架，这个网络专用于主机和存储设备之间的访问。当有数据的存取需求时，数据可以通过存储区域网络在服务器和后台存储设备之间高速传输
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-03-23
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Storage/" class="post-category">
                                    Storage
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/storage/">
                        <span class="chip bg-color">storage</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/03/21/bian-cheng-yu-yan/mian-jing/mian-jing-jvm/">
                    <div class="card-image">
                        
                        <img src="https://cdn.pixabay.com/photo/2021/04/20/15/04/hare-6194141__340.jpg" class="responsive-img" alt="面经_JVM">
                        
                        <span class="card-title">面经_JVM</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            .1. 简述垃圾回收机制
在 JVM 中，有一个垃圾回收线程，它是低优先级的，在正常情况下是不会执行的，只有在虚拟机空闲或者当前堆内存不足时，才会触发执行，扫描那些没有被任何引用的对象，并将它们添加到要回收的集合中，进行回收。
若 GC 一
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-03-21
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Java/" class="post-category">
                                    Java
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/JVM/">
                        <span class="chip bg-color">JVM</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <!-- <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="463294659"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>
            <a href="https://liudongdong1.github.io" target="_blank">liudongdong</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">1413.4k</span>&nbsp;字
            
            
            
            
            
            
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/liudongdong1/" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:3463264078@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>














    <a href="https://blog.csdn.net/liudongdong19/" class="tooltipped" target="_blank" data-tooltip="关注我的CSDN: https://blog.csdn.net/liudongdong19/" data-position="top" data-delay="50">
        <i class="fab fa-csdn">C</i>
    </a>





</div>
    </div>
</footer>

<div class="progress-bar"></div>
 -->

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script type="text/javascript" src="/js/CFS.Snow.min.js"></script>
    <!-- 点击爆灯效果 -->
    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
    <script type="text/javascript" src="/js/fireworks.js"></script>
    <!--动态线条背景-->
    <script type="text/javascript"
        color="122 103 238" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
    </script>
    <!-- 天气 -->
    <!-- weather -->
    <!-- weather -->
    <script type="text/javascript">
         WIDGET = {FID: 'knAMQaFanP'}
    </script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon-refresh.min.js" async="async"></script>
    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    
    <!-- {% include '_custom/custom.swig' %} -->

</body>

</html>
