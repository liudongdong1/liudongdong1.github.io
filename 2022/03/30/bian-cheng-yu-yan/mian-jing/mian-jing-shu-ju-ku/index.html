<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="面经_数据库, AIOT,Space&amp;Temporal Sequence Analysis,SpringBoot,liudongdong1,cloud">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>面经_数据库 | DaybyDay</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="DaybyDay" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">DaybyDay</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">

      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/about">
          
          <i class="fas fa-user-circle" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>about</span>
        </a>
      </li>
      
      <li>
        <a href="/resume">
          
          <i class="fa fa-user-secret" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>resume</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/gallery" class="waves-effect waves-light">
      
      <i class="fas fa-camera" style="zoom: 0.6;"></i>
      
      <span>Galleries</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">DaybyDay</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-user-circle"></i>
			
			About
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/about " style="margin-left:75px">
				  
				   <i class="fa fas fa-user-circle" style="position: absolute;left:50px" ></i>
			      
		          <span>about</span>
                  </a>
                </li>
              
                <li>

                  <a href="/resume " style="margin-left:75px">
				  
				   <i class="fa fa fa-user-secret" style="position: absolute;left:50px" ></i>
			      
		          <span>resume</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/gallery" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-camera"></i>
			
			Galleries
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/liudongdong1" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/liudongdong1" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.pixabay.com/photo/2022/01/25/12/53/tree-6966126__480.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">面经_数据库</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    .toc-fixed .toc-link::before{
        position: fixed!important;/*当toc的位置改为fixed时，.toc-link::before也要改为fixed*/
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Mysql/">
                                <span class="chip bg-color">Mysql</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Database/" class="post-category">
                                Database
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2022-03-30
                </div>
                

                <!-- 
                    <i class="fa fa-pencil"></i> Author: liudongdong1
                  -->

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2022-04-07
                </div>
                

                <!-- 
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    9.8k
                </div>
                 -->

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    34 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <blockquote>
<ul>
<li>内存中，虽然 说存取速度快，但是会导致数据不能永久的保存</li>
<li>文件中，可以解决数据永久保存的问题, 速度比内存操作慢，频繁的 IO 操作，而且查询数据不方便</li>
<li>数据库中,  数据可以永久保存，通过使用 SQL 语句，使得查询方便效率高，并且管理数据方便 </li>
</ul>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/v2-c939b64f055632bba58bbe069ad98cd8_720w.jpg" alt=""></p>
<blockquote>
<p>第一层是<code>服务器层</code>，主要提供<code>连接处理、授权认证、安全</code>等功能。</p>
<p>第二层实现了 <code>MySQL 核心服务功能，包括查询解析、分析、优化、缓存以及日期和时间等所有内置函数</code>，所有跨存储引擎的功能都在这一层实现，例如存储过程、触发器、视图等。</p>
<p>第三层是<code>存储引擎层</code>，存储引擎负责 MySQL 中数据的存储和提取。服务器通过 API 与存储引擎通信，这些接口屏蔽了不同存储引擎的差异，使得差异对上层查询过程透明。除了会解析外键定义的 InnoDB 外，存储引擎不会解析 SQL，不同存储引擎之间也不会相互通信，只是简单响应上层服务器请求。</p>
</blockquote>
<h5 id="1-数据库三大范式"><a href="#1-数据库三大范式" class="headerlink" title=".1.  数据库三大范式"></a>.1.  数据库三大范式</h5><p><strong>第一范式（ 1NF）：</strong> <code>字段具有原子性，不可再分</code>。</p>
<p><strong>第二范式（ 2NF）：</strong>是在第一范式（ 1NF） 的基础上建立起来的，要求数据库表中的<code>每个实例或行必须可以被惟一地区分</code>。通常需要为表加上一个列， 以存储各个实例的惟一标识。 这个惟一属性列被称为主关键字或主键。</p>
<p><strong>第三范式（ 3NF）：</strong> 必须先满足第二范式（ 2NF）。 简而言之， 第三范式（ 3NF） 要求<code>一个数据库表中不包含已在其它表中已包含的非主关键字信息</code>。所以第三范式具有如下特征：1， 每一列只有一个值。2， 每一行都能区分。3，<code>每一个表都不包含其他表已经包含的非主关键字信息</code>。</p>
<h5 id="2-嵌套事务"><a href="#2-嵌套事务" class="headerlink" title=".2. 嵌套事务"></a>.2. 嵌套事务</h5><p>嵌套是子事务套在父事务中执行，子事务是父事务的一部分，<code>在进入子事务之前，父事务建立一个回滚点，叫 save point</code>，然后执行子事务，这个子事务的执行也算是父事务的一部分，然后子事务执行结束，父事务继续执行。重点就在于那个 save point。</p>
<ul>
<li><p>如果子事务回滚，会发生什么？</p>
<ul>
<li>父事务会回滚到进入子事务前建立的 save point，然后尝试其他的事务或者其他的业务逻辑，父事务之前的操作不会受到影响，更不会自动回滚。</li>
</ul>
</li>
<li><p>如果父事务回滚，会发生什么？</p>
<ul>
<li>父事务回滚，子事务也会跟着回滚！为什么呢，因为父事务结束之前，子事务是不会提交的，我们说子事务是父事务的一部分</li>
</ul>
</li>
<li><p>事务的提交，是什么情况？</p>
<ul>
<li>是父事务先提交，然后子事务提交，还是子事务先提交，父事务再提交？答案是第二种情况，还是那句话，<code>子事务是父事务的一部分，由父事务统一提交</code>。</li>
</ul>
</li>
</ul>
<h5 id="2-数据库事务"><a href="#2-数据库事务" class="headerlink" title=".2. 数据库事务"></a>.2. 数据库事务</h5><ul>
<li>事务：主要用于<code>处理操作量大，复杂度高的数据</code>。一般来说，事务是必须满足 4 个条件（ACID）：<ul>
<li><strong>原子性：</strong>所谓原子操作是指不会被线程调度机制打断的操作；这种操作一旦开始，就一直运行到结束，中间不会有任何 context switch （切换到另一个线程）。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。</li>
<li><strong>一致性：</strong>在事务开始之前和事务结束以后，<code>数据库的完整性没有被破坏</code>。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。</li>
<li><strong>隔离性：</strong>数据库允许<code>多个并发事务同时对其数据进行读写和修改的能力</code>，隔离性可以防止多个事务并发执行时由于交叉执行，而导致数据的不一致。事务隔离分为不同级别<ul>
<li><code>读未提交 (脏读)</code>：最低的隔离级别，什么都不需要做，一个事务可以读到另一个事务<code>未提交的结果</code>。所有的并发事务问题都会发生</li>
<li><code>读提交 (读旧数据，不可重复读问题)</code>：只有在<code>事务提交后</code>，其更新结果才会被其他事务看见。可以解决脏读问题。</li>
<li><code>可重复读</code> (解决了脏读但是有幻影读)：在<code>一个事务中</code>，对<code>于同一份数据的读取结果总是相同的</code>，无论是否有其他事务对这份数据进行操作，以及这个事务是否提交。可以解决脏读、不可重复读。</li>
<li><code>串行化</code>：事务<code>串行化执行</code>，隔离级别最高，<code>牺牲了系统的并发性</code>。可以解决并发事务的所有问题。</li>
</ul>
</li>
<li><strong>持久性：</strong>事务处理结束后，对数据的修改就是<code>永久的</code>，即便系统故障也不会丢失。</li>
</ul>
</li>
</ul>
<h5 id="2-如何保证事务ACID特性"><a href="#2-如何保证事务ACID特性" class="headerlink" title=".2. 如何保证事务ACID特性"></a>.2. 如何保证事务ACID特性</h5><ul>
<li>隔离性：采用锁机制来实现；表锁和行级锁<ul>
<li>共享锁：可以并发读取数据，但不能修改数据</li>
<li>排他锁：</li>
<li>更新锁：资源的更新锁一次只分配给一个事务，如果需要对资源进行修改，更新锁变为排它锁，否则是共享锁</li>
</ul>
</li>
<li>原子性，一致性，持久性： 通过日志方式。</li>
</ul>
<h5 id="2-Mysql-页级、表级、行级锁"><a href="#2-Mysql-页级、表级、行级锁" class="headerlink" title=".2. Mysql 页级、表级、行级锁"></a>.2. Mysql 页级、表级、行级锁</h5><ul>
<li><strong>表级锁：</strong>开销小，加锁快；不会出现死锁；锁定粒度大，发生锁冲突的概率最高，并发度最低。 </li>
<li><strong>行级锁：</strong>开销大，加锁慢；<code>会出现死锁</code>；锁定粒度最小，发生锁冲突的概率最低，并发度也最高。 </li>
<li><strong>页面锁：</strong>开销和加锁时间界于表锁和行锁之间；<code>会出现死锁</code>；锁定粒度界于表锁和行锁之间，并发度一般</li>
</ul>
<h5 id="2-并发事务问题"><a href="#2-并发事务问题" class="headerlink" title=".2. 并发事务问题"></a>.2. 并发事务问题</h5><ul>
<li>脏读（Dirty read）: 当一个事务正在访问数据并且对数据进行了修改，而这种修改还没有提交到数据库中，这时另外一个事务也访问了这个数据，然后使用了这个数据。因为这个数据是还没有提交的数据，那么另外一个事务读到的这个数据是 “脏数据”，依据 “脏数据” 所做的操作可能是不正确的。</li>
<li>丢失修改（Lost to modify）: 指在一个事务读取一个数据时，另外一个事务也访问了该数据，那么在第一个事务中修改了这个数据后，第二个事务也修改了这个数据。这样第一个事务内的修改结果就被丢失，因此称为丢失修改。例如：事务 1 读取某表中的数据 A=20，事务 2 也读取 A=20，事务 1 修改 A=A-1，事务 2 也修改 A=A-1，最终结果 A=19，事务 1 的修改被丢失。</li>
<li>不可重复读（Unrepeatable read）: 指在一个事务内多次读同一数据。在这个事务还没有结束时，另一个事务也访问该数据。那么，在第一个事务中的两次读数据之间，由于第二个事务的修改导致第一个事务两次读取的数据可能不太一样。这就发生了在一个事务内两次读到的数据是不一样的情况，因此称为不可重复读。</li>
<li>幻读（Phantom read）: 幻读与不可重复读类似。它发生在一个事务（T1）读取了几行数据，接着另一个并发事务（T2）插入了一些数据时。在随后的查询中，第一个事务（T1）就会发现多了一些原本不存在的记录，就好像发生了幻觉一样，所以称为幻读。</li>
</ul>
<table>
<thead>
<tr>
<th>事务隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th align="center">幻读</th>
</tr>
</thead>
<tbody><tr>
<td>读未提交</td>
<td>允许</td>
<td>允许</td>
<td align="center">允许</td>
</tr>
<tr>
<td>读已提交</td>
<td>不允许</td>
<td>允许</td>
<td align="center">允许</td>
</tr>
<tr>
<td>可重复读</td>
<td>不允许</td>
<td>不允许</td>
<td align="center">允许</td>
</tr>
<tr>
<td>串行化</td>
<td>不允许</td>
<td>不允许</td>
<td align="center">不允许</td>
</tr>
</tbody></table>
<h5 id="3-如何解决并发性问题"><a href="#3-如何解决并发性问题" class="headerlink" title=".3. 如何解决并发性问题"></a>.3. 如何解决并发性问题</h5><ul>
<li>版本检查：</li>
<li>共享锁、乐观锁、悲观锁</li>
</ul>
<h5 id="3-一对多和多对一场景"><a href="#3-一对多和多对一场景" class="headerlink" title=".3. 一对多和多对一场景"></a>.3. 一对多和多对一场景</h5><ul>
<li><p><strong>一对多：</strong>当在数据库的设计中，涉及到一个对象可以包含多个另外对象，而单个另外对象只能对应一个对象时就产生了一对多的关系，例学生和班级，这种情况通常将外键设在多的对象表结构中。</p>
</li>
<li><p><strong>多对多：</strong>当在数据库的设计中，涉及到一个对象可以包含多个另外对象，而单个另外对象也对应多个对象时就产生了多对多的关系，例书籍和作者，这种情况通常将外键设在多的对象表结构中。</p>
</li>
</ul>
<h5 id="4-触发器、函数、视图、存储过程"><a href="#4-触发器、函数、视图、存储过程" class="headerlink" title=".4. 触发器、函数、视图、存储过程"></a>.4. 触发器、函数、视图、存储过程</h5><ul>
<li><strong>触发器:</strong> 使用触发器可以<code>定制用户对表进行【增、删、改】操作时前后的行为</code>，触发器无法由用户直接调用，而由于对表的【增 / 删 / 改】操作被动引发的</li>
<li><strong>函数:</strong> 是 MySQL 数据库提供的<code>内部函数</code> (当然也可以<code>自定义函数</code>)。这些内部函数可以帮助用户更加方便的处理表中的数据, avg, min, count, sum, upper, lower, hour, year</li>
<li><strong>视图:</strong> 视图是<code>虚拟表或逻辑表</code>，它被定义为具有连接的 SQL SELECT 查询语句。</li>
<li><strong>存储过程:</strong> 存储过程是<code>存储在数据库目录中的一堆的声明性 SQL 语句</code>，数据库中的一个重要对象，有效提高了程序的性能</li>
</ul>
<h5 id="5-数据库索引"><a href="#5-数据库索引" class="headerlink" title=".5. 数据库索引"></a>.5. 数据库索引</h5><ul>
<li>唯一索引（<code>UNIQUE</code>）：索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。</li>
<li>主键索引（<code>PRIMARY</code>）：一种特殊的唯一索引，一个表只能有一个主键，不允许有空值。一般是在建表的时候同时创建主键索引。</li>
<li>普通索引（<code>INDEX</code>）：最基本的索引，没有任何限制。</li>
<li>组合索引：多个字段上创建的索引，只有在查询条件中使用了创建索引时的第一个字段，索引才会被使用。使用组合索引时遵循最左前缀集合。</li>
</ul>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220324091525397.png" alt=""></p>
<h5 id="5-索引缺点"><a href="#5-索引缺点" class="headerlink" title=".5. 索引缺点"></a>.5. 索引缺点</h5><ul>
<li><p><strong>【不要】创建索引</strong></p>
<ul>
<li><p>表经常进行 INSERT/UPDATE/DELETE 操作</p>
</li>
<li><p>表很小 (记录超少)</p>
</li>
<li><p>列名不经常作为连接条件或出现在 WHERE 子句中</p>
</li>
</ul>
</li>
<li><p>索引优缺点</p>
<ul>
<li>索引加快数据库的检索速度</li>
<li>索引<code>降低了插入、删除、修改等维护任务的速度</code> (虽然索引可以提高查询速度，但是它们也会导致数据库系统更新数据的性能下降，<strong>因为大部分数据更新需要同时更新索引</strong>)</li>
<li>唯一索引可以确保每一行数据的唯一性，通过使用索引，可以在查询的过程中使用优化隐藏器，提高系统的性能</li>
<li>索引需<code>要占物理和数据空间</code></li>
</ul>
</li>
</ul>
<h5 id="4-什么是存储过程？用什么来调用？"><a href="#4-什么是存储过程？用什么来调用？" class="headerlink" title="4. 什么是存储过程？用什么来调用？"></a><strong>4. 什么是存储过程？用什么来调用？</strong></h5><p>存储过程是一个<code>预编译的 SQL 语句</code>，优点是允许模块化的设计，就是说只需创建一次，以后在该程序中就可以调用多次。如果某次操作需要执行多次 SQL，使用存储过程比单纯 SQL 语句执行要快。</p>
<p>1）可以用一个命令对象来调用存储过程。</p>
<p>2）可以供外部程序调用，比如：java 程序。</p>
<h5 id="5-索引数据结构"><a href="#5-索引数据结构" class="headerlink" title=".5. 索引数据结构"></a>.5. 索引数据结构</h5><ul>
<li>B树，B+树，Hash(直接定址法，平方取中法，折叠法，除数取余法，随机数法)，位图索引</li>
</ul>
<h5 id="6-主键和外键"><a href="#6-主键和外键" class="headerlink" title=".6. 主键和外键"></a>.6. 主键和外键</h5><ul>
<li><strong>主键：</strong>是指表中一个列或者列的组合，其值能够<code>唯一的标识表中的每一个行</code>。这样的一列或者多列成为表的主键，通过它可以强制表的实体完整性。当创建或者更改表时可以通过定义 <code>PRIMARY KEY</code> 约束来创建主键，<code>一个表只能有一个主键约束，而且主键约束中的列不能是空值</code>，由于主键约束确保唯一数据，所一经常来定义标识列。</li>
<li><strong>外键：</strong>外键是建立于<code>表与表之间的联系</code>。外键保证了数据的完整性，使用外键，简单直观，可以直接在数据模型中体现，无论是设计、维护等。</li>
<li><strong>超键</strong>：在关系中能<code>唯一标识元组的属性集</code>称为关系模式的超键。<code>一个属性可以为作为一个超键</code>，<code>多个属性组合在一起也可以作为一个超键</code>。超键包含候选键和主键。</li>
<li><strong>候选键</strong>：<code>是最小超键</code>，即没有冗余元素的超键。</li>
</ul>
<blockquote>
<p>关于主键自增问题：</p>
<ul>
<li>MyISAM 表会把自增主键的最大 ID 记录到<code>数据文件里</code>，重启 MySQL 自增主键的最大 ID 也不会丢失。</li>
<li>InnoDB 表只是把自增主键的最大 ID 记录到<code>内存中</code>，所以重启数据库或者是对表进行 OPTIMIZE 操作，都会导致最大 ID 丢失。</li>
</ul>
</blockquote>
<h5 id="6-为什么用自增列作为主键"><a href="#6-为什么用自增列作为主键" class="headerlink" title=".6. 为什么用自增列作为主键"></a>.6. 为什么用自增列作为主键</h5><ul>
<li>如果表使用自增主键，那么每次插入新的记录，记录就会顺序添加到当前索引节点的后续位置，当一页写满，就会自动开辟一个新的页</li>
<li>如果使用非自增主键（如果身份证号或学号等），由于<code>每次插入主键的值近似于随机，因此每次新纪录都要被插到现有索引页得中间某个位置</code>，此时 MySQL 不得不为了将新记录插到合适位置而移动数据，甚至目标页面可能已经被回写到磁盘上而从缓存中清掉，此时又要从磁盘上读回来，这增加了很多开销，同时频繁的移动、分页操作造成了大量的碎片，得到了不够紧凑的索引结构，后续不得不通过 OPTIMIZE TABLE 来重建表并优化填充页面。</li>
</ul>
<h5 id="7-创建索引但是无法命中索引的-8-种情况"><a href="#7-创建索引但是无法命中索引的-8-种情况" class="headerlink" title=".7. 创建索引但是无法命中索引的 8 种情况"></a>.7. 创建索引但是无法命中索引的 8 种情况</h5><ul>
<li>查询条件中有 or、not in、not exist 等</li>
<li>小表查询</li>
<li>like 查询是以 % 开头</li>
<li>如果列类型是字符串，那一定要在条件中将数据使用引号引用起来，否则不使用索引</li>
<li>没有使用索引字段查询</li>
<li>对索引列进行运算，需要建立函数索引</li>
<li>单独引用联合索引中的非第一位置的索引</li>
<li>没有查询条件</li>
</ul>
<h5 id="8-char-和-varchar之间区别"><a href="#8-char-和-varchar之间区别" class="headerlink" title=".8. char 和 varchar之间区别"></a>.8. char 和 varchar之间区别</h5><ul>
<li>char 的<strong>长度</strong>是不可变的，而 varchar 的长度是可变的。</li>
<li>char 的<strong>存取速度</strong>还是要比 varchar 要快得多，因为其长度固定，方便程序的存储与查找；但是 char 也为此付出的是<strong>空间</strong>的代价，因为其长度固定，所以难免会有多余的空格占位符占据空间，可谓是以空间换取<strong>时间</strong>效率，而 varchar 是以空间效率为首位的。</li>
<li>char 的<strong>存储方式</strong>是，对英文字符（ASCII）占用 1 个字节，对一个汉字占用两个字节；而 varchar 的存储方式是，对每个英文字符占用 2 个字节，汉字也占用 2 个字节。</li>
</ul>
<h5 id="9-使用limit-offset-为什么越往后越慢"><a href="#9-使用limit-offset-为什么越往后越慢" class="headerlink" title=".9. 使用limit offset 为什么越往后越慢"></a>.9. 使用limit offset 为什么越往后越慢</h5><ul>
<li><p>原因：MySQL 的 <code>limit m n</code> 工作原理就是先读取前面 <code>m+n</code> 条记录，然后抛弃前 <code>m</code> 条，读后面 <code>n</code> 条想要的，所以 <code>m</code> 越大，偏移量越大，性能就越差。</p>
</li>
<li><p>SELECT * FROM table LIMIT [offset,] rows | rows OFFSET offset  </p>
</li>
<li><p>解决方案:</p>
<ul>
<li><p>limit 限制优化法：把 limit 偏移量限制低于某个数。超过这个数等于没数据</p>
</li>
<li><p>存储本页数据两端的主键，按主键查找后向前或向后取多少条</p>
</li>
<li><pre class=" language-javascript"><code class="language-javascript">SELECT <span class="token operator">...</span> FROM single_table <span class="token operator">...</span> ORDER BY non_index_column <span class="token punctuation">[</span>DESC<span class="token punctuation">]</span> LIMIT <span class="token punctuation">[</span>M<span class="token punctuation">,</span><span class="token punctuation">]</span>N<span class="token punctuation">;</span></code></pre>
</li>
</ul>
</li>
</ul>
<h5 id="10-sql注入"><a href="#10-sql注入" class="headerlink" title=".10. sql注入"></a>.10. sql注入</h5><blockquote>
<p>SQL 注入攻击指的是通过构建特殊的输入作为参数传入 Web 应用程序，而这些输入大都是 SQL 语法里的一些组合，通过执行 SQL 语句进而执行攻击者所要的操作，其主要原因是程序没有细致地过滤用户输入的数据，致使非法数据侵入系统。</p>
</blockquote>
<h5 id="12-红黑树和AVL树"><a href="#12-红黑树和AVL树" class="headerlink" title=".12. 红黑树和AVL树"></a>.12. 红黑树和AVL树</h5><ul>
<li>红黑树不追求 “完全平衡”， 任何不平衡在三次旋转之内解决， 减少频繁的移动，</li>
<li>AVL树： 更平衡，时间效能对读取较高，维护较慢，开销大</li>
</ul>
<blockquote>
<p>动态查找树主要包括：二叉搜索树，平衡二叉树，红黑树，B 树，B - 树时间复杂度 O (log2N)，通过对树高度的降低可以提升查找效率</p>
<ul>
<li>B树以 O (log n) 的时间复杂度运行进行查找、顺序读取、插入和删除的数据结构。B 树，概括来说是一个节点可以拥有多于 2 个子节点的二叉查找树。</li>
<li><code>B 树的节点可以有很多孩子节点</code>，红黑树是一种近似平衡的二叉搜索树即每个节点只有两个孩子<ul>
<li>每个节点有 M-1 个 key，并且以升序排列</li>
<li>位于 M-1 和 M key 的子节点的值位于 M-1 和 M key 对应的 Value 之间</li>
</ul>
</li>
<li>B + 树<code>内部结点没有指向关键字具体信息的指</code>针，内部结点相对 B 树小<ul>
<li>非叶结点仅具有索引作用，跟记录有关的信息均存放在叶结点中</li>
</ul>
</li>
<li>B+树查询稳定：<code>非终端结点并不是指向文件内容的结点，仅仅是作为叶子结点的关键字索引</code>，因此所有的关键字查询都会走一条从根节点到叶子结点的路径。即 s 所有关键字查询的长度是一样的，查询效率稳定。</li>
<li><code>当数据量较小</code>，数据完全可以放入内存中，不需要进行磁盘 IO，这时候，红黑树时间复杂度比 B + 树低。threshold = loadFactor * capacity</li>
</ul>
</blockquote>
<h5 id="12-B树和B-树区别"><a href="#12-B树和B-树区别" class="headerlink" title="12. B树和B+树区别"></a>12. B树和B+树区别</h5><ul>
<li><code>B 树每个节点都存储数据</code>，所有节点组成这棵树。<code>B + 树只有叶子节点存储数据</code>（B + 数中有两个头指针：一个指向根节点，另一个指向关键字最小的叶节点），叶子节点包含了这棵树的所有数据，<code>所有的叶子结点使用链表相连</code>，便于<strong>区间</strong><code>查找和遍历</code>，所<code>有非叶节点起到索</code>引作用。</li>
<li>B + 树中查找，无论查找是否成功，每次都是一条<code>从根节点到叶节点的路径</code>。</li>
<li>B 树中<code>叶节点包含的关键字和其他节点包含的关键字是不重复的</code>，B + 树的索引项只包含对应子树的最大关键字和指向该子树的指针，不含有该关键字对应记录的存储地址。</li>
</ul>
<h5 id="13-图片在数据库中怎么存储的"><a href="#13-图片在数据库中怎么存储的" class="headerlink" title="13. 图片在数据库中怎么存储的"></a>13. 图片在数据库中怎么存储的</h5><ul>
<li>将<code>图片保存的路径存储到数据库</code>；</li>
<li>将图片以<a href="https://so.csdn.net/so/search?q=二进制&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener">二进制</a>数据流的形式直接写入数据库字段中。</li>
</ul>
<h5 id="15-MVCC"><a href="#15-MVCC" class="headerlink" title="15. MVCC"></a>15. MVCC</h5><blockquote>
<p>可以认为 MVCC 是<code>行级锁的一个变种</code>，innoDB 采用了<code>乐观锁的策略</code>，<code>在每行记录后保存两个隐藏列来实现</code>，这两个<code>列保存了行的版本号信息</code>，每开启一个新事务，<code>版本号自动更新</code>，事务开始时刻的版本号作为事务的版本号。用来和查询到的记录所带的版本号进行比较来判断。</p>
</blockquote>
<p><strong>快照读 (snapshot read)：</strong>读取的是<code>记录的可见版本</code> (有可能是历史版本)，不用加锁（共享读锁 s 锁也不加，所以不会阻塞其他事务的写）</p>
<p><strong>当前读 (current read)：</strong>读取的是<code>记录的最新版本</code>，并且，<code>当前读返回的记录，都会加上锁</code>，保证其他事务不会再并发修改这条记录</p>
<p>todo :<a href="https://posts.careerengine.us/p/61762a161590276a0e56a18d" target="_blank" rel="noopener">https://posts.careerengine.us/p/61762a161590276a0e56a18d</a></p>
<h5 id="16-MyISAM-和-InnoDB-引擎"><a href="#16-MyISAM-和-InnoDB-引擎" class="headerlink" title="16. MyISAM 和 InnoDB 引擎"></a>16. MyISAM 和 InnoDB 引擎</h5><ul>
<li><strong>InnoDB 引擎</strong>：MySQL 的 5.5 之后的默认引擎，InnoDB 引擎提供了<code>对数据库事务的支持</code>，并且还提供了<code>行级锁和外键的约束</code>，它的设计的目标就是处理大数据容量的数据库系统。MySQL 运行的时候，InnoDB 会在内存中建立缓冲池，用于缓冲数据和索引。由于锁的粒度小，写操作是不会锁定全表的，所以在并发度较高的场景下使用会提升效率的。</li>
<li><strong>MyISAM 引擎</strong>：不提供事务的支持，也不支持行级锁和外键。因此当执行插入和更新语句时，即<code>执行写操作的时候需要锁定这个表</code>，所以会导致效率会降低。不过和 InnoDB 不同的是，MyIASM 引擎是<code>保存了表的行数</code>，于是当进行 select count (*) from table 语句时，可以直接的读取已经保存的值而不需要进行扫描全表。所以，如果表的读操作远远多于写操作时，并且不需要事务的支持的，可以将 MyIASM 作为数据库引擎的首选。</li>
<li><strong>是否支持行级锁</strong> : MyISAM 只有表级锁 (table-level locking)，而 InnoDB 支持行级锁 (row-level locking) 和表级锁，默认为行级锁，适合高并发操作。</li>
<li><strong>是否支持外键</strong>： MyISAM 不支持，而 InnoDB 支持</li>
<li><strong>是否支持事务</strong>：MyISAM 不支持，而 InnoDB 支持</li>
<li><strong>缓存</strong>：MyISAM 只<code>缓存索引</code>，<code>InnoDB 缓存索引和真实数据</code>，所以对内存要求高</li>
<li><strong>崩溃恢复</strong>：<code>MyISAM 崩溃后发生损坏的概率比 InnoDB 高很多</code>，而且恢复的速度也更慢。</li>
<li><strong>索引区别</strong><ul>
<li>MyIASM 引擎，B + 树的数据结构中存储的内容实际上是实际数据的地址值。也就是说它的索引和实际数据是分开的，<strong>只不过使用索引指向了实际数据。这种索引的模式被称为非聚集索引。</strong></li>
<li>Innodb 引擎的索引的数据结构也是 B + 树，<strong>只不过数据结构中存储的都是实际的数据，这种索引有被称为聚集索引</strong>。</li>
</ul>
</li>
</ul>
<h5 id="16-Innodb特性"><a href="#16-Innodb特性" class="headerlink" title="16.Innodb特性"></a>16.Innodb特性</h5><ul>
<li>插入缓冲（insert buffer), 二次写 (double write), 自适应哈希索引 (ahi), 预读 (read ahead)</li>
</ul>
<h5 id="16-where-与-having-的区别"><a href="#16-where-与-having-的区别" class="headerlink" title="16. where 与 having 的区别"></a>16. where 与 having 的区别</h5><ul>
<li><p>用的地方不一样</p>
<p>where 可以用于 select、update、delete 和 insert into values (select * from table where ..) 语句中。</p>
<p><code>having 只能用于 select 语句中</code></p>
</li>
<li><p>执行的顺序不一样</p>
<p><code>where 的搜索条件是在执行语句进行分组之前应用</code></p>
<p><code>having 的搜索条件是在分组条件后执行的</code></p>
<p>即如果 where 和 having 一起用时，where 会先执行，having 后执行</p>
</li>
</ul>
<h5 id="17-批量往-mysql-导入-1000-万数据有什么方法？"><a href="#17-批量往-mysql-导入-1000-万数据有什么方法？" class="headerlink" title=".17. 批量往 mysql 导入 1000 万数据有什么方法？"></a>.17. 批量往 mysql 导入 1000 万数据有什么方法？</h5><ul>
<li>减少 IO 次数</li>
<li><code>SQL 写法优化，一条 SQL 语句插入多条数据</code></li>
<li>合理设置<code>批量大小</code></li>
<li>尽量顺序插入， 减少索引的维护压力</li>
</ul>
<h5 id="18-drop、delete-与-truncate"><a href="#18-drop、delete-与-truncate" class="headerlink" title=".18. drop、delete 与 truncate"></a>.18. <strong>drop、delete</strong> 与 <strong>truncate</strong></h5><ul>
<li><code>不再需要一张表</code>的时候，用 <strong>drop</strong></li>
<li>想<code>删除部分数据行</code>时候，用 <strong>delete</strong>，并且带上 where 子句</li>
<li><code>保留表而删除所有数据</code>的时候用 <strong>truncate</strong></li>
</ul>
<h5 id="20-MySQL-权限相关的表"><a href="#20-MySQL-权限相关的表" class="headerlink" title=".20. MySQL 权限相关的表"></a>.20. MySQL 权限相关的表</h5><ul>
<li><code>user 权限表</code>：记录允许连接到服务器的<code>用户帐号信息</code>，里面的权限是全局级的。</li>
<li><code>db 权限表</code>：记录<code>各个帐号</code>在各个数据库上的操作权限。</li>
<li><code>table_priv 权限表</code>：记录数据表级的操作权限。</li>
<li><code>columns_priv 权限表</code>：记录数据列级的操作权限。</li>
<li><code>host 权限表</code>：配合 db 权限表对给定主机上数据库级操作权限作更细致的控制。这个权限表不受 GRANT 和 REVOKE 语句的影响。</li>
</ul>
<h5 id="21-聚簇索引与非聚簇索引"><a href="#21-聚簇索引与非聚簇索引" class="headerlink" title=".21. 聚簇索引与非聚簇索引"></a>.21. 聚簇索引与非聚簇索引</h5><ul>
<li>聚簇索引：是一种数据存储方式，而不是索引类型，将数据存储和索引放到一起，INNODB表中，非叶子节点按照主键顺序存放，叶子节点存放主键以及对应的记录。</li>
<li>非聚簇索引： 叶子存储的是指向数据地址的指针</li>
</ul>
<h5 id="22-数据库读写分离"><a href="#22-数据库读写分离" class="headerlink" title=".22. 数据库读写分离"></a>.22. 数据库读写分离</h5><p><code>主服务器</code>用来处理<code>写操作</code>以及<code>实时性要求比较高的读操作</code>，而<code>从服务器</code>用来处理<code>读操作</code>。</p>
<p>读写分离常用<code>代理方式</code>来实现，代理服务器接收应用层传来的读写请求，然后决定<code>转发</code>到哪个服务器。</p>
<p>MySQL 读写分离能提高性能的原因在于：</p>
<ul>
<li>主从服务器负责各自的读和写，极大程度<code>缓解了锁的争用</code>；</li>
<li><code>从服务器可以配置 MyISAM 引擎，提升查询性能以及节约系统开销；</code></li>
<li>增加冗余，提高可用性。</li>
</ul>
<h5 id="23-Mysql-的复制原理"><a href="#23-Mysql-的复制原理" class="headerlink" title=".23. Mysql 的复制原理"></a>.23. Mysql 的复制原理</h5><p>Mysql 支持两种复制：<code>基于行的复制</code>和<code>基于语句的复制</code>。</p>
<p>这两种方式都是<code>在主库上记录二进制日志</code>，然后<code>在从库重放日志的方式</code>来实现异步的数据复制。这意味着：复制过程存在时延，这段时间内，主从数据可能不一致。</p>
<p>主要涉及三个线程：binlog 线程、I/O 线程和 SQL 线程。</p>
<ul>
<li><strong>binlog 线程</strong> ：负责将主服务器上的数据更改写入二进制文件（binlog）中。</li>
<li><strong>I/O 线程</strong> ：负责从主服务器上读取二进制日志文件，并写入从服务器的中继日志中。</li>
<li><strong>SQL 线程</strong> ：负责读取中继日志并重放其中的 SQL 语句。</li>
</ul>
<h5 id="24-主从复制方式"><a href="#24-主从复制方式" class="headerlink" title=".24. 主从复制方式"></a>.24. 主从复制方式</h5><ul>
<li><strong>同步复制:</strong>所谓的同步复制，意思是 master 的变化，必须等待 slave-1,slave-2,…,slave-n 完成后才能返回。 这样，显然不可取，也不是 MySQL 复制的默认设置。比如，在 WEB 前端页面上，用户增加了条记录，需要等待很长时间。</li>
<li><strong>异步复制:</strong>如同 AJAX 请求一样。master 只需要完成自己的数据库操作即可。至于 slaves 是否收到二进制日志，是否完成操作，不用关心，MySQL 的默认设置。</li>
<li><strong>半同步复制:</strong>master 只保证 slaves 中的一个操作成功，就返回，其他 slave 不管。 这个功能，是由 <a href="">google</a> 为 MySQL 引入的。</li>
</ul>
<h5 id="25-数据库binlog-redolog-undolog"><a href="#25-数据库binlog-redolog-undolog" class="headerlink" title=".25. 数据库binlog, redolog, undolog"></a>.25. 数据库binlog, redolog, undolog</h5><ul>
<li><p><strong>binlog</strong>: 记录数据库<code>执行的写入性操作</code>(不包括查询) 信息，以二进制的形式保存在磁盘中。 <code>binlog</code>是 <code>mysql</code>的逻辑日志，并且由 <code>Server</code>层进行记录，使用任何存储引擎的 <code>mysql</code>数据库都会记录 <code>binlog</code>日志。</p>
<ul>
<li><code>binlog</code>是通过<code>追加的方式</code>进行写入的，可以通过 <code>max_binlog_size</code>参数设置每个 <code>binlog</code><br>文件的大小，当文件大小达到给定值之后，会生成新的文件来保存日志。</li>
<li><strong>主从复制</strong> ：在 <code>Master</code>端开启 <code>binlog</code>，然后将 <code>binlog</code>发送到各个 <code>Slave</code>端， <code>Slave</code>端重放 <code>binlog</code>从而达到主从数据一致。</li>
<li><strong>数据恢复</strong> ：通过使用 <code>mysqlbinlog</code>工具来恢复数据。</li>
<li><strong>刷盘时机：</strong><ul>
<li>0：不去强制要求，由系统自行判断何时写入磁盘；</li>
<li>1：每次 <code>commit</code>的时候都要将 <code>binlog</code>写入磁盘；</li>
<li>N：每 N 个事务，才会将 <code>binlog</code>写入磁盘。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>redo log</strong>: 包括两部分：一个是内存中的日志缓冲 ( <code>redo log buffer</code>)，另一个是磁盘上的日志文件 ( <code>redo logfile</code>)。 <code>mysql</code>每执行一条 <code>DML</code>语句，先将记录写入 <code>redo log buffer</code>，后续某个时间点再一次性将多个操作记录写到 <code>redo log file</code>。这种 <strong>先写日志，再写磁盘</strong> 的技术就是 <code>MySQL</code>里经常说到的 <code>WAL(Write-Ahead Logging)</code>技术。</p>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/1460000023827701-16488226996234.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/1460000023827700.png" alt=""></p>
</li>
<li><p><strong>undolog:</strong> undo 日志用于<code>记录事务开始前的状态，用于事务失败时的回滚操作</code>；redo 日志记录事务执行后的状态，用来恢复未写入 data file 的已成功事务更新的数据。例如某一事务的事务序号为 T1，其对数据 X 进行修改，设 X 的原值是 0，修改后的值为 1，那么 Undo 日志为 &lt;T1, X, 0&gt;，Redo 日志为 &lt; T1, X, 1&gt;。</p>
</li>
</ul>
<h5 id="26-事务是如何通过日志来实现的"><a href="#26-事务是如何通过日志来实现的" class="headerlink" title="26. 事务是如何通过日志来实现的"></a>26. 事务是如何通过日志来实现的</h5><p>事务日志是通过 redo 和 innodb 的存储引擎日志缓冲（Innodb log buffer）来实现的，当开始一个事务的时候，会记录该事务的 lsn (log sequence number) 号；当事务执行时，会往 InnoDB 存储引擎的日志的日志缓存里面插入事务日志；当事务提交时，必须将存储引擎的日志缓冲写入磁盘（通过 innodb_flush_log_at_trx_commit 来控制），也就是写数据前，需要先写日志。这种方式称为 “预写日志方式”</p>
<h5 id="27-NULL-意思"><a href="#27-NULL-意思" class="headerlink" title="27. NULL 意思"></a>27. NULL 意思</h5><p><code>NULL 这个值表示 UNKNOWN (未知)</code>: 它不表示 “”(空字符串)。对 NULL 这个值的任何比较都会生产一个 NULL 值。您不能把任何值与一个 NULL 值进行比较，并在逻辑上希望获得一个答案。使用<code>IS NULL</code>来进行 NULL 判断</p>
<h5 id="28-完整性约束"><a href="#28-完整性约束" class="headerlink" title="28. 完整性约束"></a>28. 完整性约束</h5><ol>
<li>实体完整性：规定表的每一行在表中是惟一的实体。</li>
<li>域完整性：是指表中的列必须满足某种特定的数据类型约束，其中约束又包括取值范围、精度等规定。</li>
<li>参照完整性：是指两个表的主关键字和外关键字的数据应一致，保证了表之间的数据的一致性，防止了数据丢失或无意义的数据在数据库中扩散。</li>
<li>用户定义的完整性：不同的关系数据库系统根据其应用环境的不同，往往还需要一些特殊的约束条件。用户定义的完整性即是针对某个特定关系数据库的约束条件，它反映某一具体应用必须满足的语义要求。</li>
</ol>
<h5 id="29-sql-语句包括哪几部分"><a href="#29-sql-语句包括哪几部分" class="headerlink" title="29. sql 语句包括哪几部分"></a>29. sql 语句包括哪几部分</h5><p>SQL 语言包括数据定义 (DDL)、数据操纵 (DML), 数据控制 (DCL) 和数据查询（DQL）四个部分。</p>
<ul>
<li>数据定义：Create Table,Alter Table,Drop Table, Create/Drop Index 等</li>
<li>数据操纵：Select ,insert,update,delete,</li>
<li>数据控制：grant,revoke</li>
<li>数据查询：select</li>
</ul>
<h5 id="30-MySQL-数据库作发布系统的存储，一天五万条以上的增量，预计运维三年，怎么优化？"><a href="#30-MySQL-数据库作发布系统的存储，一天五万条以上的增量，预计运维三年，怎么优化？" class="headerlink" title="30.MySQL 数据库作发布系统的存储，一天五万条以上的增量，预计运维三年，怎么优化？"></a>30.MySQL 数据库作发布系统的存储，一天五万条以上的增量，预计运维三年，怎么优化？</h5><ol>
<li>设计良好的数据库结构，允许部分数据冗余，尽量避免 join 查询，提高效率。</li>
<li>选择合适的表字段数据类型和存储引擎，适当的添加索引。</li>
<li>mysql 库主从读写分离。</li>
<li>找规律分表，减少单表中的数据量提高查询速度。</li>
<li>添加缓存机制，比如 memcached，redis 等。</li>
<li>不经常改动的页面，生成静态页面。</li>
</ol>
<h5 id="31-如果一个表有一列定义为-TIMESTAMP，将发生什么？"><a href="#31-如果一个表有一列定义为-TIMESTAMP，将发生什么？" class="headerlink" title="31. 如果一个表有一列定义为 TIMESTAMP，将发生什么？"></a>31. 如果一个表有一列定义为 TIMESTAMP，将发生什么？</h5><p>每当行被更改时，时间戳字段将获取当前时间戳。</p>
<h5 id="32-列设置为-AUTO-INCREMENT-时，如果在表中达到最大值，会发生什么情况？"><a href="#32-列设置为-AUTO-INCREMENT-时，如果在表中达到最大值，会发生什么情况？" class="headerlink" title="32. 列设置为 AUTO INCREMENT 时，如果在表中达到最大值，会发生什么情况？"></a>32. 列设置为 AUTO INCREMENT 时，如果在表中达到最大值，会发生什么情况？</h5><p> 它会停止递增，任何进一步的插入都将产生错误，因为密钥已被使用。</p>
<h5 id="33-LIKE-声明中的％和-是什么意思"><a href="#33-LIKE-声明中的％和-是什么意思" class="headerlink" title="33. LIKE 声明中的％和_是什么意思"></a>33. LIKE 声明中的％和_是什么意思</h5><ul>
<li><code>％对应于 0 个或更多字符，_只是 LIKE 语句中的一个字符。</code></li>
<li>使用 <code>LIKE %abc%</code> 不会走索引，而使用 <code>LIKE abc%</code> 会走索引</li>
</ul>
<h5 id="34-为什么使用-select-from-table-会使得查询效率低？"><a href="#34-为什么使用-select-from-table-会使得查询效率低？" class="headerlink" title="34. 为什么使用 select * from table 会使得查询效率低？"></a>34. 为什么使用 select * from table 会使得查询效率低？</h5><p>select * 语句取出表中所有的字段，会<code>解析更多的对象，字段，权限，属性等</code>，无论该字段的数据对调用的程序是否有用，这会造成服务器资源的浪费，导致优化和效率问题，对服务器的性能产生一定的影响</p>
<h5 id="35-EXPLAIN-的字段有哪些，具有什么含义？"><a href="#35-EXPLAIN-的字段有哪些，具有什么含义？" class="headerlink" title="35.EXPLAIN 的字段有哪些，具有什么含义？"></a>35.EXPLAIN 的字段有哪些，具有什么含义？</h5><p>执行计划是 SQL 调优的一个重要依据，可以通过<code>EXPLAIN 命令查看 SQL 语句的执行计划</code>，如果作用在表上，那么该命令相当于 DESC。EXPLAIN 的指标及含义如下：</p>
<table>
<thead>
<tr>
<th>指标名</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>表示 SELECT 子句或操作表的顺序，执行顺序从大到小执行，当 id 一样时，执行顺序从上往下。</td>
</tr>
<tr>
<td>select_type</td>
<td>表示查询中每个 SELECT 子句的类型，例如 SIMPLE 表示不包含子查询、表连接或其他复杂语法的简单查询，PRIMARY 表示复杂查询的最外层查询，SUBQUERY 表示在 SELECT 或 WHERE 列表中包含了子查询。</td>
</tr>
<tr>
<td>type</td>
<td>表示访问类型，性能由差到好为：ALL 全表扫描、index 索引全扫描、range 索引范围扫描、ref 返回匹配某个单独值得所有行，常见于使用非唯一索引或唯一索引的非唯一前缀进行的查找，也经常出现在 join 操作中、eq_ref 唯一性索引扫描，对于每个索引键只有一条记录与之匹配、const 当 MySQL 对查询某部分进行优化，并转为一个常量时，使用这些访问类型，例如将主键或唯一索引置于 WHERE 列表就能将该查询转为一个 const、system 表中只有一行数据或空表，只能用于 MyISAM 和 Memory 表、NULL 执行时不用访问表或索引就能得到结果。SQL 性能优化的目标：至少要达到 range 级别，要求是 ref 级别，如果可以是 consts 最好。</td>
</tr>
<tr>
<td>possible_keys</td>
<td>表示查询时可能用到的索引，但不一定使用。列出大量可能索引时意味着备选索引数量太多了。</td>
</tr>
<tr>
<td>key</td>
<td>显示 MySQL 在查询时实际使用的索引，如果没有使用则显示为 NULL。</td>
</tr>
<tr>
<td>key_len</td>
<td>表示使用到索引字段的长度，可通过该列计算查询中使用的索引的长度，对于确认索引有效性以及多列索引中用到的列数目很重要。</td>
</tr>
<tr>
<td>ref</td>
<td>表示上述表的连接匹配条件，即哪些列或常量被用于查找索引列上的值。</td>
</tr>
<tr>
<td>rows</td>
<td>表示 MySQL 根据表统计信息及索引选用情况，估算找到所需记录所需要读取的行数。</td>
</tr>
<tr>
<td>Extra</td>
<td>表示额外信息，例如 Using temporary 表示需要使用临时表存储结果集，常见于排序和分组查询。Using filesort 表示无法利用索引完成的文件排序，这是 ORDER BY 的结果，可以通过合适的索引改进性能。Using index 表示只需要使用索引就可以满足查询表得要求，说明表正在使用覆盖索引。</td>
</tr>
</tbody></table>
<h5 id="36-数据库死锁如何解决？"><a href="#36-数据库死锁如何解决？" class="headerlink" title="36. 数据库死锁如何解决？"></a>36. 数据库死锁如何解决？</h5><ul>
<li><p>死锁是指多个事务在同一资源上相互占用并请求锁定对方占用的资源而导致恶性循环的现象。当多个事务试图以不同顺序锁定资源时就可能会产生死锁，多个事务同时锁定同一个资源时也会产生死锁。</p>
</li>
<li><p>为了解决死锁问题，数据库系统实现了各种<code>死锁检测和死锁超时机制</code>。越复杂的系统，例如 InnoDB 存储引擎，越能检测到死锁的循环依赖，并立即返回一个错误。这种解决方式很有效，否则死锁会导致出现非常慢的查询。还有一种解决方法，就是当<code>查询的时间达到锁等待超时的设定后放弃锁请求</code>，这种方式通常来说不太好。InnoDB 目前处理死锁的方法是将持有最少行级排它锁的事务进行回滚。</p>
</li>
<li><p>死锁发生之后，只有<code>部分或者完全回滚其中一个事务，才能打破死锁</code>。对于事务型系统这是无法避免的，所以应用程序在设计时必须考虑如何处理死锁。大多数情况下只需要<code>重新执行因死锁回滚的事务</code>即可。</p>
</li>
</ul>
<h5 id="37-几种索引"><a href="#37-几种索引" class="headerlink" title="37. 几种索引"></a>37. 几种索引</h5><ul>
<li>自适应哈希索引</li>
</ul>
<blockquote>
<p>自适应哈希索引是 InnoDB 引擎的一个特殊功能，当它注意到某些索引值被使用的非常频繁时，会在内存中基于 B-Tree 索引之上再创键一个哈希索引，这样就让 B-Tree 索引也具有哈希索引的一些优点，比如快速哈希查找。这是一个完全自动的内部行为，用户无法控制或配置，但如果有必要可以关闭该功能。</p>
</blockquote>
<ul>
<li>空间索引：</li>
</ul>
<blockquote>
<p>MyISAM 表支持空间索引，可以用作地理数据存储。和 B-Tree 索引不同，这类索引无需前缀查询。空间索引会从所有维度来索引数据，查询时可以有效地使用任意维度来组合查询。必须使用 MySQL 的 GIS 即地理信息系统的相关函数来维护数据，但 MySQL 对 GIS 的支持并不完善，因此大部分人都不会使用这个特性。</p>
</blockquote>
<ul>
<li>全文索引：</li>
</ul>
<blockquote>
<p>通过数值比较、范围过滤等就可以完成绝大多数需要的查询，但如果希望通过关键字匹配进行查询，就需要基于相似度的查询，而不是精确的数值比较，全文索引就是为这种场景设计的。</p>
<p>MyISAM 的全文索引是一种特殊的 B-Tree 索引，一共有两层。第一层是所有关键字，然后对于每一个关键字的第二层，包含的是一组相关的 “文档指针”。全文索引不会索引文档对象中的所有词语，它会根据规则过滤掉一些词语，例如停用词列表中的词都不会被索引。</p>
</blockquote>
<ul>
<li>覆盖索引：</li>
</ul>
<blockquote>
<p>覆盖索引指一个索引包含或覆盖了所有需要查询的字段的值，不再需要根据索引回表查询数据。覆盖索引必须要存储索引列的值，因此 MySQL 只能使用 B-Tree 索引做覆盖索引。</p>
<p>优点：① 索引条目通常远小于数据行大小，可以极大减少数据访问量。② 因为索引按照列值顺序存储，所以对于 IO 密集型防伪查询回避随机从磁盘读取每一行数据的 IO 少得多。③ 由于 InnoDB 使用聚簇索引，覆盖索引对 InnoDB 很有帮助。InnoDB 的二级索引在叶子节点保存了行的主键值，如果二级主键能覆盖查询那么可以避免对主键索引的二次查询。</p>
</blockquote>
<h4 id="Resource"><a href="#Resource" class="headerlink" title="Resource"></a>Resource</h4><ul>
<li><a href="https://segmentfault.com/a/1190000013517914" target="_blank" rel="noopener">https://segmentfault.com/a/1190000013517914</a></li>
<li><a href="https://www.cnblogs.com/yyyyfly1/archive/2022/03/11/15993267.html" target="_blank" rel="noopener">https://www.cnblogs.com/yyyyfly1/archive/2022/03/11/15993267.html</a></li>
<li><a href="https://www.nowcoder.com/discuss/135748" target="_blank" rel="noopener">https://www.nowcoder.com/discuss/135748</a></li>
<li><a href="https://segmentfault.com/a/1190000023827696" target="_blank" rel="noopener">https://segmentfault.com/a/1190000023827696</a>  redolog, undolog, binlog</li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liudongdong1.github.io" rel="external nofollow noreferrer">liudongdong1</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liudongdong1.github.io/2022/03/30/bian-cheng-yu-yan/mian-jing/mian-jing-shu-ju-ku/">https://liudongdong1.github.io/2022/03/30/bian-cheng-yu-yan/mian-jing/mian-jing-shu-ju-ku/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="https://liudongdong1.github.io" target="_blank">liudongdong1</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Mysql/">
                                    <span class="chip bg-color">Mysql</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo,douban" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2022/04/01/bian-cheng-yu-yan/c-yu-yan/c-bian-cheng-gui-fan/">
                    <div class="card-image">
                        
                        <img src="https://cdn.pixabay.com/photo/2021/07/25/05/39/daylily-6490922__340.jpg" class="responsive-img" alt="C编程规范">
                        
                        <span class="card-title">C编程规范</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
开发人员对正确性、健壮性、可靠性、效率、易用性、可读性（可理解性）、可扩展性、 可复用性、兼容性、可移植性等质量属性了如指掌.

1. 文件结构.1. 版本及声明/* 
* Copyright (c) 2001,上海贝尔有限公司网络应用事
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-04-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" class="post-category">
                                    编程语言
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/C/">
                        <span class="chip bg-color">C</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/03/24/bian-cheng-yu-yan/mian-jing/mian-jing-docker/">
                    <div class="card-image">
                        
                        <img src="https://cdn.pixabay.com/photo/2022/03/21/08/49/salix-caprea-7082638__340.jpg" class="responsive-img" alt="面经_docker">
                        
                        <span class="card-title">面经_docker</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            

Docker 容器是轻量级的虚拟技术，占用更少系统资源。
使用 Docker 容器，不同团队（如开发、测试，运维）之间更容易合作。
可以在任何地方部署 Docker 容器，比如在任何物理和虚拟机上，甚至在云上。
由于 Docker 容器
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-03-24
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1/" class="post-category">
                                    框架设计
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Docker/">
                        <span class="chip bg-color">Docker</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <!-- <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="463294659"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>
            <a href="https://liudongdong1.github.io" target="_blank">liudongdong</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">1413.4k</span>&nbsp;字
            
            
            
            
            
            
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/liudongdong1/" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:3463264078@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>














    <a href="https://blog.csdn.net/liudongdong19/" class="tooltipped" target="_blank" data-tooltip="关注我的CSDN: https://blog.csdn.net/liudongdong19/" data-position="top" data-delay="50">
        <i class="fab fa-csdn">C</i>
    </a>





</div>
    </div>
</footer>

<div class="progress-bar"></div>
 -->

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script type="text/javascript" src="/js/CFS.Snow.min.js"></script>
    <!-- 点击爆灯效果 -->
    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
    <script type="text/javascript" src="/js/fireworks.js"></script>
    <!--动态线条背景-->
    <script type="text/javascript"
        color="122 103 238" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
    </script>
    <!-- 天气 -->
    <!-- weather -->
    <!-- weather -->
    <script type="text/javascript">
         WIDGET = {FID: 'knAMQaFanP'}
    </script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon-refresh.min.js" async="async"></script>
    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    
    <!-- {% include '_custom/custom.swig' %} -->

</body>

</html>
