<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Kubernetes-存储介绍, AIOT,Space&amp;Temporal Sequence Analysis,SpringBoot,liudongdong1,cloud">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Kubernetes-存储介绍 | DaybyDay</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="DaybyDay" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">DaybyDay</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">

      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/about">
          
          <i class="fas fa-user-circle" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>about</span>
        </a>
      </li>
      
      <li>
        <a href="/resume">
          
          <i class="fa fa-user-secret" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>resume</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/gallery" class="waves-effect waves-light">
      
      <i class="fas fa-camera" style="zoom: 0.6;"></i>
      
      <span>Galleries</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">DaybyDay</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-user-circle"></i>
			
			About
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/about " style="margin-left:75px">
				  
				   <i class="fa fas fa-user-circle" style="position: absolute;left:50px" ></i>
			      
		          <span>about</span>
                  </a>
                </li>
              
                <li>

                  <a href="/resume " style="margin-left:75px">
				  
				   <i class="fa fa fa-user-secret" style="position: absolute;left:50px" ></i>
			      
		          <span>resume</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/gallery" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-camera"></i>
			
			Galleries
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/liudongdong1" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/liudongdong1" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.pixabay.com/photo/2021/08/25/05/01/boat-6572384__340.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Kubernetes-存储介绍</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    .toc-fixed .toc-link::before{
        position: fixed!important;/*当toc的位置改为fixed时，.toc-link::before也要改为fixed*/
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Storage/">
                                <span class="chip bg-color">Storage</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Storage/" class="post-category">
                                Storage
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2022-08-01
                </div>
                

                <!-- 
                    <i class="fa fa-pencil"></i> Author: liudongdong1
                  -->

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2023-01-01
                </div>
                

                <!-- 
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    2.7k
                </div>
                 -->

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    13 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="Docker插件机制-架构-amp-评价"><a href="#Docker插件机制-架构-amp-评价" class="headerlink" title="Docker插件机制-架构&amp;评价"></a>Docker插件机制-架构&amp;评价</h2><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220724085742161.png" alt=""></p>
<h3 id="Docker-volumn-插件"><a href="#Docker-volumn-插件" class="headerlink" title="Docker volumn 插件"></a>Docker volumn 插件</h3><table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
<th>地址</th>
</tr>
</thead>
<tbody><tr>
<td>Azure File Storage plugin</td>
<td>Lets you mount Microsoft Azure File Storage shares to Docker containers as volumes using the SMB 3.0 protocol. Learn more.</td>
<td><a href="https://github.com/Azure/azurefile" target="_blank" rel="noopener">https://github.com/Azure/azurefile</a> dockervolumedriver</td>
</tr>
<tr>
<td>BeeGFS Volume Plugin</td>
<td>An open source volume plugin to create persistent volumes in a BeeGFS parallel file system.</td>
<td><a href="https://github.com/RedCoolBeans/" target="_blank" rel="noopener">https://github.com/RedCoolBeans/</a> docker-volume-beegfs</td>
</tr>
<tr>
<td>Blockbridge plugin</td>
<td>A volume plugin that provides access to an extensible set of container-based persistent storage options. It supports single and multi-host Docker environments with features that include tenant isolation, automated provisioning, encryption, secure deletion, snapshots and QoS.</td>
<td><a href="https://github.com/blockbridge/blo" target="_blank" rel="noopener">https://github.com/blockbridge/blo</a> ckbridge-docker-volume</td>
</tr>
<tr>
<td>Contiv Volume Plugin</td>
<td>An open source volume plugin that provides multi-tenant, persistent, distributed storage with intent based consumption. It has support for Ceph and NFS.</td>
<td><a href="https://github.com/rancher/convoy" target="_blank" rel="noopener">https://github.com/rancher/convoy</a></td>
</tr>
<tr>
<td>DigitalOcean Block Storage plugin</td>
<td>Integrates DigitalOcean’s block storage solution into the Docker ecosystem by automatically attaching a given block storage volume to a DigitalOcean droplet and making the contents of the volume available to Docker containers running on that droplet.</td>
<td><a href="https://github.com/omallo/docker" target="_blank" rel="noopener">https://github.com/omallo/docker</a> volume-plugin-dostorage</td>
</tr>
<tr>
<td>DRBD plugin</td>
<td>A volume plugin that provides highly available storage replicated by DRBD. Data written to the docker volume is replicated in a cluster of DRBD nodes.</td>
<td><a href="https://www.drbd.org/en/supporte" target="_blank" rel="noopener">https://www.drbd.org/en/supporte</a> d-projects/docker</td>
</tr>
<tr>
<td>Flocker plugin</td>
<td>A volume plugin that provides multi-host portable volumes for Docker, enabling you to run databases and other stateful containers and move them around across a cluster of machines.</td>
<td><a href="https://clusterhq.com/docker" target="_blank" rel="noopener">https://clusterhq.com/docker</a> plugin/</td>
</tr>
<tr>
<td>Fuxi Volume Plugin</td>
<td>A volume plugin that is developed as part of the OpenStack Kuryr project and implements the Docker volume plugin API by utilizing Cinder, the OpenStack block storage service.</td>
<td><a href="https://github.com/openstack/fuxi" target="_blank" rel="noopener">https://github.com/openstack/fuxi</a></td>
</tr>
<tr>
<td>gce-docker plugin</td>
<td>A volume plugin able to attach, format and mount Google Compute persistent-disks.</td>
<td><a href="https://github.com/mcuadros/gce" target="_blank" rel="noopener">https://github.com/mcuadros/gce</a> docker</td>
</tr>
<tr>
<td>GlusterFS plugin</td>
<td>A volume plugin that provides multi-host volumes management for Docker using GlusterFS.</td>
<td><a href="https://github.com/calavera/docker" target="_blank" rel="noopener">https://github.com/calavera/docker</a> -volume-glusterfs</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>Horcrux Volume Plugin</th>
<th>A volume plugin that allows on-demand, version controlled access to your data. Horcrux is an open-source plugin, written in Go, and supports SCP, Minio and Amazon S3.</th>
<th><a href="https://github.com/muthu-r/horcrux" target="_blank" rel="noopener">https://github.com/muthu-r/horcrux</a></th>
</tr>
</thead>
<tbody><tr>
<td>HPE 3Par Volume Plugin</td>
<td>A volume plugin that supports HPE 3Par and StoreVirtual iSCSI storage arrays.</td>
<td><a href="https://github.com/hpe" target="_blank" rel="noopener">https://github.com/hpe</a> storage/python-hpedockerplugin/ -</td>
</tr>
<tr>
<td>Infinit volume plugin</td>
<td>A volume plugin that makes it easy to mount and manage Infinit volumes using Docker.</td>
<td><a href="https://infinit.sh/documentation/dock" target="_blank" rel="noopener">https://infinit.sh/documentation/dock</a> er/volume-plugin</td>
</tr>
<tr>
<td>IPFS Volume Plugin</td>
<td>An open source volume plugin that allows using an ipfs filesystem as a volume.</td>
<td><a href="http://github.com/vdemeester/docker" target="_blank" rel="noopener">http://github.com/vdemeester/docker</a> -volume-ipfs</td>
</tr>
<tr>
<td>Keywhiz plugin</td>
<td>A plugin that provides credentials and secret management using Keywhiz as a central repository.</td>
<td><a href="https://github.com/calavera/docker" target="_blank" rel="noopener">https://github.com/calavera/docker</a> volume-keywhiz</td>
</tr>
<tr>
<td>Local Persist Plugin</td>
<td>A volume plugin that extends the default local driver’s functionality by allowing you specify a mountpoint anywhere on the host, which enables the files to always persist, even if the volume is removed via docker volume rm.</td>
<td><a href="https://github.com/CWSpear/local" target="_blank" rel="noopener">https://github.com/CWSpear/local</a> persist</td>
</tr>
<tr>
<td>NetApp Plugin(nDVP)</td>
<td>A volume plugin that provides direct integration with the Docker ecosystem for the NetApp storage portfolio. The nDVP package supports the provisioning and management of storage resources from the storage platform to Docker hosts, with a robust framework for adding additional platforms in the future.</td>
<td><a href="https://github.com/NetApp/netappdv" target="_blank" rel="noopener">https://github.com/NetApp/netappdv</a> p</td>
</tr>
<tr>
<td>Netshare plugin</td>
<td>A volume plugin that provides volume management for NFS 3/4, AWS EFS and CIFS file systems.</td>
<td><a href="https://github.com/ContainX/docker" target="_blank" rel="noopener">https://github.com/ContainX/docker</a> volume-netshare</td>
</tr>
<tr>
<td>Nimble Storage Volume Plugin</td>
<td>A volume plug-in that integrates with Nimble Storage Unified Flash Fabric arrays. The plug-in abstracts array volume capabilities to the Docker administrator to allow self-provisioning of secure multi-tenant volumes and clones.</td>
<td><a href="https://connect.nimblestorage.com/co" target="_blank" rel="noopener">https://connect.nimblestorage.com/co</a> mmunity/app-integration/dockerOpenStorage Plugin</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>OpenStorage Plugin</th>
<th>A cluster-aware volume plugin that provides volume management for file and block storage solutions. It implements a vendor neutral specification for implementing extensions such as CoS, encryption, and snapshots. It has example drivers based on FUSE, NFS, NBD and EBS to name a few.</th>
<th><a href="https://github.com/libopenstorage/" target="_blank" rel="noopener">https://github.com/libopenstorage/</a> openstorage</th>
</tr>
</thead>
<tbody><tr>
<td>Portworx Volume Plugin</td>
<td>A volume plugin that turns any server into a scale-out converged compute/storage node, providing container granular storage and highly available volumes across any node, using a shared-nothing storage backend that works with any docker scheduler.</td>
<td><a href="https://github.com/portworx/px" target="_blank" rel="noopener">https://github.com/portworx/px</a> dev</td>
</tr>
<tr>
<td>Quobyte Volume Plugin</td>
<td>A volume plugin that connects Docker to Quobyte’s data center file system, a general-purpose scalable and fault-tolerant storage platform.</td>
<td><a href="https://github.com/quobyte/docker" target="_blank" rel="noopener">https://github.com/quobyte/docker</a> -volume</td>
</tr>
<tr>
<td>REX-Ray plugin</td>
<td>A volume plugin which is written in Go and provides advanced storage functionality for many platforms including VirtualBox, EC2, Google Compute Engine, OpenStack, and EMC.</td>
<td><a href="https://github.com/emccode/rexray" target="_blank" rel="noopener">https://github.com/emccode/rexray</a></td>
</tr>
<tr>
<td>Virtuozzo Storage and Ploop plugin</td>
<td>A volume plugin with support for Virtuozzo Storage distributed cloud file system as well as ploop devices.</td>
<td><a href="https://github.com/virtuozzo/docke" target="_blank" rel="noopener">https://github.com/virtuozzo/docke</a> r-volume-ploop</td>
</tr>
<tr>
<td>VMware vSphere Storage Plugin</td>
<td>Docker Volume Driver for vSphere enables customers to address persistent storage requirements for Docker containers in vSphere environments.</td>
<td><a href="https://github.com/vmware/docker" target="_blank" rel="noopener">https://github.com/vmware/docker</a> volume-vsphere</td>
</tr>
</tbody></table>
<h2 id="K8S-存储能力-Volume概述"><a href="#K8S-存储能力-Volume概述" class="headerlink" title="K8S 存储能力-Volume概述"></a>K8S 存储能力-Volume概述</h2><ul>
<li>K8S中的<code>普通Volume</code>提供了在容器中挂卷的能力，它不是独立的K8S资源对象，<code>不能通过k8s去管理（创建、删除等）</code>，只能在创建Pod时去引用。</li>
<li>Pod需要设置<code>卷来源（ spec.volume ） 和挂载点（ spec.containers.volumeMounts ）</code> 两个信息后才可以使用相应的Volume。</li>
</ul>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YMSAFuccAAGVhqcxzgU330.png" alt=""></p>
<h3 id="K8S-存储能力：-In-Tree-Volume-Plugins"><a href="#K8S-存储能力：-In-Tree-Volume-Plugins" class="headerlink" title="K8S 存储能力： In-Tree Volume Plugins"></a>K8S 存储能力： In-Tree Volume Plugins</h3><blockquote>
<p>K8S的VolumePlugin提供了<code>插件化扩展存储的机制</code>，分为内置插件（In-Tree Plugins）和外置插件（Out-of-Tree） 两种</p>
</blockquote>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>awsElasticBlockStore</td>
<td>mounts an Amazon Web Services (AWS) EBS Volume (Elastic Block Store)</td>
</tr>
<tr>
<td>azureDisk</td>
<td>is used to mount a Microsoft Azure Data Disk into a Pod.</td>
</tr>
<tr>
<td>azureFile</td>
<td>is used to mount a Microsoft Azure File Volume (SMB 2.1 and 3.0) into a Pod.</td>
</tr>
<tr>
<td><code>cephfs</code></td>
<td>allows an existing CephFS volume to be mounted into your pod.</td>
</tr>
<tr>
<td>cinder</td>
<td>is used to mount OpenStack Block Storage into a pod.</td>
</tr>
<tr>
<td><code>configMap</code></td>
<td>The data stored in a ConfigMap object can be referenced in a volume of type configMap and then consumed by containerized applications running in a Pod.</td>
</tr>
<tr>
<td>downwardAPI</td>
<td>is used to make downward API data available to applications. It mounts a directory and writes the requested data in plain text files</td>
</tr>
<tr>
<td>emptyDir</td>
<td>is first created when a Pod is assigned to a Node, and exists as long as that Pod is running on that node. When a Pod is removed from a node for any reason, the data in the emptyDir is deleted forever.</td>
</tr>
<tr>
<td>fc (fibre channel)</td>
<td>allows an existing fibre channel volume to be mounted in a pod</td>
</tr>
<tr>
<td>flocker</td>
<td>allows a Flocker dataset to be mounted into a pod.</td>
</tr>
<tr>
<td>gcePersistentDisk</td>
<td>mounts a Google Compute Engine (GCE) Persistent Disk into your pod.</td>
</tr>
<tr>
<td>gitRepo</td>
<td>mounts an empty directory and clones a git repository into it for your pod to use.</td>
</tr>
<tr>
<td><code>glusterfs</code></td>
<td>allows a Glusterfs (an open source networked filesystem) volume to be mounted into your pod</td>
</tr>
<tr>
<td><code>hostPath</code></td>
<td>mounts a file or directory from the host node’s filesystem into your pod.</td>
</tr>
<tr>
<td><code>iscsi</code></td>
<td>allows an existing iSCSI (SCSI over IP) volume to be mounted into your pod</td>
</tr>
<tr>
<td><code>local</code></td>
<td>represents a mounted local storage device such as a disk, partition or directory. can only be used as a statically created PersistentVolume.</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>nfs</code></td>
<td>allows an existing NFS (Network File System) share to be mounted into your pod</td>
</tr>
<tr>
<td><code>persistentVolumeClaim</code></td>
<td>is used to mount a PersistentVolume into a pod.</td>
</tr>
<tr>
<td>projected</td>
<td>maps several existing volume sources into the same directory.</td>
</tr>
<tr>
<td><code>portworxVolume</code></td>
<td>can be dynamically created through Kubernetes or it can also be pre-provisioned and referenced inside a Kubernetes pod.</td>
</tr>
<tr>
<td>quobyte</td>
<td>allows an existing Quobyte volume to be mounted into your pod.</td>
</tr>
<tr>
<td>rbd</td>
<td>allows a Rados Block Device volume to be mounted into your pod.</td>
</tr>
<tr>
<td>scaleIO</td>
<td>ScaleIO is a software-based storage platform that can use existing hardware to create clusters of scalable shared block networked storage. The ScaleIO volume plugin allows deployed pods to access existing ScaleIO volumes</td>
</tr>
<tr>
<td>secret</td>
<td>is used to pass sensitive information, such as passwords, to pods</td>
</tr>
<tr>
<td>storageos</td>
<td>allows an existing StorageOS volume to be mounted into your pod. StorageOS provides block storage to containers, accessible via a file system.</td>
</tr>
<tr>
<td>vsphereVolume</td>
<td>used to mount a vSphere VMDK Volume into your Pod.</td>
</tr>
</tbody></table>
<h3 id="K8S-存储能力-PersistentVolume"><a href="#K8S-存储能力-PersistentVolume" class="headerlink" title="K8S 存储能力-PersistentVolume  **"></a>K8S 存储能力-PersistentVolume  **</h3><blockquote>
<p>Kubernetes通过Persistent Volume子系统API对管理员和用户提供了存储资源创建和使用的抽象</p>
<ul>
<li><code>FlexVolume: 此Volume Driver允许不同厂商去开发他们自己的驱动来挂载卷到计算节点</code></li>
<li>PersistentVolumeClaim： K8提供的资源抽象的Volume Driver，让用户不用关心具体的Volume的实现细节</li>
</ul>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YMWAPt5SAAHnN6RtcJw960.png" alt=""></p>
<h3 id="K8S-FlexVolume存储扩展机制"><a href="#K8S-FlexVolume存储扩展机制" class="headerlink" title="K8S FlexVolume存储扩展机制"></a>K8S FlexVolume存储扩展机制</h3><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YMeAcOhmAAIU1aMDRxU941.png" alt=""></p>
<h4 id="Flex-Volume-Driver部署脚本和配置"><a href="#Flex-Volume-Driver部署脚本和配置" class="headerlink" title="Flex Volume Driver部署脚本和配置"></a>Flex Volume Driver部署脚本和配置</h4><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YMiAQ_4JAAK-YG1tcjA886.png" alt=""></p>
<h4 id="Flex-Volume-CLI-API"><a href="#Flex-Volume-CLI-API" class="headerlink" title="Flex Volume CLI API"></a>Flex Volume CLI API</h4><table>
<thead>
<tr>
<th>步骤</th>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Init</td>
<td><driver executable> init</td>
<td>初始化驱动。在Kubelet和Controller-Manager初始化时被调用。若调用成功则需要返回一个展示对应驱动 所支持的FlexVolume能力的map，现在只包含一个必填字段attach，用于表明本驱动是否需要attach和 detach操作。为向后兼容该字段一般默认值设为true。</td>
</tr>
<tr>
<td>Attach</td>
<td><driver executable> attach <json options> <node name></td>
<td>将给定<code>规格的卷添加到给定的主机上</code>。若调用成功则返回存储设备添加到该主机的路径。 Kubelet和 Controller-Manager都需要调用该方法。</td>
</tr>
<tr>
<td>Detach</td>
<td><driver executable> detach <mount device> <node name></td>
<td><code>卸载给定主机上的指定卷</code>。 Kubelet和Controller-Manager都需要调用该方法。</td>
</tr>
<tr>
<td>Wait for attach</td>
<td><driver executable> waitforattach <mount device> <json options></td>
<td>等待卷被添加到远程节点。若调用成功则将返回设备路径。 Kubelet和Controller-Manager都需要调用该方 法。</td>
</tr>
<tr>
<td>Volume is Attached</td>
<td><driver executable> isattached <json options> <node name></td>
<td>检查卷是否已被添加到节点上。 Kubelet和Controller-Manager都需要调用该方法。</td>
</tr>
<tr>
<td>Mount device</td>
<td><driver executable> mountdevice <mount dir> <mount device> <json options></td>
<td>将存储设备挂载到一个将被pod使用的全局路径上。 Kubelet需要调用该方法。</td>
</tr>
<tr>
<td>Unmount device</td>
<td><driver executable> unmountdevice <mount device></td>
<td>将存储设备卸载。 This is called once all bind mounts have been unmounted. Kubelet需要调用该方法。</td>
</tr>
<tr>
<td>Mount</td>
<td><driver executable> mount <mount dir> <json options></td>
<td>将卷挂载到指定目录。 Kubelet需要调用该方法。</td>
</tr>
<tr>
<td>Unmount</td>
<td><driver executable> unmount <mount dir></td>
<td>将卷进行卸载。 Kubelet需要调用该方法。</td>
</tr>
</tbody></table>
<h3 id="K8S-CSI存储扩展机制"><a href="#K8S-CSI存储扩展机制" class="headerlink" title="K8S CSI存储扩展机制"></a>K8S CSI存储扩展机制</h3><h4 id="相关术语"><a href="#相关术语" class="headerlink" title="相关术语"></a>相关术语</h4><table>
<thead>
<tr>
<th>术语</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>CO</td>
<td><code>容器编排系统（Container Orchestrator），使用CSI gRPC服务来与插件通信</code></td>
</tr>
<tr>
<td>RPC</td>
<td>远程方法调用（Remote Procedure Call）</td>
</tr>
<tr>
<td>Plugin</td>
<td><code>插件实现，实现CSI服务的gRPC访问端点</code></td>
</tr>
<tr>
<td>SP</td>
<td><code>存储提供商（Storage Provider），负责提供CSI插件实现</code></td>
</tr>
<tr>
<td>Volume</td>
<td>卷， CO管理的容器可使用的存储单元</td>
</tr>
<tr>
<td>Block Volume</td>
<td>块设备卷</td>
</tr>
<tr>
<td>Mounted Volume</td>
<td>使用指定文件系统挂载到容器的卷，并显示为容器内的一个目录</td>
</tr>
<tr>
<td>Workload</td>
<td>工作负载，是CO任务调度的基本单元，可以是一个或一组容器</td>
</tr>
<tr>
<td>Node</td>
<td>用户运行工作负载的主机，从插件的角度通过节点 ID来进行唯一标识</td>
</tr>
<tr>
<td>In-Tree</td>
<td>内置的，存在于K8S核心代码仓库内的代码</td>
</tr>
<tr>
<td>Out-Of-Tree</td>
<td>外置的，存在于K8S核心代码仓库外的代码</td>
</tr>
<tr>
<td><code>CSI Volume Plugin</code></td>
<td>一个新的内置卷插件，<code>作为一个适配器来使得外置的第三方CSI卷驱动可以被K8S所使用</code></td>
</tr>
<tr>
<td><code>CSI Volume Driver</code></td>
<td>一个外置的<code>CSI兼容的卷插件驱动，可通过K8S卷插件被K8S所使用</code></td>
</tr>
</tbody></table>
<h4 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h4><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YMuAYLgxAAPBh01e6ho175.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YM6AYc2MAAOZ2lzpExk611.png" alt=""></p>
<h3 id="CSI通用架构"><a href="#CSI通用架构" class="headerlink" title="CSI通用架构"></a>CSI通用架构</h3><blockquote>
<p>CO通过gRPC与插件交互，每个SP必须实现以下两个plugin：<br>• Node Plugin： 需要<code>运行在使用Volume的Node上</code>，主要负责V<code>olume Mount/Unmount等操作</code><br>• Controller Plugin：可以<code>运行在任何节点</code>上，主要负责<code>Volume Creation/Deletion、 Attach/Detach等操作</code></p>
</blockquote>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YM-AZl2pAAGOv1eyoAM156.png" alt=""></p>
<h4 id="CO与Plugin的交互过程"><a href="#CO与Plugin的交互过程" class="headerlink" title="CO与Plugin的交互过程"></a>CO与Plugin的交互过程</h4><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YNGAXx2hAAJgsrqp3tI355.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YNOAT6hLAAMXkmm6Yd4767.png" alt="img"></p>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YNWAV8XtAAKAk8WL-NM148.png" alt=""></p>
<p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YNaAa6uwAAJWvv4dhwk488.png" alt=""></p>
<h4 id="卷生命周期"><a href="#卷生命周期" class="headerlink" title="卷生命周期"></a>卷生命周期</h4><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YNeABj33AADssTtyNGc569.png" alt="img"></p>
<h3 id="RPC-接口集合"><a href="#RPC-接口集合" class="headerlink" title="RPC 接口集合"></a>RPC 接口集合</h3><ul>
<li>Identity Service： Node Plugin和Controller Plugin都需要实现的RPC集合，<ul>
<li>身份服务RPC允许CO查询插件的功能，健康状况和其他元数据。</li>
</ul>
</li>
<li>Controller Service： Controller Plugin需要实现的RPC集合<ul>
<li>控制服务RPC提供卷的<code>创建、删除、 Attach、 Detach、查询</code>等功能，以及<code>卷快照的创建、删除、查询</code>等功能</li>
</ul>
</li>
<li>Node Service： Node Plugin需要实现的RPC集合<ul>
<li>将卷mount 到制定全局路径，在NodePublishVolume之前，每个卷/节点执行一次</li>
<li>将卷从指定全局路径umount</li>
<li>将卷从制定的全局路径mount到目标路径，在NodePublishVolume之前，每个卷/节点执行一次</li>
<li>将卷从指定目标路径unmount</li>
</ul>
</li>
</ul>
<h2 id="K8S-CSI架构"><a href="#K8S-CSI架构" class="headerlink" title="K8S CSI架构"></a>K8S CSI架构</h2><p><img src="https://gitee.com/github-25970295/blogimgv2022/raw/master/rBAADF80YN-ADt2aAAP1iSVfOCM122.png" alt=""></p>
<p>为了部署一个容器化的第三方CSI volume driver，存储提供商需要执行如下操作：</p>
<ol>
<li>创建一个实现CSI规范描述的插件功能，并通过Unix套接字来暴露gPRC访问接口的”CSI volume driver” 容器；</li>
<li>结合使用K8S团队提供的帮助容器来部署CSI volume driver，具体需要创建如下两类K8S对象：<ol>
<li>StatefulSet：用于与K8S控制器进行交互，实例数1，包含3个容器（ CSI volume driver、 external-attacher 、 external provisioner ），需要挂载一个挂载点为/var/lib/csi/sockets/pluginproxy/的emptyDir volume</li>
<li>DaemonSet ：包含2个容器（ CSI volumedriver、 K8S CSI Helper），挂载3个hostpath volume</li>
</ol>
</li>
<li>集群管理员为存储系统在K8S集群中部署上述StatefulSet和DaemonSet</li>
</ol>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liudongdong1.github.io" rel="external nofollow noreferrer">liudongdong1</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liudongdong1.github.io/2022/08/01/cun-chu-she-ji/xu-ni-hua-ji-zhu/kubernetes-cun-chu-jie-shao/">https://liudongdong1.github.io/2022/08/01/cun-chu-she-ji/xu-ni-hua-ji-zhu/kubernetes-cun-chu-jie-shao/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="https://liudongdong1.github.io" target="_blank">liudongdong1</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Storage/">
                                    <span class="chip bg-color">Storage</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo,douban" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2022/08/01/cun-chu-she-ji/xu-ni-hua-ji-zhu/kubernetes-cun-chu-nfs-shi-jian/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.jpg" class="responsive-img" alt="Kubernetes-存储NFS实践">
                        
                        <span class="card-title">Kubernetes-存储NFS实践</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            一、storage存储原理
二、storage存储实战2.1 安装nfs存储集群#所有机器安装
yum install -y nfs-utils

#nfs主节点
echo "/nfs/data/ *(insecure,rw,sync,no
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-08-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Storage/" class="post-category">
                                    Storage
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Storage/">
                        <span class="chip bg-color">Storage</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/07/31/bian-cheng-yu-yan/c-yu-yan/bing-fa-bian-cheng/kai-yuan-xiang-mu-margo/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/22.jpg" class="responsive-img" alt="开源项目-Margo">
                        
                        <span class="card-title">开源项目-Margo</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
  d686cb0a25b96ced5ce99713a9124a672af07c4932ce8f6b254ba7b44eeb99d692e13ebf07f33dcdd599d32c66b933ee93acf8c59740387cdc61e
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-07-31
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%AF%AD%E8%A8%80%E6%A1%86%E6%9E%B6/" class="post-category">
                                    语言框架
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/c/">
                        <span class="chip bg-color">c</span>
                    </a>
                    
                    <a href="/tags/%E5%B9%B6%E5%8F%91/">
                        <span class="chip bg-color">并发</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <!-- <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="463294659"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>
            <a href="https://liudongdong1.github.io" target="_blank">liudongdong</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">1315.9k</span>&nbsp;字
            
            
            
            
            
            
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/liudongdong1/" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:3463264078@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>














    <a href="https://blog.csdn.net/liudongdong19/" class="tooltipped" target="_blank" data-tooltip="关注我的CSDN: https://blog.csdn.net/liudongdong19/" data-position="top" data-delay="50">
        <i class="fab fa-csdn">C</i>
    </a>





</div>
    </div>
</footer>

<div class="progress-bar"></div>
 -->

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script type="text/javascript" src="/js/CFS.Snow.min.js"></script>
    <!-- 点击爆灯效果 -->
    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
    <script type="text/javascript" src="/js/fireworks.js"></script>
    <!--动态线条背景-->
    <script type="text/javascript"
        color="122 103 238" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
    </script>
    <!-- 天气 -->
    <!-- weather -->
    <!-- weather -->
    <script type="text/javascript">
         WIDGET = {FID: 'knAMQaFanP'}
    </script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon-refresh.min.js" async="async"></script>
    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    
    <!-- {% include '_custom/custom.swig' %} -->

</body>

</html>
