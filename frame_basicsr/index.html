<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Frame_BasicSR - DAY By DAY</title><meta name=author content="LiuDongdong"><meta name=author-link content="https://liudongdong1.github.io/"><meta name=description content="BasicSR (Basic Super Restoration) 是一个基于 PyTorch 的开源图像视频复原工具箱, 比如 超分辨率, 去噪, 去模糊, 去 JPEG 压缩噪声等. Real-ESRGAN: 通用图像复原的实用算法 GFPGAN: 真实场景人脸复原的实用算"><meta name=keywords content="CV,basicSR"><meta itemprop=name content="Frame_BasicSR"><meta itemprop=description content="BasicSR (Basic Super Restoration) 是一个基于 PyTorch 的开源图像视频复原工具箱, 比如 超分辨率, 去噪, 去模糊, 去 JPEG 压缩噪声等. Real-ESRGAN: 通用图像复原的实用算法 GFPGAN: 真实场景人脸复原的实用算"><meta itemprop=datePublished content="2021-10-23T21:45:45+00:00"><meta itemprop=dateModified content="2023-09-28T23:07:35+08:00"><meta itemprop=wordCount content="5588"><meta itemprop=image content="/logo.png"><meta itemprop=keywords content="CV,basicSR,"><meta property="og:title" content="Frame_BasicSR"><meta property="og:description" content="BasicSR (Basic Super Restoration) 是一个基于 PyTorch 的开源图像视频复原工具箱, 比如 超分辨率, 去噪, 去模糊, 去 JPEG 压缩噪声等. Real-ESRGAN: 通用图像复原的实用算法 GFPGAN: 真实场景人脸复原的实用算"><meta property="og:type" content="article"><meta property="og:url" content="liudongdong1.github.io/frame_basicsr/"><meta property="og:image" content="/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-10-23T21:45:45+00:00"><meta property="article:modified_time" content="2023-09-28T23:07:35+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/logo.png"><meta name=twitter:title content="Frame_BasicSR"><meta name=twitter:description content="BasicSR (Basic Super Restoration) 是一个基于 PyTorch 的开源图像视频复原工具箱, 比如 超分辨率, 去噪, 去模糊, 去 JPEG 压缩噪声等. Real-ESRGAN: 通用图像复原的实用算法 GFPGAN: 真实场景人脸复原的实用算"><meta name=application-name content="DAY By DAY"><meta name=apple-mobile-web-app-title content="DAY By DAY"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=liudongdong1.github.io/frame_basicsr/><link rel=prev href=liudongdong1.github.io/gcc/><link rel=next href=liudongdong1.github.io/timemeasure/><link rel=stylesheet href=/liudongdong1.github.io/css/style.min.css><link rel=stylesheet href=/liudongdong1.github.io/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/liudongdong1.github.io/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Frame_BasicSR","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"liudongdong1.github.io\/frame_basicsr\/"},"genre":"posts","keywords":"CV, basicSR","wordcount":5588,"url":"liudongdong1.github.io\/frame_basicsr\/","datePublished":"2021-10-23T21:45:45+00:00","dateModified":"2023-09-28T23:07:35+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"LiuDongdong","logo":"\/images\/person.png"},"author":{"@type":"Person","name":"liudongdong1"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=liudongdong1.github.io/ title="DAY By DAY"><img class="lazyload logo" src=/liudongdong1.github.io/svg/loading.min.svg data-src=/fixit.min.svg data-srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" data-sizes=auto alt="DAY By DAY" title="DAY By DAY"><span class=header-title-text></span></a><span id=typeit-header-subtitle-desktop class="typeit header-subtitle"></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/friends/ title=友情链接><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item language"><span role=button aria-label=选择语言 title=选择语言>简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item>没有更多翻译</li></ul></li><li class="menu-item search" id=search-desktop><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=liudongdong1.github.io/ title="DAY By DAY"><img class="lazyload logo" src=/liudongdong1.github.io/svg/loading.min.svg data-src=/fixit.min.svg data-srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x" data-sizes=auto alt=/fixit.min.svg title=/fixit.min.svg><span class=header-title-text></span></a><span id=typeit-header-subtitle-mobile class="typeit header-subtitle"></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="搜索文章标题或内容 ..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/friends/ title=友情链接><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden=true></i> 友链</a></li><li class=menu-item><a class=menu-link href=/liudongdong1.github.io/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item text-center"><a class=menu-link href=https://liudongdong1.github.io/ title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw' aria-hidden=true></i></a></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language"><span role=button aria-label=选择语言 title=选择语言>简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option disabled>没有更多翻译</option></select></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container data-page-style=normal><aside class=toc id=toc-auto><h2 class=toc-title>目录 <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom id=aside-sakana><div class=sakana-widget><div class=sakana-item id=takina-widget></div><div class=sakana-item id=chisato-widget></div></div><script>function initSakanaWidget(){const e=SakanaWidget.getCharacter("takina");SakanaWidget.registerCharacter("takina-slow",e),new SakanaWidget({character:"takina-slow",controls:!1,autoFit:!0,stroke:{color:"#b4b4b4",width:2}}).mount("#takina-widget");const t=SakanaWidget.getCharacter("chisato");SakanaWidget.registerCharacter("chisato-slow",t),new SakanaWidget({character:"chisato-slow",controls:!1,autoFit:!0,stroke:{color:"#b4b4b4",width:2}}).mount("#chisato-widget")}</script><script async onload=initSakanaWidget() src=https://cdn.jsdelivr.net/npm/sakana-widget@2.3.0/lib/sakana.min.js></script></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Frame_BasicSR</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
liudongdong1</span></span>
<span class=post-category>收录于 <a href=liudongdong1.github.io/categories/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;Categories</a>&ensp;<a href=liudongdong1.github.io/categories/ai/><i class="fa-regular fa-folder fa-fw"></i>&nbsp;AI</a></span></div><div class=post-meta-line><span title="2021-10-23 21:45:45"><i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-10-23>2021-10-23</time>
</span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;约 5588 字&nbsp;
<i class="fa-regular fa-clock fa-fw"></i>&nbsp;预计阅读 12 分钟&nbsp;<span id=busuanzi_container_page_pv class="busuanzi_visitors comment-visitors" data-flag-title=Frame_BasicSR>
<i class="fa-regular fa-eye fa-fw"></i>&nbsp;<span id=busuanzi_value_page_pv>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class=featured-image><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://cdn.stocksnap.io/img-thumbs/280h/5U2FV0UNXF.jpg data-srcset="https://cdn.stocksnap.io/img-thumbs/280h/5U2FV0UNXF.jpg, https://cdn.stocksnap.io/img-thumbs/280h/5U2FV0UNXF.jpg 1.5x, https://cdn.stocksnap.io/img-thumbs/280h/5U2FV0UNXF.jpg 2x" data-sizes=auto alt=https://cdn.stocksnap.io/img-thumbs/280h/5U2FV0UNXF.jpg title=https://cdn.stocksnap.io/img-thumbs/280h/5U2FV0UNXF.jpg></div><div class="details toc" id=toc-static kept=true><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#1-dataset>1. Dataset</a></li><li><a href=#2-models>2. Models</a></li><li><a href=#3-配置文件>3. 配置文件</a></li><li><a href=#4-logging>4. Logging</a></li><li><a href=#5-metrics-gan评价指标httpszhuanlanzhihucomp109342043>5. Metrics <a href=https://zhuanlan.zhihu.com/p/109342043>GAN评价指标</a></a></li><li><a href=#6-训练测试命令>6. 训练测试命令</a></li><li><a href=#8-代码使用解读>8. 代码使用解读</a></li><li><a href=#resource>Resource</a></li></ul></li></ul></nav></div></div><div class=content id=content><blockquote><p>BasicSR (<strong>Basic</strong> <strong>S</strong>uper <strong>R</strong>estoration) 是一个基于 PyTorch 的开源图像视频复原工具箱, 比如 超分辨率, 去噪, 去模糊, 去 JPEG 压缩噪声等.</p><ul><li><a href=https://github.com/xinntao/Real-ESRGAN target=_blank rel="external nofollow noopener noreferrer"><strong>Real-ESRGAN</strong><i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>: 通用图像复原的实用算法</li><li><a href=https://github.com/TencentARC/GFPGAN target=_blank rel="external nofollow noopener noreferrer"><strong>GFPGAN</strong><i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>: 真实场景人脸复原的实用算法</li><li><a href=https://github.com/xinntao/facexlib target=_blank rel="external nofollow noopener noreferrer">facexlib<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>: 提供实用的人脸相关功能的集合</li><li><a href=https://github.com/xinntao/HandyView target=_blank rel="external nofollow noopener noreferrer">HandyView<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>: 基于PyQt5的 方便的看图比图工具</li></ul><p>(<a href=https://github.com/xinntao/ESRGAN target=_blank rel="external nofollow noopener noreferrer">ESRGAN<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, <a href=https://github.com/xinntao/EDVR target=_blank rel="external nofollow noopener noreferrer">EDVR<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, <a href=https://github.com/xinntao/DNI target=_blank rel="external nofollow noopener noreferrer">DNI<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, <a href=https://github.com/xinntao/SFTGAN target=_blank rel="external nofollow noopener noreferrer">SFTGAN<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>)
(<a href=https://gitee.com/xinntao/HandyView target=_blank rel="external nofollow noopener noreferrer">HandyView<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, <a href=https://gitee.com/xinntao/HandyFigure target=_blank rel="external nofollow noopener noreferrer">HandyFigure<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, <a href=https://gitee.com/xinntao/HandyCrawler target=_blank rel="external nofollow noopener noreferrer">HandyCrawler<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, <a href=https://gitee.com/xinntao/HandyWriting target=_blank rel="external nofollow noopener noreferrer">HandyWriting<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>)</p></blockquote><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogpictureV2/raw/master/picture/overall_structure.png data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/picture/overall_structure.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/picture/overall_structure.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/picture/overall_structure.png 2x" data-sizes=auto alt=overall_structure title=overall_structure></p><blockquote><ol><li>准备数据. 参见 <a href=DatasetPreparation_CN.md>DatasetPreparation_CN.md</a></li><li>修改Config文件. Config文件在 <code>options</code> 目录下面. 具体的Config配置含义, 可参考 <a href=Config_CN.md>Config说明</a></li><li>[Optional] 如果是测试或需要预训练, 则需下载预训练模型, 参见 <a href=ModelZoo_CN.md>模型库</a></li><li>运行命令. 根据需要，使用 <a href=#%e8%ae%ad%e7%bb%83%e5%91%bd%e4%bb%a4>训练命令</a> 或 <a href=#%e6%b5%8b%e8%af%95%e5%91%bd%e4%bb%a4>测试命令</a></li></ol></blockquote><h3 id=1-dataset>1. Dataset</h3><h4 id=1-category>.1. Category</h4><table><thead><tr><th style=text-align:left>类</th><th style=text-align:center>任务</th><th style=text-align:center>训练/测试</th><th style=text-align:center>描述</th></tr></thead><tbody><tr><td style=text-align:left><a href=../basicsr/data/paired_image_dataset.py>PairedImageDataset</a></td><td style=text-align:center>图像超分</td><td style=text-align:center>训练</td><td style=text-align:center>支持读取成对的训练数据</td></tr><tr><td style=text-align:left><a href=../basicsr/data/single_image_dataset.py>SingleImageDataset</a></td><td style=text-align:center>图像超分</td><td style=text-align:center>测试</td><td style=text-align:center>只读取low quality的图像, 用在没有Ground-Truth的测试中</td></tr><tr><td style=text-align:left><a href=../basicsr/data/reds_dataset.py>REDSDataset</a></td><td style=text-align:center>视频超分</td><td style=text-align:center>训练</td><td style=text-align:center>REDS的训练数据集</td></tr><tr><td style=text-align:left><a href=../basicsr/data/vimeo90k_dataset.py>Vimeo90KDataset</a></td><td style=text-align:center>视频超分</td><td style=text-align:center>训练</td><td style=text-align:center>Vimeo90K的训练数据集</td></tr><tr><td style=text-align:left><a href=../basicsr/data/video_test_dataset.py>VideoTestDataset</a></td><td style=text-align:center>视频超分</td><td style=text-align:center>测试</td><td style=text-align:center>基础的视频超分测试集, 支持Vid4, REDS测试集</td></tr><tr><td style=text-align:left><a href=../basicsr/data/video_test_dataset.py>VideoTestVimeo90KDataset</a></td><td style=text-align:center>视频超分</td><td style=text-align:center>测试</td><td style=text-align:center>继承<code>VideoTestDataset</code>, Vimeo90K的测试数据集</td></tr><tr><td style=text-align:left><a href=../basicsr/data/video_test_dataset.py>VideoTestDUFDataset</a></td><td style=text-align:center>视频超分</td><td style=text-align:center>测试</td><td style=text-align:center>继承<code>VideoTestDataset</code>, 方法DUF的测试数据集, 支持Vid4</td></tr><tr><td style=text-align:left><a href=../basicsr/data/ffhq_dataset.py>FFHQDataset</a></td><td style=text-align:center>人脸生成</td><td style=text-align:center>训练</td><td style=text-align:center>FFHQ的训练数据集</td></tr></tbody></table><h4 id=2-load-type>.2. load type</h4><h5 id=1-直接读取硬盘数据>1. 直接读取硬盘数据</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>PairedImageDataset</span>
</span></span><span style=display:flex><span><span style=color:#f92672>dataroot_gt</span>: <span style=color:#ae81ff>datasets/DIV2K/DIV2K_train_HR_sub</span>
</span></span><span style=display:flex><span><span style=color:#f92672>dataroot_lq</span>: <span style=color:#ae81ff>datasets/DIV2K/DIV2K_train_LR_bicubic/X4_sub</span>
</span></span><span style=display:flex><span><span style=color:#f92672>io_backend</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>disk</span>
</span></span></code></pre></div><h5 id=2-使用lmdb>2. 使用LMDB</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>PairedImageDataset</span>
</span></span><span style=display:flex><span><span style=color:#f92672>dataroot_gt</span>: <span style=color:#ae81ff>datasets/DIV2K/DIV2K_train_HR_sub.lmdb</span>
</span></span><span style=display:flex><span><span style=color:#f92672>dataroot_lq</span>: <span style=color:#ae81ff>datasets/DIV2K/DIV2K_train_LR_bicubic_X4_sub.lmdb</span>
</span></span><span style=display:flex><span><span style=color:#f92672>io_backend</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>lmdb</span>
</span></span></code></pre></div><h5 id=3-使用memcached>3. 使用Memcached</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>type</span>: <span style=color:#ae81ff>PairedImageDataset</span>
</span></span><span style=display:flex><span><span style=color:#f92672>dataroot_gt</span>: <span style=color:#ae81ff>datasets/DIV2K_train_HR_sub</span>
</span></span><span style=display:flex><span><span style=color:#f92672>dataroot_lq</span>: <span style=color:#ae81ff>datasets/DIV2K_train_LR_bicubicX4_sub</span>
</span></span><span style=display:flex><span><span style=color:#f92672>io_backend</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>memcached</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>server_list_cfg</span>: <span style=color:#ae81ff>/mnt/lustre/share/memcached_client/server_list.conf</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>client_cfg</span>: <span style=color:#ae81ff>/mnt/lustre/share/memcached_client/client.conf</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>sys_path</span>: <span style=color:#ae81ff>/mnt/lustre/share/pymc/py3</span>
</span></span></code></pre></div><h3 id=2-models>2. Models</h3><h4 id=1-list>.1. List</h4><ul><li><strong>ECBSR training and testing</strong> codes: <a href=https://github.com/xindongzhang/ECBSR target=_blank rel="external nofollow noopener noreferrer">ECBSR<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><strong>SwinIR training and testing</strong> codes: <a href=https://github.com/JingyunLiang/SwinIR target=_blank rel="external nofollow noopener noreferrer">SwinIR<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><strong>bi-directional video super-resolution</strong> codes: <a href=https://arxiv.org/abs/2012.02181 target=_blank rel="external nofollow noopener noreferrer"><strong>BasicVSR</strong> and IconVSR<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</li><li><strong>dual-blind face restoration</strong> codes: <a href=https://github.com/Lotayou/Face-Renovation target=_blank rel="external nofollow noopener noreferrer">HiFaceGAN<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> codes by <a href=https://lotayou.github.io/ target=_blank rel="external nofollow noopener noreferrer">Lotayou<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</li><li><strong>ESRGAN</strong> and <strong>DFDNet</strong> <a href=../colab>colab demo</a></li><li><strong>blind face restoration</strong> inference codes: <a href=https://github.com/csxmli2016/DFDNet target=_blank rel="external nofollow noopener noreferrer">DFDNet<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</li><li><strong>StyleGAN2 training and testing</strong> codes: <a href=https://github.com/rosinality/stylegan2-pytorch target=_blank rel="external nofollow noopener noreferrer">StyleGAN2<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>.</li></ul><table><thead><tr><th style=text-align:left>Class</th><th style=text-align:center>Description</th><th style=text-align:center>Supported Algorithms</th></tr></thead><tbody><tr><td style=text-align:left><a href=../basicsr/models/base_model.py>BaseModel</a></td><td style=text-align:center>Abstract base class, define common functions</td><td style=text-align:center></td></tr><tr><td style=text-align:left><a href=../basicsr/models/sr_model.py>SRModel</a></td><td style=text-align:center>Base image SR class</td><td style=text-align:center>SRCNN, EDSR, SRResNet, RCAN, RRDBNet, etc</td></tr><tr><td style=text-align:left><a href=../basicsr/models/srgan_model.py>SRGANModel</a></td><td style=text-align:center>SRGAN image SR class</td><td style=text-align:center>SRGAN</td></tr><tr><td style=text-align:left><a href=../basicsr/models/esrgan_model.py>ESRGANModel</a></td><td style=text-align:center>ESRGAN image SR class</td><td style=text-align:center>ESRGAN</td></tr><tr><td style=text-align:left><a href=../basicsr/models/video_base_model.py>VideoBaseModel</a></td><td style=text-align:center>Base video SR class</td><td style=text-align:center></td></tr><tr><td style=text-align:left><a href=../basicsr/models/edvr_model.py>EDVRModel</a></td><td style=text-align:center>EDVR video SR class</td><td style=text-align:center>EDVR</td></tr><tr><td style=text-align:left><a href=../basicsr/models/stylegan2_model.py>StyleGAN2Model</a></td><td style=text-align:center>StyleGAN2 generation class</td><td style=text-align:center>StyleGAN2</td></tr></tbody></table><pre tabindex=0><code>BaseModel
├── SRModel
│   ├── SRGANModel
│   │   └── ESRGANModel
│   └── VideoBaseModel
│       ├── VideoGANModel
│       └── EDVRModel
└── StyleGAN2Model
</code></pre><h4 id=2-modelzoo>.2. ModelZoo</h4><h5 id=0--使用pretrained-model>.0. 使用Pretrained model</h5><p><strong>[下载官方提供的预训练模型]</strong> (<a href="https://drive.google.com/drive/folders/15DgDtfaLASQ3iAPJEVHQF49g9msexECG?usp=sharing" target=_blank rel="external nofollow noopener noreferrer">Google Drive<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, <a href=https://pan.baidu.com/s/1R6Nc4v3cl79XPAiK0Toe7g target=_blank rel="external nofollow noopener noreferrer">百度网盘<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>)
你可以使用以下脚本从Google Drive下载预训练模型.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>python scripts<span style=color:#f92672>/</span>download_pretrained_models<span style=color:#f92672>.</span>py ESRGAN
</span></span><span style=display:flex><span><span style=color:#75715e># method can be ESRGAN, EDVR, StyleGAN, EDSR, DUF, DFDNet, dlib</span>
</span></span></code></pre></div><p><strong>[下载复现的模型和log]</strong> (<a href="https://drive.google.com/drive/folders/1XN4WXKJ53KQ0Cu0Yv-uCt8DZWq6uufaP?usp=sharing" target=_blank rel="external nofollow noopener noreferrer">Google Drive<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>, <a href=https://pan.baidu.com/s/1UElD6q8sVAgn_cxeBDOlvQ target=_blank rel="external nofollow noopener noreferrer">百度网盘<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a>)，<a href=https://www.wandb.com/ target=_blank rel="external nofollow noopener noreferrer">wandb<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> 上拥有模型训练的过程和曲线</p><h5 id=1-图像超分官方模型>1. 图像超分官方模型</h5><table><thead><tr><th style=text-align:left>Exp Name</th><th style=text-align:center>Set5 (PSNR/SSIM)</th><th style=text-align:center>Set14 (PSNR/SSIM)</th><th style=text-align:center>DIV2K100 (PSNR/SSIM)</th></tr></thead><tbody><tr><td style=text-align:left>EDSR_Mx2_f64b16_DIV2K_official-3ba7b086</td><td style=text-align:center>35.7768 / 0.9442</td><td style=text-align:center>31.4966 / 0.8939</td><td style=text-align:center>34.6291 / 0.9373</td></tr><tr><td style=text-align:left>EDSR_Mx3_f64b16_DIV2K_official-6908f88a</td><td style=text-align:center>32.3597 / 0.903</td><td style=text-align:center>28.3932 / 0.8096</td><td style=text-align:center>30.9438 / 0.8737</td></tr><tr><td style=text-align:left>EDSR_Mx4_f64b16_DIV2K_official-0c287733</td><td style=text-align:center>30.1821 / 0.8641</td><td style=text-align:center>26.7528 / 0.7432</td><td style=text-align:center>28.9679 / 0.8183</td></tr><tr><td style=text-align:left>EDSR_Lx2_f256b32_DIV2K_official-be38e77d</td><td style=text-align:center>35.9979 / 0.9454</td><td style=text-align:center>31.8583 / 0.8971</td><td style=text-align:center>35.0495 / 0.9407</td></tr><tr><td style=text-align:left>EDSR_Lx3_f256b32_DIV2K_official-3660f70d</td><td style=text-align:center>32.643 / 0.906</td><td style=text-align:center>28.644 / 0.8152</td><td style=text-align:center>31.28 / 0.8798</td></tr><tr><td style=text-align:left>EDSR_Lx4_f256b32_DIV2K_official-76ee1c8f</td><td style=text-align:center>30.5499 / 0.8701</td><td style=text-align:center>27.0011 / 0.7509</td><td style=text-align:center>29.277 / 0.8266</td></tr></tbody></table><h5 id=2-图像超分复现模型>2. 图像超分复现模型</h5><table><thead><tr><th style=text-align:left>Exp Name</th><th style=text-align:center>Set5 (PSNR/SSIM)</th><th style=text-align:center>Set14 (PSNR/SSIM)</th><th style=text-align:center>DIV2K100 (PSNR/SSIM)</th></tr></thead><tbody><tr><td style=text-align:left>001_MSRResNet_x4_f64b16_DIV2K_1000k_B16G1_wandb</td><td style=text-align:center>30.2468 / 0.8651</td><td style=text-align:center>26.7817 / 0.7451</td><td style=text-align:center>28.9967 / 0.8195</td></tr><tr><td style=text-align:left>002_MSRResNet_x2_f64b16_DIV2K_1000k_B16G1_001pretrain_wandb</td><td style=text-align:center>35.7483 / 0.9442</td><td style=text-align:center>31.5403 / 0.8937</td><td style=text-align:center>34.6699 / 0.9377</td></tr><tr><td style=text-align:left>003_MSRResNet_x3_f64b16_DIV2K_1000k_B16G1_001pretrain_wandb</td><td style=text-align:center>32.4038 / 0.9032</td><td style=text-align:center>28.4418 / 0.8106</td><td style=text-align:center>30.9726 / 0.8743</td></tr><tr><td style=text-align:left>004_MSRGAN_x4_f64b16_DIV2K_400k_B16G1_wandb</td><td style=text-align:center>28.0158 / 0.8087</td><td style=text-align:center>24.7474 / 0.6623</td><td style=text-align:center>26.6504 / 0.7462</td></tr><tr><td style=text-align:left>201_EDSR_Mx2_f64b16_DIV2K_300k_B16G1_wandb</td><td style=text-align:center>35.7395 / 0.944</td><td style=text-align:center>31.4348 / 0.8934</td><td style=text-align:center>34.5798 / 0.937</td></tr><tr><td style=text-align:left>202_EDSR_Mx3_f64b16_DIV2K_300k_B16G1_201pretrain_wandb</td><td style=text-align:center>32.315 / 0.9026</td><td style=text-align:center>28.3866 / 0.8088</td><td style=text-align:center>30.9095 / 0.8731</td></tr><tr><td style=text-align:left>203_EDSR_Mx4_f64b16_DIV2K_300k_B16G1_201pretrain_wandb</td><td style=text-align:center>30.1726 / 0.8641</td><td style=text-align:center>26.721 / 0.743</td><td style=text-align:center>28.9506 / 0.818</td></tr><tr><td style=text-align:left>204_EDSR_Lx2_f256b32_DIV2K_300k_B16G1_wandb</td><td style=text-align:center>35.9792 / 0.9453</td><td style=text-align:center>31.7284 / 0.8959</td><td style=text-align:center>34.9544 / 0.9399</td></tr><tr><td style=text-align:left>205_EDSR_Lx3_f256b32_DIV2K_300k_B16G1_204pretrain_wandb</td><td style=text-align:center>32.6467 / 0.9057</td><td style=text-align:center>28.6859 / 0.8152</td><td style=text-align:center>31.2664 / 0.8793</td></tr><tr><td style=text-align:left>206_EDSR_Lx4_f256b32_DIV2K_300k_B16G1_204pretrain_wandb</td><td style=text-align:center>30.4718 / 0.8695</td><td style=text-align:center>26.9616 / 0.7502</td><td style=text-align:center>29.2621 / 0.8265</td></tr></tbody></table><h5 id=3-视频超分辨率>3. 视频超分辨率</h5><h6 id=1-edvr>1. EDVR</h6><p>EDVR_(training dataset)_(track name)_(model complexity)</p><ul><li>track name. There are four tracks in the NTIRE 2019 Challenges on Video Restoration and Enhancement:<ul><li><strong>SR</strong>: <code>super-resolution</code> with a fixed downsampling kernel (MATLAB bicubic downsampling kernel is frequently used). Most of the previous video SR methods focus on this setting.</li><li><strong>SRblur</strong>: <code>the inputs are also degraded with motion blur.</code></li><li><strong>deblur</strong>: <code>standard deblurring (motion blur)</code>.</li><li><strong>deblurcomp</strong>: <code>motion blur + video compression artifacts.</code></li></ul></li><li>model complexity<ul><li><strong>L</strong> (Large): # of channels = 128, # of back residual blocks = 40. This setting is used in our competition submission.</li><li><strong>M</strong> (Moderate): # of channels = 64, # of back residual blocks = 10.</li></ul></li></ul><table><thead><tr><th style=text-align:center>Model name</th><th style=text-align:center>[Test Set] PSNR/SSIM</th></tr></thead><tbody><tr><td style=text-align:center>EDVR_Vimeo90K_SR_L</td><td style=text-align:center>[Vid4] (Y1) 27.35/0.8264 <a href="https://drive.google.com/open?id=14nozpSfe9kC12dVuJ9mspQH5ZqE4mT9K" target=_blank rel="external nofollow noopener noreferrer">[↓Results]<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> (RGB) 25.83/0.8077</td></tr><tr><td style=text-align:center>EDVR_REDS_SR_M</td><td style=text-align:center>[REDS] (RGB) 30.53/0.8699 <a href="https://drive.google.com/open?id=1Mek3JIxkjJWjhZhH4qVwTXnRZutKUtC-" target=_blank rel="external nofollow noopener noreferrer">[↓Results]<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></td></tr><tr><td style=text-align:center>EDVR_REDS_SR_L</td><td style=text-align:center>[REDS] (RGB) 31.09/0.8800 <a href="https://drive.google.com/open?id=1h6E0QVZyJ5SBkcnYaT1puxYYPVbPsTLt" target=_blank rel="external nofollow noopener noreferrer">[↓Results]<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></td></tr><tr><td style=text-align:center>EDVR_REDS_SRblur_L</td><td style=text-align:center>[REDS] (RGB) 28.88/0.8361 <a href="https://drive.google.com/open?id=1-8MNkQuMVMz30UilB9m_d0SXicwFEPZH" target=_blank rel="external nofollow noopener noreferrer">[↓Results]<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></td></tr><tr><td style=text-align:center>EDVR_REDS_deblur_L</td><td style=text-align:center>[REDS] (RGB) 34.80/0.9487 <a href="https://drive.google.com/open?id=133wCHTwiiRzenOEoStNbFuZlCX8Jn2at" target=_blank rel="external nofollow noopener noreferrer">[↓Results]<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></td></tr><tr><td style=text-align:center>EDVR_REDS_deblurcomp_L</td><td style=text-align:center>[REDS] (RGB) 30.24/0.8567 [[↓Results]](</td></tr></tbody></table><table><thead><tr><th style=text-align:center>Model name</th><th style=text-align:center>[Test Set] PSNR/SSIM</th></tr></thead><tbody><tr><td style=text-align:center>EDVR_REDS_SR_Stage2</td><td style=text-align:center>[REDS] (RGB) / <a href>[↓Results]</a></td></tr><tr><td style=text-align:center>EDVR_REDS_SRblur_Stage2</td><td style=text-align:center>[REDS] (RGB) / <a href>[↓Results]</a></td></tr><tr><td style=text-align:center>EDVR_REDS_deblur_Stage2</td><td style=text-align:center>[REDS] (RGB) / <a href>[↓Results]</a></td></tr><tr><td style=text-align:center>EDVR_REDS_deblurcomp_Stage2</td><td style=text-align:center>[REDS] (RGB) / <a href>[↓Results]</a></td></tr></tbody></table><h6 id=2-duftof>2. DUF&amp;TOF</h6><h3 id=3-配置文件>3. 配置文件</h3><h4 id=1-实验命名>.1. 实验命名</h4><p>以<code>001_MSRResNet_x4_f64b16_DIV2K_1000k_B16G1_wandb</code>为例:</p><ul><li><code>001</code>: 我们一般给实验标号, 方便实验管理</li><li><code>MSRResNet</code>: 模型名称, 这里是Modified SRResNet</li><li><code>x4_f64b16</code>: 重要配置参数, 这里表示放大4倍; 中间feature通道数是64, 使用了16个Residual Block</li><li><code>DIV2K</code>: 训练数据集是DIV2K</li><li><code>1000k</code>: 训练了1000k iterations</li><li><code>B16G1</code>: Batch size为16, 使用一个GPU训练</li><li><code>wandb</code>: 使用了wandb, 训练过程上传到了wandb云服务器</li></ul><h4 id=2-训练配置文件>.2. 训练配置文件</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#75715e>#################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为通用的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 实验名称, 具体可参见 [实验名称命名], 若实验名字中有debug字样, 则会进入debug模式</span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>001_MSRResNet_x4_f64b16_DIV2K_1000k_B16G1_wandb</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用的model类型, 一般为在`models`目录下定义的模型的类名</span>
</span></span><span style=display:flex><span><span style=color:#f92672>model_type</span>: <span style=color:#ae81ff>SRModel</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 输出相比输入的放大比率, 在SR中是放大倍数; 若有些任务没有这个配置, 则写1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>scale</span>: <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 训练卡数</span>
</span></span><span style=display:flex><span><span style=color:#f92672>num_gpu: 1  # set num_gpu</span>: <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>for cpu mode</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 随机种子设定</span>
</span></span><span style=display:flex><span><span style=color:#f92672>manual_seed</span>: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#################################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为dataset和data loader的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#################################</span>
</span></span><span style=display:flex><span><span style=color:#f92672>datasets</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># 训练数据集的设置</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>train</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># 数据集的名称</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>DIV2K</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 数据集的类型, 一般为在`data`目录下定义的dataset的类名</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>PairedImageDataset</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#### 以下属性是灵活的, 可以在相应类的说明文档中获得; 若新加数据集, 则可以根据需要添加</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># GT (Ground-Truth) 图像的文件夹路径</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataroot_gt</span>: <span style=color:#ae81ff>datasets/DIV2K/DIV2K_train_HR_sub</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># LQ (Low-Quality) 图像的文件夹路径</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataroot_lq</span>: <span style=color:#ae81ff>datasets/DIV2K/DIV2K_train_LR_bicubic/X4_sub</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 文件名字模板, 一般LQ文件会有类似`_x4`这样的文件后缀, 这个就是来处理GT和LQ文件后缀不匹配的问题的</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>filename_tmpl</span>: <span style=color:#e6db74>&#39;{}&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># IO 读取的backend, 详细可以参见 [docs/DatasetPreparation_CN.md]</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>io_backend</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># disk 表示直接从硬盘读取</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>disk</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 训练中Ground-Truth的Training patch的大小</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>gt_size</span>: <span style=color:#ae81ff>128</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 是否使用horizontal flip, 这里的flip特指 horizontal flip</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>use_flip</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 是否使用rotation, 这里指的是每隔90°旋转</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>use_rot</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#### 下面是data loader的设置</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># data loader是否使用shuffle</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>use_shuffle</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 每一个GPU的data loader读取进程数目</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>num_worker_per_gpu</span>: <span style=color:#ae81ff>6</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 总共的训练batch size</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>batch_size_per_gpu</span>: <span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 扩大dataset的倍率. 比如数据集有15张图, 则会重复这些图片100次, 这样一个epoch下来, 能够读取1500张图</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># (事实上是重复读的). 它经常用来加速data loader, 因为在有的机器上, 一个epoch结束, 会重启进程, 往往会很慢</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataset_enlarge_ratio</span>: <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># validation 数据集的设置</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>val</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># 数据集名称</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Set5</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 数据集的类型, 一般为在`data`目录下定义的dataset的类名</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>PairedImageDataset</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#### 以下属性是灵活的, 可以在相应类的说明文档中获得; 若新加数据集, 则可以根据需要添加</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># GT (Ground-Truth) 图像的文件夹路径</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataroot_gt</span>: <span style=color:#ae81ff>datasets/Set5/GTmod12</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># LQ (Low-Quality) 图像的文件夹路径</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataroot_lq</span>: <span style=color:#ae81ff>datasets/Set5/LRbicx4</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># IO 读取的backend, 详细可以参见 [docs/DatasetPreparation_CN.md]</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>io_backend</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># disk 表示直接从硬盘读取</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>disk</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#####################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为网络结构的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#####################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 网络g的设置</span>
</span></span><span style=display:flex><span><span style=color:#f92672>network_g</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># 网络结构 (Architecture)的类型, 一般为在`basicsr/archs`目录下定义的dataset的类名</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>MSRResNet</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>#### 以下属性是灵活的, 可以在相应类的说明文档中获得</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 输入通道数目</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>num_in_ch</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 输出通道数目</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>num_out_ch</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 中间特征通道数目</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>num_feat</span>: <span style=color:#ae81ff>64</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 使用block的数目</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>num_block</span>: <span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># SR的放大倍数</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>upscale</span>: <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>######################################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为路径和与训练模型、重启训练的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>######################################</span>
</span></span><span style=display:flex><span><span style=color:#f92672>path</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># 预训练模型的路径, 需要以pth结尾的模型</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pretrain_network_g</span>: <span style=color:#ae81ff>~</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 加载预训练模型的时候, 是否需要网络参数的名称严格对应</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>strict_load_g</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 重启训练的状态路径, 一般在`experiments/exp_name/training_states`目录下</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 这个设置了, 会覆盖  pretrain_network_g 的设定</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>resume_state</span>: <span style=color:#ae81ff>~</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为训练的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#################</span>
</span></span><span style=display:flex><span><span style=color:#f92672>train</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># 优化器设置</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>optim_g</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># 优化器类型</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>Adam</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>##### 以下属性是灵活的, 根据不同优化器有不同的设置</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 学习率</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>lr</span>: <span style=color:#75715e>!!float</span> <span style=color:#ae81ff>2e-4</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>weight_decay</span>: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Adam优化器的 beta1 和 beta2</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>betas</span>: [<span style=color:#ae81ff>0.9</span>, <span style=color:#ae81ff>0.99</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 学习率的设定</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>scheduler</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># 学习率Scheduler的类型</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>CosineAnnealingRestartLR</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#### 以下属性是灵活的, 根据学习率Scheduler有不同的设置</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Cosine Annealing的周期</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>periods</span>: [<span style=color:#ae81ff>250000</span>, <span style=color:#ae81ff>250000</span>, <span style=color:#ae81ff>250000</span>, <span style=color:#ae81ff>250000</span>]
</span></span><span style=display:flex><span>    <span style=color:#75715e># Cosine Annealing每次Restart的权重</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart_weights</span>: [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>    <span style=color:#75715e># Cosine Annealing的学习率最小值</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>eta_min</span>: <span style=color:#75715e>!!float</span> <span style=color:#ae81ff>1e-7</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 总共的训练迭代次数</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>total_iter</span>: <span style=color:#ae81ff>1000000</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># warm up的iteration数目, 如是-1, 表示没有warm up</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>warmup_iter</span>: -<span style=color:#ae81ff>1</span>  <span style=color:#75715e># no warm up</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>#### 以下是loss的设置</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># pixel-wise loss的options</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pixel_opt</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># loss类型, 一般为在`basicsr/models/losses`目录下定义的loss类名</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>L1Loss</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># loss 权重</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>loss_weight</span>: <span style=color:#ae81ff>1.0</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># loss reduction方式</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>reduction</span>: <span style=color:#ae81ff>mean</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#######################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为Validation的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#######################</span>
</span></span><span style=display:flex><span><span style=color:#f92672>val</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># validation的频率, 每隔 5000 iterations 做一次validation</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>val_freq</span>: <span style=color:#75715e>!!float</span> <span style=color:#ae81ff>5e3</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 是否需要在validation的时候保存图片</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>save_img</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># Validation时候使用的metric</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>metrics</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># metric的名字, 这个名字可以是任意的</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>psnr</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># metric的类型, 一般为在`basicsr/metrics`目录下定义的metric函数名</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>calculate_psnr</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#### 以下属性是灵活的, 根据metric有不同的设置</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># 计算metric时, 是否需要crop border</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>crop_border</span>: <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># 是否转成在Y(CbCr)空间上计算metric</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>test_y_channel</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>####################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为Logging的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>####################</span>
</span></span><span style=display:flex><span><span style=color:#f92672>logger</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># 屏幕上打印的logger频率</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>print_freq</span>: <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 保存checkpoint的频率</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>save_checkpoint_freq</span>: <span style=color:#75715e>!!float</span> <span style=color:#ae81ff>5e3</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 是否使用tensorboard logger</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>use_tb_logger</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 是否使用wandb logger, 目前wandb只是同步tensorboard的内容, 因此要使用wandb, 必须也同时使用tensorboard</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>wandb</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># wandb的project. 默认是 None, 即不使用wandb.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 这里使用了 basicsr wandb project: https://app.wandb.ai/xintao/basicsr</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>project</span>: <span style=color:#ae81ff>basicsr</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 如果是resume, 可以输入上次的wandb id, 则log可以接起来</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>resume_id</span>: <span style=color:#ae81ff>~</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#############################################################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为distributed training的设置, 目前只有在Slurm训练下才需要</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#############################################################</span>
</span></span><span style=display:flex><span><span style=color:#f92672>dist_params</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>backend</span>: <span style=color:#ae81ff>nccl</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>port</span>: <span style=color:#ae81ff>29500</span>
</span></span></code></pre></div><h4 id=3-测试配置文件>.3. 测试配置文件</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#75715e># 实验名称</span>
</span></span><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>001_MSRResNet_x4_f64b16_DIV2K_1000k_B16G1_wandb</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用的model类型, 一般为在`models`目录下定义的模型的类名</span>
</span></span><span style=display:flex><span><span style=color:#f92672>model_type</span>: <span style=color:#ae81ff>SRModel</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 输出相比输入的放大比率, 在SR中是放大倍数; 若有些任务没有这个配置, 则写1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>scale</span>: <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 测试卡数</span>
</span></span><span style=display:flex><span><span style=color:#f92672>num_gpu: 1  # set num_gpu</span>: <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>for cpu mode</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#################################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为dataset和data loader的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#################################</span>
</span></span><span style=display:flex><span><span style=color:#f92672>datasets</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># 测试数据集的设置, 后缀1表示第一个测试集</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>test_1</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># 数据集的名称</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Set5</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 数据集的类型, 一般为在`data`目录下定义的dataset的类名</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>PairedImageDataset</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#### 以下属性是灵活的, 可以在相应类的说明文档中获得; 若新加数据集, 则可以根据需要添加</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># GT (Ground-Truth) 图像的文件夹路径</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataroot_gt</span>: <span style=color:#ae81ff>datasets/Set5/GTmod12</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># LQ (Low-Quality) 图像的文件夹路径</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataroot_lq</span>: <span style=color:#ae81ff>datasets/Set5/LRbicx4</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># IO 读取的backend, 详细可以参见 [docs/DatasetPreparation_CN.md]</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>io_backend</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># disk 表示直接从硬盘读取</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>disk</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 测试数据集的设置, 后缀2表示第二个测试集</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>test_2</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Set14</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>PairedImageDataset</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataroot_gt</span>: <span style=color:#ae81ff>datasets/Set14/GTmod12</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataroot_lq</span>: <span style=color:#ae81ff>datasets/Set14/LRbicx4</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>io_backend</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>disk</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 测试数据集的设置, 后缀3表示第三个测试集</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>test_3</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>DIV2K100</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>type</span>: <span style=color:#ae81ff>PairedImageDataset</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataroot_gt</span>: <span style=color:#ae81ff>datasets/DIV2K/DIV2K_valid_HR</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>dataroot_lq</span>: <span style=color:#ae81ff>datasets/DIV2K/DIV2K_valid_LR_bicubic/X4</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>filename_tmpl</span>: <span style=color:#e6db74>&#39;{}x4&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>io_backend</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>disk</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#####################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为网络结构的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#####################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 网络g的设置</span>
</span></span><span style=display:flex><span><span style=color:#f92672>network_g</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># 网络结构 (Architecture)的类型, 一般为在`basicsr/archs`目录下定义的dataset的类名</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>type</span>: <span style=color:#ae81ff>MSRResNet</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>#### 以下属性是灵活的, 可以在相应类的说明文档中获得</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 输入通道数目</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>num_in_ch</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 输出通道数目</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>num_out_ch</span>: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 中间特征通道数目</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>num_feat</span>: <span style=color:#ae81ff>64</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 使用block的数目</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>num_block</span>: <span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># SR的放大倍数</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>upscale</span>: <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#############################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为路径和与训练模型的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#############################</span>
</span></span><span style=display:flex><span><span style=color:#f92672>path</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># 预训练模型的路径, 需要以pth结尾的模型</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pretrain_network_g</span>: <span style=color:#ae81ff>experiments/001_MSRResNet_x4_f64b16_DIV2K_1000k_B16G1_wandb/models/net_g_1000000.pth</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 加载预训练模型的时候, 是否需要网络参数的名称严格对应</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>strict_load_g</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>##################################</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以下为Validation (也是测试)的设置</span>
</span></span><span style=display:flex><span><span style=color:#75715e>##################################</span>
</span></span><span style=display:flex><span><span style=color:#f92672>val</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># 是否需要在测试的时候保存图片</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>save_img</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 对保存的图片添加后缀，如果是None, 则使用exp name</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>suffix</span>: <span style=color:#ae81ff>~</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 测试时候使用的metric</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>metrics</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># metric的名字, 这个名字可以是任意的</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>psnr</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># metric的类型, 一般为在`basicsr/metrics`目录下定义的metric函数名</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>calculate_psnr</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>#### 以下属性是灵活的, 根据metric有不同的设置</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># 计算metric时, 是否需要crop border</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>crop_border</span>: <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># 是否转成在Y(CbCr)空间上计算metric</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>test_y_channel</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 另外一个metric</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ssim</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>type</span>: <span style=color:#ae81ff>calculate_ssim</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>crop_border</span>: <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>test_y_channel</span>: <span style=color:#66d9ef>false</span>
</span></span></code></pre></div><h3 id=4-logging>4. Logging</h3><ul><li>文本屏幕日志： <code>experiments/exp_name/train_exp_name_timestamp.txt</code></li></ul><h4 id=1-tensorboard日志>.1. Tensorboard日志</h4><ul><li><p>开启. 在 yml 配置文件中设置 <code>use_tb_logger: true</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>logger</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>use_tb_logger</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div></li><li><p>文件位置: <code>tb_logger/exp_name</code></p></li><li><p>在浏览器中查看:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>tensorboard --logdir tb_logger --port <span style=color:#ae81ff>5500</span> --bind_all
</span></span></code></pre></div></li></ul><h4 id=2-wandb日志>.2. Wandb日志</h4><p><a href=https://www.wandb.com/ target=_blank rel="external nofollow noopener noreferrer">wandb<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> 类似tensorboard的云端版本, 可以在浏览器方便地查看模型训练的过程和曲线. 我们目前只是把tensorboard的内容同步到wandb上, 因此要使用wandb, 必须打开tensorboard logger.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>logger</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># 是否使用tensorboard logger</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>use_tb_logger</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 是否使用wandb logger, 目前wandb只是同步tensorboard的内容, 因此要使用wandb, 必须也同时使用tensorboard</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>wandb</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># wandb的project. 默认是 None, 即不使用wandb.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 这里使用了 basicsr wandb project: https://app.wandb.ai/xintao/basicsr</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>project</span>: <span style=color:#ae81ff>basicsr</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 如果是resume, 可以输入上次的wandb id, 则log可以接起来</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>resume_id</span>: <span style=color:#ae81ff>~</span>
</span></span></code></pre></div><h3 id=5-metrics-gan评价指标httpszhuanlanzhihucomp109342043>5. Metrics <a href=https://zhuanlan.zhihu.com/p/109342043 target=_blank rel="external nofollow noopener noreferrer">GAN评价指标<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></h3><h4 id=1-ssim>.1. SSIM</h4><blockquote><p>structural similarity index是一种用以<code>衡量两张数字图像相似度的指标</code>。当其中一张为无失真的图片，另一张是失真图片时，二者的SSIM可以看成是<code>失真图片的影响品质衡量指标</code>。相比于PSNR，SSIM在图片品质的衡量上更能符合人眼对图片质量的判断。</p><p>结构相似性的基本观点为图片是高度结构化的，相邻像素之间有很强的关联性。而这样的关联性体现了图像中物体的结构信息。人类的视觉系统在观看图片时习惯于抽取这样的结构信息。因此在设计品质用以衡量图片失真程度时，结构性失真的衡量是很重要的一环。<code> SSIM取值范围[0,1]，值越大，表示图像失真越小</code></p></blockquote><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022113012993.png data-srcset="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022113012993.png, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022113012993.png 1.5x, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022113012993.png 2x" data-sizes=auto alt=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022113012993.png title=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022113012993.png></p><h4 id=2-mssim>.2. MSSIM</h4><blockquote><p>MSSIM（Mean Structural Similarity ）平均结构相似性,用滑动窗将图像分为N块，加权计算每一窗口的均值、方差以及协方差，权值wij满足∑i∑jwij=1，通常采用高斯核，然后计算对应块的结构相似度SSIM，最后将平均值作为两图像的结构相似性度量。</p></blockquote><h4 id=3-fid>.3. FID</h4><blockquote><p>FID（Fréchet Inception Distance）是一种评价GAN的指标，于2017年提出，它的想法是这样的：分别把<code>生成器生成的样本</code>和<code>判别器生成的样本</code>送到分类器中（例如Inception Net-V3或者其他CNN等），抽取分类器的中间层的抽象特征，并假设该抽象特征符合多元高斯分布，估计生成样本高斯分布的均值 <img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src="https://www.zhihu.com/equation?tex=%5Cmu_g" data-srcset="https://www.zhihu.com/equation?tex=%5Cmu_g, https://www.zhihu.com/equation?tex=%5Cmu_g 1.5x, https://www.zhihu.com/equation?tex=%5Cmu_g 2x" data-sizes=auto alt=[公式] title=[公式]> 和方差 <img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src="https://www.zhihu.com/equation?tex=%5CSigma_g" data-srcset="https://www.zhihu.com/equation?tex=%5CSigma_g, https://www.zhihu.com/equation?tex=%5CSigma_g 1.5x, https://www.zhihu.com/equation?tex=%5CSigma_g 2x" data-sizes=auto alt=[公式] title=[公式]> ，以及训练样本 <img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src="https://www.zhihu.com/equation?tex=%5Cmu_%7Bdata%7D" data-srcset="https://www.zhihu.com/equation?tex=%5Cmu_%7Bdata%7D, https://www.zhihu.com/equation?tex=%5Cmu_%7Bdata%7D 1.5x, https://www.zhihu.com/equation?tex=%5Cmu_%7Bdata%7D 2x" data-sizes=auto alt=[公式] title=[公式]> 和方差 <img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src="https://www.zhihu.com/equation?tex=%5CSigma_%7Bdata%7D" data-srcset="https://www.zhihu.com/equation?tex=%5CSigma_%7Bdata%7D, https://www.zhihu.com/equation?tex=%5CSigma_%7Bdata%7D 1.5x, https://www.zhihu.com/equation?tex=%5CSigma_%7Bdata%7D 2x" data-sizes=auto alt=[公式] title=[公式]> ，计算<code>两个高斯分布的弗雷歇距离，此距离值即FID</code>.</p><p><code>FID的数值越小，表示两个高斯分布越接近，GAN的性能越好</code>。实践中发现，FID对噪声具有比较好的鲁棒性，能够对生成图像的质量有比较好的评价，其给出的分数与人类的视觉判断比较一致，并且FID的计算复杂度并不高，虽然FID只考虑的样本的一阶矩和二阶矩，但整体而言，FID还是比较有效的，其理论上的不足之处在于：高斯分布的简化假设在实际中并不成立。</p></blockquote><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150812381.png data-srcset="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150812381.png, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150812381.png 1.5x, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150812381.png 2x" data-sizes=auto alt=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150812381.png title=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150812381.png></p><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150755790.png data-srcset="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150755790.png, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150755790.png 1.5x, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150755790.png 2x" data-sizes=auto alt=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150755790.png title=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022150755790.png></p><h4 id=4-psnr>.4. PSNR</h4><blockquote><p>Peak signal-to-noise ratio, 峰值信噪比，是一个表示<code>信号最大可能功率和影响它的表示精度的破坏性噪声功率的比值的工程术语</code>。峰值信噪比经常用作图像压缩等领域中信号重建质量的测量方法，它常简单地通过均方误差（MSE）进行定义。<code>数值越大表示失真越小</code>.</p></blockquote><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022145737268.png data-srcset="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022145737268.png, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022145737268.png 1.5x, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022145737268.png 2x" data-sizes=auto alt=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022145737268.png title=https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20211022145737268.png></p><h3 id=6-训练测试命令>6. 训练测试命令</h3><h4 id=1-单gpu>.1. 单GPU</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#训练命令</span>
</span></span><span style=display:flex><span>PYTHONPATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;./:$</span><span style=color:#e6db74>{PYTHONPATH}</span><span style=color:#e6db74>&#34;</span> \\\
</span></span><span style=display:flex><span>CUDA_VISIBLE_DEVICES<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span> \\\
</span></span><span style=display:flex><span>python basicsr<span style=color:#f92672>/</span>train<span style=color:#f92672>.</span>py <span style=color:#f92672>-</span>opt options<span style=color:#f92672>/</span>train<span style=color:#f92672>/</span>SRResNet_SRGAN<span style=color:#f92672>/</span>train_MSRResNet_x4<span style=color:#f92672>.</span>yml
</span></span><span style=display:flex><span><span style=color:#75715e>#测试命令</span>
</span></span><span style=display:flex><span>PYTHONPATH<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;./:$</span><span style=color:#e6db74>{PYTHONPATH}</span><span style=color:#e6db74>&#34;</span> \\\
</span></span><span style=display:flex><span>CUDA_VISIBLE_DEVICES<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span> \\\
</span></span><span style=display:flex><span>python basicsr<span style=color:#f92672>/</span>test<span style=color:#f92672>.</span>py <span style=color:#f92672>-</span>opt options<span style=color:#f92672>/</span>test<span style=color:#f92672>/</span>SRResNet_SRGAN<span style=color:#f92672>/</span>test_MSRResNet_x4<span style=color:#f92672>.</span>yml
</span></span></code></pre></div><h4 id=2-colab-demo>.2. Colab Demo</h4><ul><li><a href="https://colab.research.google.com/drive/1RoNDeipp9yPjI3EbpEbUhn66k5Uzg4n8?usp=sharing" target=_blank rel="external nofollow noopener noreferrer">BasicSR_inference_DFDNet.ipynb<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><a href="https://colab.research.google.com/drive/1JQScYICvEC3VqaabLu-lxvq9h7kSV1ML?usp=sharing" target=_blank rel="external nofollow noopener noreferrer">BasicSR_inference_ESRGAN.ipynb<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li></ul><h3 id=8-代码使用解读>8. 代码使用解读</h3><ul><li>环境安琥<ul><li>local clone， 然后python <a href="http://link.zhihu.com/?target=http%3A//setup.py" target=_blank rel="external nofollow noopener noreferrer">setup.py<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a> develop/instal</li><li>pip 安装</li></ul></li></ul><h4 id=1-代码目录>.1. 代码目录</h4><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-af0541341b79960a452ed9a4d756beef_b.jpg data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-af0541341b79960a452ed9a4d756beef_b.jpg, https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-af0541341b79960a452ed9a4d756beef_b.jpg 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-af0541341b79960a452ed9a4d756beef_b.jpg 2x" data-sizes=auto alt=https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-af0541341b79960a452ed9a4d756beef_b.jpg title=https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-af0541341b79960a452ed9a4d756beef_b.jpg></p><ul><li>basicsr目录</li></ul><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-8f043bb9b91a5f2c3d2cd42b2d7f1fef_b.jpg data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-8f043bb9b91a5f2c3d2cd42b2d7f1fef_b.jpg, https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-8f043bb9b91a5f2c3d2cd42b2d7f1fef_b.jpg 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-8f043bb9b91a5f2c3d2cd42b2d7f1fef_b.jpg 2x" data-sizes=auto alt=https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-8f043bb9b91a5f2c3d2cd42b2d7f1fef_b.jpg title=https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-8f043bb9b91a5f2c3d2cd42b2d7f1fef_b.jpg></p><ul><li>scripts 文件</li></ul><p><img class=lazyload src=/liudongdong1.github.io/svg/loading.min.svg data-src=https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-1434197ea0db5a763191383be47d2942_b.jpg data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-1434197ea0db5a763191383be47d2942_b.jpg, https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-1434197ea0db5a763191383be47d2942_b.jpg 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-1434197ea0db5a763191383be47d2942_b.jpg 2x" data-sizes=auto alt=https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-1434197ea0db5a763191383be47d2942_b.jpg title=https://gitee.com/github-25970295/blogpictureV2/raw/master/v2-1434197ea0db5a763191383be47d2942_b.jpg></p><h3 id=resource>Resource</h3><ul><li><a href=https://www.zhihu.com/column/c_1295528110138163200 target=_blank rel="external nofollow noopener noreferrer">https://www.zhihu.com/column/c_1295528110138163200<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><a href=https://github.com/xinntao/BasicSR target=_blank rel="external nofollow noopener noreferrer">https://github.com/xinntao/BasicSR<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="2023-09-28 23:07:35">更新于 2023-09-28&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=liudongdong1.github.io/frame_basicsr/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span><span><a href=https://liudongdong1.github.io/edit/master/content/posts%5c%e8%a7%86%e8%a7%89%e8%bf%90%e5%8a%a8%5cvideo_understand%5cFrame_BasicSR.md title=编辑此页 target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>编辑此页</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=liudongdong1.github.io/frame_basicsr/ data-title=Frame_BasicSR data-hashtags=CV,basicSR><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=liudongdong1.github.io/frame_basicsr/ data-hashtag=CV><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=liudongdong1.github.io/frame_basicsr/ data-title=Frame_BasicSR data-image=https://cdn.stocksnap.io/img-thumbs/280h/5U2FV0UNXF.jpg><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=liudongdong1.github.io/tags/cv/>CV</a>,&nbsp;<a href=liudongdong1.github.io/tags/basicsr/>basicSR</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=liudongdong1.github.io/>主页</a></span></section></div><div class=post-nav><a href=liudongdong1.github.io/gcc/ class=prev rel=prev title=GCC><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>GCC</a>
<a href=liudongdong1.github.io/timemeasure/ class=next rel=next title=TimeMeasure>TimeMeasure<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.118.2">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.17-RC"><img class=fixit-icon src=/liudongdong1.github.io/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2020 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=https://liudongdong1.github.io/ target=_blank rel="external nofollow noopener noreferrer">LiuDongdong</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"><span class=site-time title='网站运行中 ...'><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i>&nbsp;<span class=run-times>网站运行中 ...</span></span></div><div class="footer-line ibruce"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div></div><a href=https://liudongdong1.github.io/ title="在 GitHub 上查看源代码" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:#0076ff;--bg-progress-dark:#fff></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/liudongdong1.github.io/lib/katex/katex.min.css><link rel=stylesheet href=/liudongdong1.github.io/lib/cookieconsent/cookieconsent.min.css><script src=/liudongdong1.github.io/lib/autocomplete/autocomplete.min.js defer></script><script src=/liudongdong1.github.io/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script src=/liudongdong1.github.io/lib/lazysizes/lazysizes.min.js async defer></script><script src=/liudongdong1.github.io/lib/sharer/sharer.min.js async defer></script><script src=/liudongdong1.github.io/lib/typeit/index.umd.js defer></script><script src=/liudongdong1.github.io/lib/katex/katex.min.js defer></script><script src=/liudongdong1.github.io/lib/katex/auto-render.min.js defer></script><script src=/liudongdong1.github.io/lib/katex/copy-tex.min.js defer></script><script src=/liudongdong1.github.io/lib/katex/mhchem.min.js defer></script><script src=/liudongdong1.github.io/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/liudongdong1.github.io/lib/pangu/pangu.min.js defer></script><script src=/liudongdong1.github.io/lib/cell-watermark/watermark.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:10},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},data:{"typeit-header-subtitle-desktop":`<span style='font-family: MMT,"沐目体";'>吾日三省吾身</span>`,"typeit-header-subtitle-mobile":`<span style='font-family: MMT,"沐目体";'>吾日三省吾身</span>`},enablePWA:!0,enablePangu:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{algoliaAppID:"2R1K9SKLQZ",algoliaIndex:"index.zh-cn",algoliaSearchKey:"4a226aa1c5c98d6859e4d1386adb2bc7",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"},siteTime:"2020-12-18T16:15:22+08:00",typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},duration:-1,speed:100},watermark:{appendto:".wrapper>main",colspacing:30,content:'<img class="fixit-icon" src="/fixit.min.svg" alt="FixIt logo" /> FixIt 主题',enable:!0,fontfamily:"inherit",fontsize:.85,height:21,opacity:.0125,rotate:15,rowspacing:60,width:150}}</script><script src=/liudongdong1.github.io/js/theme.min.js defer></script><script src=/liudongdong1.github.io/js/custom.min.js defer></script></body></html>