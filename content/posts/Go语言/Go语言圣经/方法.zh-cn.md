---
title: "ã€Go è¯­è¨€åœ£ç»ã€‘æ–¹æ³•"
subtitle: ""
date: 2022-10-19T14:39:39+08:00
description: ""
keywords: ""
tags: ["Goè¯­è¨€åœ£ç»"]
categories: ["Programming"]
---

{{< admonition quote >}}
æœ¬æ–‡å†…å®¹æ¥è‡ªï¼š[Goè¯­è¨€åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰](https://golang-china.github.io/gopl-zh/)
{{< /admonition >}}

**ç¯å¢ƒé…ç½®ï¼š**
- ç³»ç»Ÿï¼š*Windows11*
- ç¼–è¾‘å™¨ï¼š*vscode*

{{< admonition  >}}
æœ¬æ–‡å‡è®¾ä½ å·²ç»å®‰è£…äº†Goå¹¶é…ç½®å¥½ç›¸å…³ç¯å¢ƒï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…Goï¼Œè¯·å‰å¾€Goå®˜æ–¹ç½‘ç«™è¿›è¡Œ[ä¸‹è½½å®‰è£…](https://golang.google.cn/dl/)
{{< /admonition >}}

#### ğŸ’ æ–¹æ³•å£°æ˜
*åœ¨å‡½æ•°å£°æ˜æ—¶ï¼Œåœ¨å…¶åå­—ä¹‹å‰æ”¾ä¸Šä¸€ä¸ªå˜é‡ï¼Œå³æ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚*

***

ç¬¬ä¸€ä¸ªDistanceçš„è°ƒç”¨å®é™…ä¸Šç”¨çš„æ˜¯åŒ…çº§åˆ«çš„å‡½æ•°geometry.Distanceï¼Œè€Œç¬¬äºŒä¸ªåˆ™æ˜¯ä½¿ç”¨åˆšåˆšå£°æ˜çš„Pointï¼Œè°ƒç”¨çš„æ˜¯Pointç±»ä¸‹å£°æ˜çš„Point.Distanceæ–¹æ³•ã€‚

è¿™ç§p.Distanceçš„è¡¨è¾¾å¼å«åšé€‰æ‹©å™¨ï¼Œå› ä¸ºä»–ä¼šé€‰æ‹©åˆé€‚çš„å¯¹åº”pè¿™ä¸ªå¯¹è±¡çš„Distanceæ–¹æ³•æ¥æ‰§è¡Œã€‚
```go
package geometry

import "math"

type Point struct{ X, Y float64 }

// traditional function
func Distance(p, q Point) float64 {
    return math.Hypot(q.X-p.X, q.Y-p.Y)
}

// same thing, but as a method of the Point type
func (p Point) Distance(q Point) float64 {
    return math.Hypot(q.X-p.X, q.Y-p.Y)
}

p := Point{1, 2}
q := Point{4, 6}
fmt.Println(Distance(p, q)) // "5", function call
fmt.Println(p.Distance(q))  // "5", method call
```

#### ğŸŒ¸ åŸºäºæŒ‡é’ˆå¯¹è±¡çš„æ–¹æ³•
å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¼šå¯¹å…¶æ¯ä¸€ä¸ªå‚æ•°å€¼è¿›è¡Œæ‹·è´ã€‚é¿å…è¿›è¡Œè¿™ç§é»˜è®¤çš„æ‹·è´ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æŒ‡é’ˆ
```go
func (p *Point) ScaleBy(factor float64) {
    p.X *= factor
    p.Y *= factor
}
```
æƒ³è¦è°ƒç”¨æŒ‡é’ˆç±»å‹æ–¹æ³•(*Point).ScaleByï¼Œåªè¦æä¾›ä¸€ä¸ªPointç±»å‹çš„æŒ‡é’ˆå³å¯ï¼Œåƒä¸‹é¢è¿™æ ·ã€‚
```go
r := &Point{1, 2}
r.ScaleBy(2)
fmt.Println(*r) // "{2, 4}"
```
å¦‚æœæ¥æ”¶å™¨pæ˜¯ä¸€ä¸ªPointç±»å‹çš„å˜é‡ï¼Œå¹¶ä¸”å…¶æ–¹æ³•éœ€è¦ä¸€ä¸ªPointæŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢è¿™ç§ç®€çŸ­çš„å†™æ³•ï¼š
```go
p.ScaleBy(2)
```

#### ğŸ’® å°è£…
Goè¯­è¨€åªæœ‰ä¸€ç§æ§åˆ¶å¯è§æ€§çš„æ‰‹æ®µï¼šå¤§å†™é¦–å­—æ¯çš„æ ‡è¯†ç¬¦ä¼šä»å®šä¹‰å®ƒä»¬çš„åŒ…ä¸­è¢«å¯¼å‡ºï¼Œå°å†™å­—æ¯çš„åˆ™ä¸ä¼šã€‚è¿™ç§é™åˆ¶åŒ…å†…æˆå‘˜çš„æ–¹å¼åŒæ ·é€‚ç”¨äºstructæˆ–è€…ä¸€ä¸ªç±»å‹çš„æ–¹æ³•ã€‚å› è€Œå¦‚æœæˆ‘ä»¬æƒ³è¦å°è£…ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å¿…é¡»å°†å…¶å®šä¹‰ä¸ºä¸€ä¸ªstructã€‚

æå‰é¢„ç•™ä¸€éƒ¨åˆ†ç©ºé—´ï¼Œæ¥é¿å…åå¤çš„å†…å­˜åˆ†é…ã€‚
```go
type Buffer struct {
    buf     []byte
    initial [64]byte
    /* ... */
}

// Grow expands the buffer's capacity, if necessary,
// to guarantee space for another n bytes. [...]
func (b *Buffer) Grow(n int) {
    if b.buf == nil {
        b.buf = b.initial[:0] // use preallocated space initially
    }
    if len(b.buf)+n > cap(b.buf) {
        buf := make([]byte, b.Len(), 2*cap(b.buf) + n)
        copy(buf, b.buf)
        b.buf = buf
    }
}
```