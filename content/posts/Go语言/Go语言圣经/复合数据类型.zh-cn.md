---
title: "ã€Go è¯­è¨€åœ£ç»ã€‘å¤åˆæ•°æ®ç±»å‹"
subtitle: ""
date: 2022-10-18T17:03:49+08:00
description: ""
keywords: ""
tags: ["Goè¯­è¨€åœ£ç»"]
categories: ["Programming"]
---

{{< admonition quote >}}
æœ¬æ–‡å†…å®¹æ¥è‡ªï¼š[Goè¯­è¨€åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰](https://golang-china.github.io/gopl-zh/)
{{< /admonition >}}

**ç¯å¢ƒé…ç½®ï¼š**
- ç³»ç»Ÿï¼š*Windows11*
- ç¼–è¾‘å™¨ï¼š*vscode*

{{< admonition  >}}
æœ¬æ–‡å‡è®¾ä½ å·²ç»å®‰è£…äº†Goå¹¶é…ç½®å¥½ç›¸å…³ç¯å¢ƒï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…Goï¼Œè¯·å‰å¾€Goå®˜æ–¹ç½‘ç«™è¿›è¡Œ[ä¸‹è½½å®‰è£…](https://golang.google.cn/dl/)
{{< /admonition >}}

#### ğŸŒ¶ï¸ slice
Sliceï¼ˆåˆ‡ç‰‡ï¼‰ä»£è¡¨å˜é•¿çš„åºåˆ—ï¼Œåºåˆ—ä¸­æ¯ä¸ªå…ƒç´ éƒ½æœ‰ç›¸åŒçš„ç±»å‹ã€‚ä¸€ä¸ªsliceç±»å‹ä¸€èˆ¬å†™ä½œ[]Tï¼Œå…¶ä¸­Tä»£è¡¨sliceä¸­å…ƒç´ çš„ç±»å‹ï¼›sliceçš„è¯­æ³•å’Œæ•°ç»„å¾ˆåƒï¼Œåªæ˜¯æ²¡æœ‰å›ºå®šé•¿åº¦è€Œå·²

ä¸€ä¸ªsliceç”±ä¸‰ä¸ªéƒ¨åˆ†æ„æˆï¼šæŒ‡é’ˆã€é•¿åº¦å’Œå®¹é‡ã€‚

#### ğŸ¥¦ map
å“ˆå¸Œè¡¨æ˜¯ä¸€ç§å·§å¦™å¹¶ä¸”å®ç”¨çš„æ•°æ®ç»“æ„ã€‚å®ƒæ˜¯ä¸€ä¸ªæ— åºçš„key/valueå¯¹çš„é›†åˆï¼Œå…¶ä¸­æ‰€æœ‰çš„keyéƒ½æ˜¯ä¸åŒçš„ï¼Œç„¶åé€šè¿‡ç»™å®šçš„keyå¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å¤æ‚åº¦å†…æ£€ç´¢ã€æ›´æ–°æˆ–åˆ é™¤å¯¹åº”çš„valueã€‚

å†…ç½®çš„makeå‡½æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ªmapï¼š
```go
ages := make(map[string]int) // mapping from strings to ints
```
æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨mapå­—é¢å€¼çš„è¯­æ³•åˆ›å»ºmapï¼ŒåŒæ—¶è¿˜å¯ä»¥æŒ‡å®šä¸€äº›æœ€åˆçš„key/valueï¼š
```go
ages := map[string]int{
    "alice":   31,
    "charlie": 34,
}
```
Mapçš„è¿­ä»£é¡ºåºæ˜¯ä¸ç¡®å®šçš„ï¼Œå¹¶ä¸”ä¸åŒçš„å“ˆå¸Œå‡½æ•°å®ç°å¯èƒ½å¯¼è‡´ä¸åŒçš„éå†é¡ºåºã€‚åœ¨å®è·µä¸­ï¼Œéå†çš„é¡ºåºæ˜¯éšæœºçš„ï¼Œæ¯ä¸€æ¬¡éå†çš„é¡ºåºéƒ½ä¸ç›¸åŒã€‚
```go
import "sort"

var names []string
for name := range ages {
    names = append(names, name)
}
sort.Strings(names)
for _, name := range names {
    fmt.Printf("%s\t%d\n", name, ages[name])
}
```
å’Œsliceä¸€æ ·ï¼Œmapä¹‹é—´ä¹Ÿä¸èƒ½è¿›è¡Œç›¸ç­‰æ¯”è¾ƒï¼›å”¯ä¸€çš„ä¾‹å¤–æ˜¯å’Œnilè¿›è¡Œæ¯”è¾ƒã€‚è¦åˆ¤æ–­ä¸¤ä¸ªmapæ˜¯å¦åŒ…å«ç›¸åŒçš„keyå’Œvalueï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡ä¸€ä¸ªå¾ªç¯å®ç°ï¼š
```go
func equal(x, y map[string]int) bool {
    if len(x) != len(y) {
        return false
    }
    for k, xv := range x {
        if yv, ok := y[k]; !ok || yv != xv {
            return false
        }
    }
    return true
}
```

### ğŸ† ç»“æ„ä½“
*ç»“æ„ä½“æ˜¯ä¸€ç§èšåˆçš„æ•°æ®ç±»å‹ï¼Œæ˜¯ç”±é›¶ä¸ªæˆ–å¤šä¸ªä»»æ„ç±»å‹çš„å€¼èšåˆæˆçš„å®ä½“ã€‚*
```go
type Employee struct {
    ID            int
    Name, Address string
    DoB           time.Time
    Position      string
    Salary        int
    ManagerID     int
}
```

**ç»“æ„ä½“å­—é¢å€¼**

ç»“æ„ä½“å€¼ä¹Ÿå¯ä»¥ç”¨ç»“æ„ä½“å­—é¢å€¼è¡¨ç¤ºï¼Œç»“æ„ä½“å­—é¢å€¼å¯ä»¥æŒ‡å®šæ¯ä¸ªæˆå‘˜çš„å€¼ã€‚
```go
type Point struct{ X, Y int }

p := Point{1, 2}
```
å¦‚æœè€ƒè™‘æ•ˆç‡çš„è¯ï¼Œè¾ƒå¤§çš„ç»“æ„ä½“é€šå¸¸ä¼šç”¨æŒ‡é’ˆçš„æ–¹å¼ä¼ å…¥å’Œè¿”å›
```go
func Bonus(e *Employee, percent int) int {
    return e.Salary * percent / 100
}
```

**ç»“æ„ä½“æ¯”è¾ƒ**

å¦‚æœç»“æ„ä½“çš„å…¨éƒ¨æˆå‘˜éƒ½æ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼Œé‚£ä¹ˆç»“æ„ä½“ä¹Ÿæ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼Œé‚£æ ·çš„è¯ä¸¤ä¸ªç»“æ„ä½“å°†å¯ä»¥ä½¿ç”¨==æˆ–!=è¿ç®—ç¬¦è¿›è¡Œæ¯”è¾ƒã€‚
```go
type Point struct{ X, Y int }

p := Point{1, 2}
q := Point{2, 1}
fmt.Println(p.X == q.X && p.Y == q.Y) // "false"
fmt.Println(p == q)                   // "false"
```

**ç»“æ„ä½“åµŒå…¥å’ŒåŒ¿åæˆå‘˜**
```go
type Point struct {
    X, Y int
}

type Circle struct {
    Center Point
    Radius int
}

type Wheel struct {
    Circle Circle
    Spokes int
}
```
è®¿é—®æ¯ä¸ªæˆå‘˜æ˜¾å¾—ç¹çï¼š
```go
var w Wheel
w.Circle.Center.X = 8
w.Circle.Center.Y = 8
w.Circle.Radius = 5
w.Spokes = 20
```
Goè¯­è¨€æœ‰ä¸€ä¸ªç‰¹æ€§è®©æˆ‘ä»¬åªå£°æ˜ä¸€ä¸ªæˆå‘˜å¯¹åº”çš„æ•°æ®ç±»å‹è€Œä¸æŒ‡åæˆå‘˜çš„åå­—ï¼›è¿™ç±»æˆå‘˜å°±å«åŒ¿åæˆå‘˜ã€‚
```go
type Circle struct {
    Point
    Radius int
}

type Wheel struct {
    Circle
    Spokes int
}
```
å¾—ç›ŠäºåŒ¿ååµŒå…¥çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®å¶å­å±æ€§è€Œä¸éœ€è¦ç»™å‡ºå®Œæ•´çš„è·¯å¾„ï¼š
```go
var w Wheel
w.X = 8            // equivalent to w.Circle.Point.X = 8
w.Y = 8            // equivalent to w.Circle.Point.Y = 8
w.Radius = 5       // equivalent to w.Circle.Radius = 5
w.Spokes = 20
```
ç»“æ„ä½“å­—é¢å€¼å¿…é¡»éµå¾ªå½¢çŠ¶ç±»å‹å£°æ˜æ—¶çš„ç»“æ„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½ç”¨ä¸‹é¢çš„ä¸¤ç§è¯­æ³•ï¼Œå®ƒä»¬å½¼æ­¤æ˜¯ç­‰ä»·çš„ï¼š
```go
w = Wheel{Circle{Point{8, 8}, 5}, 20}

w = Wheel{
    Circle: Circle{
        Point:  Point{X: 8, Y: 8},
        Radius: 5,
    },
    Spokes: 20, // NOTE: trailing comma necessary here (and at Radius)
}

fmt.Printf("%#v\n", w)
// Output:
// Wheel{Circle:Circle{Point:Point{X:8, Y:8}, Radius:5}, Spokes:20}

w.X = 42

fmt.Printf("%#v\n", w)
// Output:
// Wheel{Circle:Circle{Point:Point{X:42, Y:8}, Radius:5}, Spokes:20}
```