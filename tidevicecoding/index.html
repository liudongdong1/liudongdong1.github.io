<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>TIDeviceCoding - DAY By DAY</title><meta name="author" content="LiuDongdong">
<meta name="author-link" content="https://liudongdong1.github.io/">
<meta name="description" content="Since each of the samples are taken at equally spaced time intervals, we have a time log of what happened during the chirp. Every sample is a complex number, meaning we have captured some magnitude of power as well as the phase of the wave at that time. So, our object will theoretically appear as an increase in power in our samples. On the other hand, we can use the" /><meta name="keywords" content='mmWave' /><meta itemprop="name" content="TIDeviceCoding">
<meta itemprop="description" content="Since each of the samples are taken at equally spaced time intervals, we have a time log of what happened during the chirp. Every sample is a complex number, meaning we have captured some magnitude of power as well as the phase of the wave at that time. So, our object will theoretically appear as an increase in power in our samples. On the other hand, we can use the">
<meta itemprop="dateModified" content="2023-09-28T22:57:26+08:00" />
<meta itemprop="wordCount" content="4391"><meta itemprop="image" content="/logo.png"/>
<meta itemprop="keywords" content="mmWave," /><meta property="og:title" content="TIDeviceCoding" />
<meta property="og:description" content="Since each of the samples are taken at equally spaced time intervals, we have a time log of what happened during the chirp. Every sample is a complex number, meaning we have captured some magnitude of power as well as the phase of the wave at that time. So, our object will theoretically appear as an increase in power in our samples. On the other hand, we can use the" />
<meta property="og:type" content="article" />
<meta property="og:url" content="liudongdong1.github.io/tidevicecoding/" /><meta property="og:image" content="/logo.png"/><meta property="article:section" content="posts" />

<meta property="article:modified_time" content="2023-09-28T22:57:26+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/logo.png"/>

<meta name="twitter:title" content="TIDeviceCoding"/>
<meta name="twitter:description" content="Since each of the samples are taken at equally spaced time intervals, we have a time log of what happened during the chirp. Every sample is a complex number, meaning we have captured some magnitude of power as well as the phase of the wave at that time. So, our object will theoretically appear as an increase in power in our samples. On the other hand, we can use the"/>
<meta name="application-name" content="DAY By DAY">
<meta name="apple-mobile-web-app-title" content="DAY By DAY"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="liudongdong1.github.io/tidevicecoding/" /><link rel="prev" href="liudongdong1.github.io/timesequence/" /><link rel="next" href="liudongdong1.github.io/threadrelative/" /><link rel="stylesheet" href="/liudongdong1.github.io/css/style.min.css"><link rel="stylesheet" href="/liudongdong1.github.io/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/liudongdong1.github.io/lib/animate/animate.min.css"><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "TIDeviceCoding",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "liudongdong1.github.io\/tidevicecoding\/"
    },"genre": "posts","keywords": "mmWave","wordcount":  4391 ,
    "url": "liudongdong1.github.io\/tidevicecoding\/","dateModified": "2023-09-28T22:57:26+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
      "@type": "Organization",
      "name": "LiuDongdong","logo": "\/images\/person.png"},"author": {
        "@type": "Person",
        "name": "liudongdong1"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="auto" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper" data-github-corner="right">
    <div class="header-title">
      <a href="liudongdong1.github.io/" title="DAY By DAY"><img
    class="lazyload logo"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="/fixit.min.svg"
    data-srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x"
    data-sizes="auto"
    alt="DAY By DAY"
    title="DAY By DAY"/><span class="header-title-text"></span></a><span id="typeit-header-subtitle-desktop" class="typeit header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/liudongdong1.github.io/posts/"
                
                
              ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 所有文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/liudongdong1.github.io/categories/"
                
                
              ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/liudongdong1.github.io/tags/"
                
                
              ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/liudongdong1.github.io/friends/"
                title="友情链接"
                
              ><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden="true"></i> 友链</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/liudongdong1.github.io/about/"
                
                
              ><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item language">
            <span role="button" aria-label="选择语言" title="选择语言">简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden="true"></i>
            </span>
            <ul class="sub-menu"><li class="menu-item">没有更多翻译</li></ul>
          </li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容 ..." id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li>
      </ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="liudongdong1.github.io/" title="DAY By DAY"><img
    class="lazyload logo"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="/fixit.min.svg"
    data-srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x"
    data-sizes="auto"
    alt="/fixit.min.svg"
    title="/fixit.min.svg"/><span class="header-title-text"></span></a><span id="typeit-header-subtitle-mobile" class="typeit header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容 ..." id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/liudongdong1.github.io/posts/"
                  
                  
                ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 所有文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/liudongdong1.github.io/categories/"
                  
                  
                ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/liudongdong1.github.io/tags/"
                  
                  
                ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/liudongdong1.github.io/friends/"
                  title="友情链接"
                  
                ><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden="true"></i> 友链</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/liudongdong1.github.io/about/"
                  
                  
                ><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li
              class="menu-item text-center"
            ><a
                  class="menu-link"
                  href="https://liudongdong1.github.io/"
                  title="GitHub"
                  rel="noopener noreferrer" target="_blank"
                ><i class='fa-brands fa-github fa-fw' aria-hidden='true'></i> </a></li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li><li class="menu-item language">
            <span role="button" aria-label="选择语言" title="选择语言">简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden="true"></i>
            </span>
            <select class="language-select" onchange="location = this.value;"><option disabled>没有更多翻译</option></select>
          </li></ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container" data-page-style="normal"><aside class="toc" id="toc-auto"><h2 class="toc-title">目录 <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside>

  <aside class="aside-custom" id="aside-sakana">
    

<div class="sakana-widget">
  <div class="sakana-item" id="takina-widget"></div>
  <div class="sakana-item" id="chisato-widget"></div>
</div>
<script>
  function initSakanaWidget() {
    const takina = SakanaWidget.getCharacter('takina')
    SakanaWidget.registerCharacter('takina-slow', takina);
    new SakanaWidget({
      character: 'takina-slow',
      controls: false,
      autoFit: true,
      stroke: {
        color: "#b4b4b4",
        width: 2
      }
    }).mount('#takina-widget');

    const chisato = SakanaWidget.getCharacter('chisato')
    SakanaWidget.registerCharacter('chisato-slow', chisato);
    new SakanaWidget({
      character: 'chisato-slow',
      controls: false,
      autoFit: true,
      stroke: {
        color: "#b4b4b4",
        width: 2
      }
    }).mount('#chisato-widget');
  }
</script>
<script async onload="initSakanaWidget()" src="https://cdn.jsdelivr.net/npm/sakana-widget@2.3.0/lib/sakana.min.js">
</script></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX">
        <span>TIDeviceCoding</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
      liudongdong1</span></span>
          <span class="post-category">收录于 <a href="liudongdong1.github.io/categories/"><i class="fa-regular fa-folder fa-fw"></i>&nbsp;Categories</a>&ensp;<a href="liudongdong1.github.io/categories/aiot/"><i class="fa-regular fa-folder fa-fw"></i>&nbsp;AIOT</a></span></div>
      <div class="post-meta-line"><span title=0001-01-01&#32;00:00:00>
            <i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="0001-01-01" >0001-01-01</time>
          </span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;约 4391 字&nbsp;
        <i class="fa-regular fa-clock fa-fw"></i>&nbsp;预计阅读 9 分钟&nbsp;<span id="busuanzi_container_page_pv" class="busuanzi_visitors comment-visitors" data-flag-title="TIDeviceCoding">
            <i class="fa-regular fa-eye fa-fw"></i>&nbsp;<span id="busuanzi_value_page_pv">-</span>&nbsp;次阅读
          </span>&nbsp;</div>
    </div><div class="featured-image"><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://cdn.stocksnap.io/img-thumbs/280h/bird-perched_RDHWPJKENF.jpg"
    data-srcset="https://cdn.stocksnap.io/img-thumbs/280h/bird-perched_RDHWPJKENF.jpg, https://cdn.stocksnap.io/img-thumbs/280h/bird-perched_RDHWPJKENF.jpg 1.5x, https://cdn.stocksnap.io/img-thumbs/280h/bird-perched_RDHWPJKENF.jpg 2x"
    data-sizes="auto"
    alt="https://cdn.stocksnap.io/img-thumbs/280h/bird-perched_RDHWPJKENF.jpg"
    title="https://cdn.stocksnap.io/img-thumbs/280h/bird-perched_RDHWPJKENF.jpg"/></div><div class="details toc" id="toc-static" kept="true">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-profile">1. Profile</a></li>
        <li><a href="#1-距离计算">1. 距离计算</a></li>
        <li><a href="#2-速度计算">2. 速度计算</a></li>
        <li><a href="#3-角度计算">3. 角度计算</a></li>
        <li><a href="#4-noise-removal">4. Noise Removal</a></li>
        <li><a href="#5-相关知识">5. 相关知识</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div
      class="content"
      id="content"
      
      
    ><blockquote>
<p>Since each of the samples are taken at equally spaced time intervals, we have a time log of what happened during the chirp. <code>Every sample is a complex number</code>, meaning we have captured some <code>magnitude of power as well as the phase</code> of the wave at that time. So, our object will theoretically appear as an increase in power in our samples. On the other hand, we can use the distinct phases of each sample to obtain distance. <code> (Frame, chirp,virtual antennas(tx*rx),Datasample)</code></p>
<ul>
<li>Power - $P = \sqrt{I^2+Q^2}$</li>
<li>Phase - $\angle = \arctan{(\frac{I}{Q})}$</li>
</ul>
<p>($I$​​​=Imaginary Component $Q$​​​=Real Component)</p>
<ul>
<li><code>rangeFFT （对一个chirp 的sample）</code>和<code>dopplerFFT（对一个Frame的不同chirp) </code>，<code>AzimuthRRF(对virtual antenna 维度)</code></li>
</ul>
</blockquote>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095219270.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095219270.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095219270.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095219270.png 2x"
    data-sizes="auto"
    alt="chirp data"
    title="chirp data"/></p>
<h3 id="1-profile">1. Profile</h3>
<h4 id="1-配置参数">.1. 配置参数</h4>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170138432.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170138432.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170138432.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170138432.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170138432.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170138432.png"/></p>
<h5 id="1-start-frequency">.1. start frequency</h5>
<h5 id="2-frequency-slope">.2. frequency slope</h5>
<h5 id="3-idle-time">.3. Idle time</h5>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170333232.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170333232.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170333232.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170333232.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170333232.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170333232.png"/></p>
<h5 id="4-adc-start-time不懂">.4. ADC start time(不懂)</h5>
<ul>
<li><code>Synthesizer PLL ramp-up settling time, which is a function of ramp slope</code></li>
<li><code>HPF step response settling, which is a function of HPF corner frequencies</code></li>
<li><code>IF/DFE LPF settling time, which is a function of DFE output mode and sampling rate</code></li>
</ul>
<h5 id="5-ramp-end-time">.5. Ramp end time</h5>
<p><code>The ramp end time is the sum of (a) the ADC start time, (b) the ADC sampling time and (c) the excess ramping time at the end of the ramp.  </code></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170741261.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170741261.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170741261.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170741261.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170741261.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170741261.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170108543.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170108543.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170108543.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170108543.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170108543.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901170108543.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164155446.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164155446.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164155446.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164155446.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164155446.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164155446.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164232154.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164232154.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164232154.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164232154.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164232154.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164232154.png"/></p>
<h4 id="2-procedure">.2. procedure</h4>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901171106832.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901171106832.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901171106832.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901171106832.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901171106832.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901171106832.png"/></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Imports</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#66d9ef">as</span> plt
</span></span></code></pre></div><h3 id="1-距离计算">1. 距离计算</h3>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901100023673.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901100023673.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901100023673.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901100023673.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901100023673.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901100023673.png"/></p>
<h4 id="1-range-fft">1. Range FFT</h4>
<blockquote>
<p>The first step to <code>obtaining range is by performing an FFT across our ADC samples for a single chirp</code>. This unfortunately does not leave you with a single range. Instead, we obtain multiple &ldquo;range bins&rdquo;. These are exactly what they sound like, bins that store the information for various ranges.  <code>对sample维度</code></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Read in chirp data</span>
</span></span><span style="display:flex;"><span>adc_samples <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>loadtxt(<span style="color:#e6db74">&#39;../assets/chirp.txt&#39;</span>, dtype<span style="color:#f92672">=</span>np<span style="color:#f92672">.</span>complex_)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;datainformation:&#34;</span>,type(adc_samples),adc_samples<span style="color:#f92672">.</span>shape,<span style="color:#e6db74">&#34;data[0]&#34;</span>,adc_samples[<span style="color:#ae81ff">0</span>]) <span style="color:#75715e">#&lt;class &#39;numpy.ndarray&#39;&gt; (128,)data[0] (19+65375j)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Manually cast to signed ints</span>
</span></span><span style="display:flex;"><span>adc_samples<span style="color:#f92672">.</span>real <span style="color:#f92672">=</span> adc_samples<span style="color:#f92672">.</span>real<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>int16)
</span></span><span style="display:flex;"><span>adc_samples<span style="color:#f92672">.</span>imag <span style="color:#f92672">=</span> adc_samples<span style="color:#f92672">.</span>imag<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>int16)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;adc_samples:&#34;</span>,type(adc_samples),adc_samples<span style="color:#f92672">.</span>shape,<span style="color:#e6db74">&#34;data[0]&#34;</span>,adc_samples[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Take a FFT across ADC samples</span>
</span></span><span style="display:flex;"><span>range_bins <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fft(adc_samples)  <span style="color:#75715e">#&lt;class &#39;numpy.ndarray&#39;&gt; (128,) data[0] (19-161j)</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;range_bins:&#34;</span>,type(range_bins),range_bins<span style="color:#f92672">.</span>shape,<span style="color:#e6db74">&#34;data[0]&#34;</span>,range_bins[<span style="color:#ae81ff">0</span>])<span style="color:#75715e">#(128,) data[0] (1212-87j)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plot the magnitudes of the range bins</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>plot(np<span style="color:#f92672">.</span>abs(range_bins)) 
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>xlabel(<span style="color:#e6db74">&#39;Range Bins&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;Reflected Power&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Interpreting a Single Chirp&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095419698.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095419698.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095419698.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095419698.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095419698.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095419698.png"/></p>
<h4 id="2-单位转化">2. 单位转化</h4>
<h5 id="1-原理推导">.1. 原理推导</h5>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185621170.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185621170.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185621170.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185621170.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185621170.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185621170.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185933268.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185933268.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185933268.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185933268.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185933268.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026185933268.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190042611.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190042611.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190042611.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190042611.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190042611.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190042611.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190139735.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190139735.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190139735.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190139735.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190139735.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211026190139735.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164424552.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164424552.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164424552.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164424552.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164424552.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164424552.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164659831.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164659831.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164659831.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164659831.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164659831.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901164659831.png"/></p>
<blockquote>
<p>complex 2x and real smapling modes: IF=0.9*(ADC_sampling)/2</p>
</blockquote>
<p><code>the objects at some range bin index are indeed farther than the objects at the previous index</code> and closer than the objects in the next index. That&rsquo;s probably what you didn&rsquo;t want to hear however.</p>
<ul>
<li>$f = \frac{S2 d}{c}$ - The <em>IF signal</em> frequency produced by a single object at distance $d$ (where the object appears in the frequency spectrum after the range FFT)
<ul>
<li>$f$ - Frequency</li>
<li>$S$ - Frequency slope of the signal emitted by the chirp</li>
<li>$d$ - Distance relative to the radar</li>
<li>$c$ - Speed of light <!-- raw HTML omitted --></li>
</ul>
</li>
<li>$\Delta f &gt; \frac{1}{T}$ - The minimum separation needed in the frequency spectrum to be resolved by the radar <!-- raw HTML omitted -->
<ul>
<li>$T$ - Sampling period</li>
</ul>
</li>
</ul>
<p>Looking at the first equation and we can see there is a direct relationship between $f$ and $d$&hellip;</p>
<ul>
<li>$f = \frac{S2 d}{c} \Rightarrow \Delta f = \frac{S2 \Delta d}{c}$</li>
</ul>
<p>So now we have two separate equations that define $\Delta f$. Substitution can be now used.</p>
<ul>
<li>$\frac{S2 \Delta d}{c} = \Delta f \gt \frac{1}{T}$</li>
<li>$\frac{S2 \Delta d}{c} \gt \frac{1}{T}$</li>
</ul>
<p>Finally, we can solve for $\Delta d$, or the range resolution we can achieve.</p>
<ul>
<li>$\Delta d \gt \frac{c}{2} \cdot \frac{1}{ST}$</li>
</ul>
<p>Since we know $S$ is in some unit of frequency over time, we can simplify $ST$ to just $B$, or the bandwidth of chirp.</p>
<ul>
<li>$\Delta d &gt; \frac{c}{2B}$</li>
</ul>
<p>In other words,<code> the range resolution is only dependent on how large a bandwidth the chirp has</code>. Let&rsquo;s see what information we have to use to try and find this range resolution.</p>
<p>Not exactly what we wanted, but the only thing we&rsquo;re missing is our bandwidth $B$. We can still use these parameters to find bandwidth since it is just the span of frequency of the chirp. So, we just need to calculate how much of a frequency span the chirp takes. Ignoring converting units for now, this should be our equation:</p>
<ul>
<li>$B = S \cdot \frac{N}{F_s}$
<ul>
<li>$S$ - Frequency slope (frequency/time)</li>
<li>$N$ - Number of ADC samples (samples)</li>
<li>$F_s$ - Frequency at which we sample ADC samples (samples / time)</li>
</ul>
</li>
</ul>
<h5 id="2-计算代码">.2. 计算代码</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Data sampling configuration</span>
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> <span style="color:#ae81ff">3e8</span> <span style="color:#75715e"># Speed of light (m/s)</span>
</span></span><span style="display:flex;"><span>sample_rate <span style="color:#f92672">=</span> <span style="color:#ae81ff">2500</span> <span style="color:#75715e"># Rate at which the radar samples from ADC (ksps - kilosamples per second)</span>
</span></span><span style="display:flex;"><span>freq_slope <span style="color:#f92672">=</span> <span style="color:#ae81ff">60</span> <span style="color:#75715e"># Frequency slope of the chirp (MHz/us)</span>
</span></span><span style="display:flex;"><span>adc_samples <span style="color:#f92672">=</span> <span style="color:#ae81ff">128</span> <span style="color:#75715e"># Number of samples from a single chirpb</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Calculating bandwidth of the chirp, accounting for unit conversion</span>
</span></span><span style="display:flex;"><span>chirp_bandwidth <span style="color:#f92672">=</span> (freq_slope <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e12</span> <span style="color:#f92672">*</span> adc_samples) <span style="color:#f92672">/</span> (sample_rate <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e3</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Using our derived equation for range resolution</span>
</span></span><span style="display:flex;"><span>range_res <span style="color:#f92672">=</span> c <span style="color:#f92672">/</span> (<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> chirp_bandwidth)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;Range Resolution: </span><span style="color:#e6db74">{</span>range_res<span style="color:#e6db74">}</span><span style="color:#e6db74"> [meters]&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Apply the range resolution factor to the range indices</span>
</span></span><span style="display:flex;"><span>ranges <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(adc_samples) <span style="color:#f92672">*</span> range_res
</span></span><span style="display:flex;"><span>powers <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>abs(range_bins)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Now we can plot again with an x-axis that makes sense</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>plot(ranges, powers)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>xlabel(<span style="color:#e6db74">&#39;Range (meters)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;Reflected Power&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Interpreting a Single Chirp&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>chirp_bandwidth
</span></span><span style="display:flex;"><span>print(ranges)
</span></span></code></pre></div><p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095734148.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095734148.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095734148.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095734148.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095734148.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901095734148.png"/></p>
<h3 id="2-速度计算">2. 速度计算</h3>
<h4 id="1-doppler-effect">.1. Doppler Effect</h4>
<blockquote>
<p>In addition to <code>multiple ADC samples</code>, we have <code>multiple chirps.</code> For an object at range 𝑥 from the radar, when we receive the respective ADC sample, the product will be a complex number with some phase. If the object is moving away from the radar, the respective ADC sample of the second chirp will come in at a very slightly delayed time. This is because the object also moved slightly away in that miniscule amount of time. Althought this movement is miniscule, <code>the change in phase of the wave can be clearly seen</code>. <code>对一个frame chirp维度</code></p>
</blockquote>
<p>$$
f&rsquo; = \frac{v+v_0}{v-v_s}f
$$</p>
<h4 id="2-range-fft">.2. Range FFT</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Read in frame data</span>
</span></span><span style="display:flex;"><span>frame <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#39;../assets/simple_frame_1.npy&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Manually cast to signed ints</span>
</span></span><span style="display:flex;"><span>frame<span style="color:#f92672">.</span>real <span style="color:#f92672">=</span> frame<span style="color:#f92672">.</span>real<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>int16)
</span></span><span style="display:flex;"><span>frame<span style="color:#f92672">.</span>imag <span style="color:#f92672">=</span> frame<span style="color:#f92672">.</span>imag<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>int16)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Meta data about the data</span>
</span></span><span style="display:flex;"><span>num_chirps <span style="color:#f92672">=</span> <span style="color:#ae81ff">128</span> <span style="color:#75715e"># Number of chirps in the frame</span>
</span></span><span style="display:flex;"><span>num_samples <span style="color:#f92672">=</span> <span style="color:#ae81ff">128</span> <span style="color:#75715e"># Number of ADC samples per chirp</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>range_plot <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fft(frame, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)  <span style="color:#75715e"># axis=1:按行计算</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;range infor:&#34;</span>,type(range_plot),range_plot<span style="color:#f92672">.</span>shape)   <span style="color:#75715e">#(128,128)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Visualize Results</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(np<span style="color:#f92672">.</span>abs(range_plot)<span style="color:#f92672">.</span>T)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;Range Bins&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Interpreting a Single Frame - Range&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101058961.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101058961.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101058961.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101058961.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101058961.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101058961.png"/></p>
<h4 id="3-doppler-fft">.3. Doppler FFT</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Take a sequential FFT across the chirps</span>
</span></span><span style="display:flex;"><span>range_doppler <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fft(range_plot, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># FFT shift the values (explained later)</span>
</span></span><span style="display:flex;"><span>range_doppler <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fftshift(range_doppler, axes<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Visualize the range-doppler plot</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># plt.imshow(np.log(np.abs(range_doppler).T))</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(np<span style="color:#f92672">.</span>abs(range_doppler)<span style="color:#f92672">.</span>T)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>xlabel(<span style="color:#e6db74">&#39;Doppler Bins&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;Range Bins&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Interpreting a Single Frame - Doppler&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>plot(np<span style="color:#f92672">.</span>abs(range_doppler))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>xlabel(<span style="color:#e6db74">&#39;Doppler Bins&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;Signal Strength&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Interpreting a Single Frame - Doppler&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101436884.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101436884.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101436884.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101436884.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101436884.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901101436884.png"/></p>
<blockquote>
<p>That line in the <code>middle at doppler bin 64 is called zero doppler</code>, meaning everything along that line is <code>static/not moving relative to the radar</code>. This means everything to the <code>left (bins&lt;64) is negative doppler, or moving towards the radar </code>and the opposite for the other half of the doppler bins.</p>
</blockquote>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028103918183.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028103918183.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028103918183.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028103918183.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028103918183.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028103918183.png"/></p>
<ul>
<li><code>rangeFFT （对一个chirp 的sample）</code>和<code>dopplerFFT（对一个Frame的不同chirp) </code>先后顺序影响不大；</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;frame infor:&#34;</span>,type(frame),frame<span style="color:#f92672">.</span>shape)  <span style="color:#75715e">#frame infor: &lt;class &#39;numpy.ndarray&#39;&gt; (128, 128)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Range FFT -&gt; Doppler FFT</span>
</span></span><span style="display:flex;"><span>range_bins <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fft(frame, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>fft_2d <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fft(range_bins, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Doppler FFT -&gt; Range FFT</span>
</span></span><span style="display:flex;"><span>doppler_bins <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fft(frame, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>rfft_2d <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fft(doppler_bins, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#39;Max power difference: &#39;</span>, np<span style="color:#f92672">.</span>abs(fft_2d <span style="color:#f92672">-</span> rfft_2d)<span style="color:#f92672">.</span>max())  <span style="color:#75715e">#Max power difference:  5.64766185425834e-11</span>
</span></span></code></pre></div><h4 id="4-单位转化">.4. 单位转化</h4>
<h5 id="1-原理推导-1">.1. 原理推导</h5>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028092818353.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028092818353.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028092818353.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028092818353.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028092818353.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028092818353.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093021780.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093021780.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093021780.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093021780.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093021780.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093021780.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093131613.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093131613.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093131613.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028093131613.png 2x"
    data-sizes="auto"
    alt="image-20211028093131613"
    title="image-20211028093131613"/></p>
<p>All the units of the data we produced are of some type of &ldquo;bin&rdquo;. Similarly to range resolution, we <code>have a doppler resolution aka velocity resolution</code>.</p>
<ul>
<li>$\omega = \frac{4\pi vT_c}{\lambda}$ - Rotational frequency of phasor due to object moving at $v$ velocity
<ul>
<li>$v$ - Velocity</li>
<li>$T_c$ - Sampling period</li>
<li>$\lambda$ - Wavelength</li>
</ul>
</li>
<li>$\Delta\omega \gt \frac{2\pi}{N}$ - Minimum change in rotation of phasor to be resolved by radar
<ul>
<li>$N$​ - Number of sample points</li>
</ul>
</li>
</ul>
<h5 id="2-计算代码-1">.2. 计算代码</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Data sampling configuration</span>
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> <span style="color:#ae81ff">3e8</span> <span style="color:#75715e"># Speed of light (m/s)</span>
</span></span><span style="display:flex;"><span>sample_rate <span style="color:#f92672">=</span> <span style="color:#ae81ff">2500</span> <span style="color:#75715e"># Rate at which the radar samples from ADC (ksps - kilosamples per second)</span>
</span></span><span style="display:flex;"><span>freq_slope <span style="color:#f92672">=</span> <span style="color:#ae81ff">60</span> <span style="color:#75715e"># Frequency slope of the chirp (MHz/us)</span>
</span></span><span style="display:flex;"><span>adc_samples <span style="color:#f92672">=</span> <span style="color:#ae81ff">128</span> <span style="color:#75715e"># Number of samples from a single chirp</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>start_freq <span style="color:#f92672">=</span> <span style="color:#ae81ff">77.4201</span> <span style="color:#75715e"># Starting frequency of the chirp (GHz)</span>
</span></span><span style="display:flex;"><span>idle_time <span style="color:#f92672">=</span> <span style="color:#ae81ff">30</span> <span style="color:#75715e"># Time before starting next chirp (us)</span>
</span></span><span style="display:flex;"><span>ramp_end_time <span style="color:#f92672">=</span> <span style="color:#ae81ff">62</span> <span style="color:#75715e"># Time after sending each chirp (us)</span>
</span></span><span style="display:flex;"><span>num_chirps <span style="color:#f92672">=</span> <span style="color:#ae81ff">128</span> <span style="color:#75715e"># Number of chirps per frame</span>
</span></span><span style="display:flex;"><span>num_tx <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span> <span style="color:#75715e"># Number of transmitters</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Range resolution    ？？ 这里没有看懂</span>
</span></span><span style="display:flex;"><span>range_res <span style="color:#f92672">=</span> (c <span style="color:#f92672">*</span> sample_rate <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e3</span>) <span style="color:#f92672">/</span> (<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> freq_slope <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e12</span> <span style="color:#f92672">*</span> adc_samples)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;Range Resolution: </span><span style="color:#e6db74">{</span>range_res<span style="color:#e6db74">}</span><span style="color:#e6db74"> [meters/second]&#39;</span>)  <span style="color:#75715e">#Range Resolution: 0.048828125 [meters/second]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Apply the range resolution factor to the range indices</span>
</span></span><span style="display:flex;"><span>ranges <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(adc_samples) <span style="color:#f92672">*</span> range_res
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Make sure your equation translates to the following</span>
</span></span><span style="display:flex;"><span>velocity_res <span style="color:#f92672">=</span> c <span style="color:#f92672">/</span> (<span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> start_freq <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e9</span> <span style="color:#f92672">*</span> (idle_time <span style="color:#f92672">+</span> ramp_end_time) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e-6</span> <span style="color:#f92672">*</span> num_chirps <span style="color:#f92672">*</span> num_tx)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;Velocity Resolution: </span><span style="color:#e6db74">{</span>velocity_res<span style="color:#e6db74">}</span><span style="color:#e6db74"> [meters/second]&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Apply the velocity resolution factor to the doppler indicies</span>
</span></span><span style="display:flex;"><span>velocities <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(num_chirps) <span style="color:#f92672">-</span> (num_chirps <span style="color:#f92672">//</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>velocities <span style="color:#f92672">=</span> velocities <span style="color:#f92672">*</span> velocity_res
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>powers <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>abs(range_doppler)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Plot with units</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(powers<span style="color:#f92672">.</span>T, extent<span style="color:#f92672">=</span>[velocities<span style="color:#f92672">.</span>min(), velocities<span style="color:#f92672">.</span>max(), ranges<span style="color:#f92672">.</span>max(), ranges<span style="color:#f92672">.</span>min()])
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>xlabel(<span style="color:#e6db74">&#39;Velocity (meters per second)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;Range (meters)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>plot(velocities, powers)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>xlabel(<span style="color:#e6db74">&#39;Velocity (meters per second)&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;Reflected Power&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Interpreting a Single Frame - Doppler&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901105825831.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901105825831.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901105825831.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901105825831.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901105825831.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901105825831.png"/></p>
<h3 id="3-角度计算">3. 角度计算</h3>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111120724.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111120724.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111120724.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111120724.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111120724.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111120724.png"/></p>
<h4 id="1-range-fft-1">.1. Range FFT</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># Read in frame data</span>
</span></span><span style="display:flex;"><span>frame <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>load(<span style="color:#e6db74">&#39;../assets/doppler_example_1.npy&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Manually cast to signed ints</span>
</span></span><span style="display:flex;"><span>frame<span style="color:#f92672">.</span>real <span style="color:#f92672">=</span> frame<span style="color:#f92672">.</span>real<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>int16)
</span></span><span style="display:flex;"><span>frame<span style="color:#f92672">.</span>imag <span style="color:#f92672">=</span> frame<span style="color:#f92672">.</span>imag<span style="color:#f92672">.</span>astype(np<span style="color:#f92672">.</span>int16)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;Shape of frame: </span><span style="color:#e6db74">{</span>frame<span style="color:#f92672">.</span>shape<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Meta data about the data</span>
</span></span><span style="display:flex;"><span>num_chirps <span style="color:#f92672">=</span> <span style="color:#ae81ff">128</span> <span style="color:#75715e"># Number of chirps in the frame</span>
</span></span><span style="display:flex;"><span>num_samples <span style="color:#f92672">=</span> <span style="color:#ae81ff">128</span> <span style="color:#75715e"># Number of ADC samples per chirp</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>num_tx <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>num_rx <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>num_vx <span style="color:#f92672">=</span> num_tx <span style="color:#f92672">*</span> num_rx <span style="color:#75715e"># Number of virtual antennas</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>range_plot <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fft(frame, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Visualize Results</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(np<span style="color:#f92672">.</span>abs(range_plot<span style="color:#f92672">.</span>sum(<span style="color:#ae81ff">1</span>))<span style="color:#f92672">.</span>T)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;Range Bins&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Interpreting a Single Frame - Range&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111228073.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111228073.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111228073.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111228073.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111228073.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111228073.png"/></p>
<h4 id="2-doppler-fft">.2. Doppler FFT</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>range_doppler <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fft(range_plot, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>range_doppler <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fftshift(range_doppler, axes<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Visualize Results</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(np<span style="color:#f92672">.</span>log(np<span style="color:#f92672">.</span>abs(range_doppler)<span style="color:#f92672">.</span>T)<span style="color:#f92672">.</span>sum(<span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>xlabel(<span style="color:#e6db74">&#39;Doppler Bins&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;Range Bins&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Interpreting a Single Frame - Doppler&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111309395.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111309395.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111309395.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111309395.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111309395.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111309395.png"/></p>
<h4 id="3--azimuth-fft">.3.  Azimuth FFT</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>num_angle_bins <span style="color:#f92672">=</span> <span style="color:#ae81ff">64</span>
</span></span><span style="display:flex;"><span>padding <span style="color:#f92672">=</span> ((<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>), (<span style="color:#ae81ff">0</span>,num_angle_bins<span style="color:#f92672">-</span>range_doppler<span style="color:#f92672">.</span>shape[<span style="color:#ae81ff">1</span>]), (<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">0</span>))
</span></span><span style="display:flex;"><span>range_azimuth <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>pad(range_doppler, padding, mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;constant&#39;</span>)
</span></span><span style="display:flex;"><span>range_azimuth <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>fft<span style="color:#f92672">.</span>fft(range_azimuth, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>range_azimuth <span style="color:#f92672">=</span> range_azimuth
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Visualize Results</span>
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>imshow(np<span style="color:#f92672">.</span>log(np<span style="color:#f92672">.</span>abs(range_azimuth)<span style="color:#f92672">.</span>sum(<span style="color:#ae81ff">0</span>)<span style="color:#f92672">.</span>T))
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>xlabel(<span style="color:#e6db74">&#39;Azimuth (Angle) Bins&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>ylabel(<span style="color:#e6db74">&#39;Range Bins&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>title(<span style="color:#e6db74">&#39;Interpreting a Single Frame - Azimuth&#39;</span>)
</span></span><span style="display:flex;"><span>plt<span style="color:#f92672">.</span>show()
</span></span></code></pre></div><p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111409348.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111409348.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111409348.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111409348.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111409348.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901111409348.png"/></p>
<h4 id="4-原理推导">.4. 原理推导</h4>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901165336582.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901165336582.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901165336582.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901165336582.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901165336582.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210901165336582.png"/></p>
<h3 id="4-noise-removal">4. Noise Removal</h3>
<h4 id="1-去除具有0的多普勒速度信号">.1. 去除具有0的多普勒速度信号</h4>
<blockquote>
<p>0多普勒滤波的缺点是雷达不能检测到路径中的静止目标, 这将导致检测失败.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">clutter_removal</span>(input_val, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;Perform basic static clutter removal by removing the mean from the input_val on the specified doppler axis.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Args:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        input_val (ndarray): Array to perform static clutter removal on. Usually applied before performing doppler FFT.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            e.g. [num_chirps, num_vx_antennas, num_samples], it is applied along the first axis.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        axis (int): Axis to calculate mean of pre-doppler.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Returns:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        ndarray: Array with static clutter removed.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Reorder the axes</span>
</span></span><span style="display:flex;"><span>    reordering <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>arange(len(input_val<span style="color:#f92672">.</span>shape))   <span style="color:#75715e">#[0,1,2,] </span>
</span></span><span style="display:flex;"><span>    reordering[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> axis
</span></span><span style="display:flex;"><span>    reordering[axis] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    input_val <span style="color:#f92672">=</span> input_val<span style="color:#f92672">.</span>transpose(reordering)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Apply static clutter removal</span>
</span></span><span style="display:flex;"><span>    mean <span style="color:#f92672">=</span> input_val<span style="color:#f92672">.</span>transpose(reordering)<span style="color:#f92672">.</span>mean(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    output_val <span style="color:#f92672">=</span> input_val <span style="color:#f92672">-</span> mean
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> output_val<span style="color:#f92672">.</span>transpose(reordering)
</span></span></code></pre></div><h4 id="2-固定杂波阈值分割-fixed-clutter-thresholding">.2. <strong>固定杂波阈值分割( fixed clutter thresholding)</strong></h4>
<blockquote>
<p>在固定阈值的情况下, 对阈值以下的信号进行剔除. 该方法在检测阈值设置过高的情况下, 会出现极少的虚警(false alarms), 但同时也会掩盖有效目标. 如果阈值设置得太低, 则会导致过多的错误警报. 如在下图中, 固定阈值导致虚警和漏检弱目标.</p>
<ul>
<li>虚警率(false alarm rate）是雷达通过噪声或其他干扰信号发现错误信号的速率. 它是在没有有效目标存在的情况下, 检测到雷达目标存在的一种度量.</li>
</ul>
</blockquote>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104240757.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104240757.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104240757.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104240757.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104240757.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104240757.png"/></p>
<h4 id="3-动态阈值分割dynamic-thresholding">.3. <strong>动态阈值分割(dynamic thresholding)</strong></h4>
<blockquote>
<p>动态阈值分割通过改变阈值水平来降低误报率. 利用这种名为 <strong>CFAR(Constant False Alarm Rate)<strong>的技术, 可以<code>监测每一个或每一组距离多普勒bin的噪声</code>, 并将信号与本地的噪声水平进行比较. 此比较用于创建一个阈值, 该阈值为</strong>CFAR</strong>.</p>
<ul>
<li><strong>CFAR</strong> 根据车辆周围环境变化检测阈值. 通过实现恒定的虚警率, 可以解决虚警问题.</li>
</ul>
</blockquote>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104419947.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104419947.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104419947.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104419947.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104419947.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028104419947.png"/></p>
<h5 id="1-cell-averaging-cfar-ca-cfar">1. Cell Averaging CFAR (CA-CFAR)</h5>
<blockquote>
<p><strong>CA-CFAR</strong>测量被测单元(CUT)两侧的训练单元的干扰程度. 然后用这个测量来决定目标是否在被测单元(CUT)中. 该过程遍历所有的距离多普勒单元, 并根据噪声估计确定目标的存在.</p>
</blockquote>
<p>FFT bins是在通过多个啁啾的<code>Range Doppler FFT</code>生成的. <strong>CA-CFAR</strong>使用滑动窗口遍历整个FFT bins . 每个窗口由以下单元格组成：</p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028105734872.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028105734872.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028105734872.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028105734872.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028105734872.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028105734872.png"/></p>
<ul>
<li><strong>Cell Under Test</strong>：通过<code>比较信号电平和噪声估计值(阈值)来检测目标是否存在的单元</code>.</li>
<li><strong>Training Cells</strong>：在训练单元上<code>测量噪声水平</code>. 训练单元可以分为两个区域, 滞后于CUT的单元称为<code>滞后训练单元,</code> 而<code>领先于CUT的单元称为前导训练单元</code>. 通过对训练单元下的噪声进行平均来估计噪声. 在某些情况下, 采用前导或滞后的噪声平均值, 而在其他情况下, 则合并前导和滞后的噪声平均值, 并考虑两者中较高的一个用于噪声水平估计. 训练单元的数量应根据环境确定. 如果交通场景繁忙, 则应使用较少的训练单元, 因为间隔较近的目标会影响噪声估计.</li>
<li><strong>Guard Cells</strong> ：紧邻CUT的单元被指定为保护单元. <code>保护单元的目的是避免目标信号泄漏到训练单元中</code>, 这可能会对噪声估计产生不利影响. 保护单元的数量应<code>根据目标信号从被测单元中泄漏出来的情况来确定. 如果目标反射很强, 它们通常会进入周围的单元</code>. 　</li>
<li><strong>Threshold Factor (Offset)</strong>：使用<code>偏移值来缩放噪声阈值</code>. 如果信号强度以对数形式定义, 则将此偏移值添加到平均噪声估计中, 否则相乘.</li>
</ul>
<h6 id="1-1d-ca-cfar">.1. 1d CA-CFAR</h6>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111153793.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111153793.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111153793.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111153793.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111153793.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111153793.png"/></p>
<ol>
<li>确定训练单元和保卫单元的数量</li>
<li>开始在整个FFT 1D阵列上一次滑动一个单元格的窗口. 总窗口大小应为：2（T + G）+ CUT</li>
<li>对于每一步, 将<code>所有前导或滞后训练单元内的信号（噪声）相加</code></li>
<li>对总和求平均值以确定噪声阈值</li>
<li>使用适当的偏移量值缩放阈值</li>
<li>在CUT中的被测信号从窗口起点T + G + 1开始的</li>
<li>将5中测量的信号与4中测量的阈值进行比较</li>
<li>如果在CUT中测量的信号电平小于所测量的阈值, 则将0值分配给CUT中的信号, 否则分配1.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-matlab" data-lang="matlab"><span style="display:flex;"><span><span style="color:#75715e">% Implement 1D CFAR using lagging cells on the given noise and target scenario.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% Close and delete all currently open figures</span>
</span></span><span style="display:flex;"><span>close all;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% Data_points</span>
</span></span><span style="display:flex;"><span>Ns = <span style="color:#ae81ff">1000</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% Generate random noise</span>
</span></span><span style="display:flex;"><span>s=abs(randn(Ns,<span style="color:#ae81ff">1</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%Targets location. Assigning bin 100, 200, 300 and 700 as Targets with the amplitudes of 8, 9, 4, 11.</span>
</span></span><span style="display:flex;"><span>s([<span style="color:#ae81ff">100</span> ,<span style="color:#ae81ff">200</span>, <span style="color:#ae81ff">350</span>, <span style="color:#ae81ff">700</span>])=[<span style="color:#ae81ff">8</span> <span style="color:#ae81ff">15</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">13</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%plot the output</span>
</span></span><span style="display:flex;"><span>plot(s);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% TODO: Apply CFAR to detect the targets by filtering the noise.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% 1. Define the following:</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% 1a. Training Cells</span>
</span></span><span style="display:flex;"><span>T = <span style="color:#ae81ff">12</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">% 1b. Guard Cells </span>
</span></span><span style="display:flex;"><span>G = <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% Offset : Adding room above noise threshold for desired SNR </span>
</span></span><span style="display:flex;"><span>offset=<span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% Vector to hold threshold values </span>
</span></span><span style="display:flex;"><span>threshold_cfar = [];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%Vector to hold final signal after thresholding</span>
</span></span><span style="display:flex;"><span>signal_cfar = [];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% 2. Slide window across the signal length</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i = <span style="color:#ae81ff">1</span>:(Ns<span style="color:#f92672">-</span>(G<span style="color:#f92672">+</span>T<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>))     
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">% 2. - 5. Determine the noise threshold by measuring it within the training cells</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    noise_level =sum(s(i:i<span style="color:#f92672">+</span>T<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">% 6. Measuring the signal within the CUT</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    threshold = (noise_level<span style="color:#f92672">/</span>T)<span style="color:#f92672">*</span>offset;
</span></span><span style="display:flex;"><span>    threshold_cfar=[threshold_cfar,{threshold}];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    signal=s(i<span style="color:#f92672">+</span>T<span style="color:#f92672">+</span>G);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">% 8. Filter the signal above the threshold</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (signal<span style="color:#f92672">&lt;</span>threshold)
</span></span><span style="display:flex;"><span>        signal=<span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>    signal_cfar = [signal_cfar, {signal}];
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% plot the filtered signal</span>
</span></span><span style="display:flex;"><span>plot (cell2mat(signal_cfar),<span style="color:#e6db74">&#39;g--&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#75715e">% plot original sig, threshold and filtered signal within the same figure.</span>
</span></span><span style="display:flex;"><span>figure,plot(s);
</span></span><span style="display:flex;"><span>hold on,plot(cell2mat(circshift(threshold_cfar,G)),<span style="color:#e6db74">&#39;r--&#39;</span>,<span style="color:#e6db74">&#39;LineWidth&#39;</span>,<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>hold on, plot (cell2mat(circshift(signal_cfar,(T<span style="color:#f92672">+</span>G))),<span style="color:#e6db74">&#39;g--&#39;</span>,<span style="color:#e6db74">&#39;LineWidth&#39;</span>,<span style="color:#ae81ff">4</span>);
</span></span><span style="display:flex;"><span>legend(<span style="color:#e6db74">&#39;Signal&#39;</span>,<span style="color:#e6db74">&#39;CFAR Threshold&#39;</span>,<span style="color:#e6db74">&#39;detection&#39;</span>)
</span></span></code></pre></div><p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110327085.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110327085.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110327085.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110327085.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110327085.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110327085.png"/></p>
<h6 id="2-2d-ca-cfar">.2. 2D CA-CFAR</h6>
<blockquote>
<p>二维恒虚警类似于一维恒虚警, 但在<code>距离多普勒块的两个维度上都实现了</code>. 2D CA-CFAR包括训练单元,被测单元以及保护单元, 以防止目标信号对噪声估计的影响.</p>
</blockquote>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110438197.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110438197.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110438197.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110438197.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110438197.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110438197.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111210885.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111210885.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111210885.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111210885.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111210885.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028111210885.png"/></p>
<ol>
<li>确定每个维度Tr和Td的训练单元数. 同样, 选择保护单元格Gr和Gd的数量.</li>
<li>在整个单元矩阵上滑动待测单元(CUT).</li>
<li>选择总的包含训练, 保护和测试单元的网格. Grid Size = (2Tr+2Gr+1)(2Td+2Gd+1).</li>
<li>保护区域和被测单元的总数：(2Gr+1)(2Gd+1).</li>
<li>训练单元的总数为：(2Tr+2Gr+1)(2Td+2Gd+1) - (2Gr+1)(2Gd+1)</li>
<li><code>测量并平均所有训练单元的噪声, 并获得阈值</code>.</li>
<li><code>将偏移量（如果以dB为单位的信号强度）添加到阈值, 以将错误警报保持在最低水平.</code></li>
<li>确定<code>被测单元的信号电平.</code></li>
<li>如果CUT信号电平大于阈值, 则将值分配为1, 否则将其等于零.</li>
<li>由于被测单元不位于边缘, 而训练单元占据了边缘, 我们将边缘抑制为零. 任何既不是1也不是0的单元格值, 为其分配一个０.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-matlab" data-lang="matlab"><span style="display:flex;"><span><span style="color:#75715e">% *%TODO* :</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%Select the number of Training Cells in both the dimensions.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Tr=<span style="color:#ae81ff">10</span>;
</span></span><span style="display:flex;"><span>Td=<span style="color:#ae81ff">8</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% *%TODO* :</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%Select the number of Guard Cells in both dimensions around the Cell under </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%test (CUT) for accurate estimation</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Gr=<span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span>Gd=<span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% *%TODO* :</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% offset the threshold by SNR value in dB</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>off_set=<span style="color:#ae81ff">1.4</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">% *%TODO* :</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%design a loop such that it slides the CUT across range doppler map by</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%giving margins at the edges for Training and Guard Cells.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%For every iteration sum the signal level within all the training</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%cells. To sum convert the value from logarithmic to linear using db2pow</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%function. Average the summed values for all of the training</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%cells used. After averaging convert it back to logarithimic using pow2db.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%Further add the offset to it to determine the threshold. Next, compare the</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%signal under CUT with this threshold. If the CUT level &gt; threshold assign</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%it a value of 1, else equate it to 0.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% Use RDM[x,y] as the matrix from the output of 2D FFT for implementing</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% CFAR</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>RDM = RDM<span style="color:#f92672">/</span>max(max(RDM)); <span style="color:#75715e">% Normalizing</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% *%TODO* :</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% The process above will generate a thresholded block, which is smaller </span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%than the Range Doppler Map as the CUT cannot be located at the edges of</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%matrix. Hence,few cells will not be thresholded. To keep the map size same</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">% set those values to 0. </span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%Slide the cell under test across the complete martix,to note: start point</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">%Tr+Td+1 and Td+Gd+1</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i = Tr<span style="color:#f92672">+</span>Gr<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>:(Nr<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>)<span style="color:#f92672">-</span>(Tr<span style="color:#f92672">+</span>Gr)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> j = Td<span style="color:#f92672">+</span>Gd<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>:(Nd)<span style="color:#f92672">-</span>(Td<span style="color:#f92672">+</span>Gd)
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">%Create a vector to store noise_level for each iteration on training cells</span>
</span></span><span style="display:flex;"><span>        noise_level = zeros(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">%Step through each of bins and the surroundings of the CUT</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> p = i<span style="color:#f92672">-</span>(Tr<span style="color:#f92672">+</span>Gr) : i<span style="color:#f92672">+</span>(Tr<span style="color:#f92672">+</span>Gr)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> q = j<span style="color:#f92672">-</span>(Td<span style="color:#f92672">+</span>Gd) : j<span style="color:#f92672">+</span>(Td<span style="color:#f92672">+</span>Gd)
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">%Exclude the Guard cells and CUT cells</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (abs(i<span style="color:#f92672">-</span>p) <span style="color:#f92672">&gt;</span> Gr <span style="color:#f92672">||</span> abs(j<span style="color:#f92672">-</span>q) <span style="color:#f92672">&gt;</span> Gd)
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e">%Convert db to power</span>
</span></span><span style="display:flex;"><span>                    noise_level = noise_level <span style="color:#f92672">+</span> db2pow(RDM(p,q));
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">%Calculate threshould from noise average then add the offset</span>
</span></span><span style="display:flex;"><span>        threshold = pow2db(noise_level<span style="color:#f92672">/</span>(<span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>(Td<span style="color:#f92672">+</span>Gd<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>(Tr<span style="color:#f92672">+</span>Gr<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">-</span>(Gr<span style="color:#f92672">*</span>Gd)<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">%Add the SNR to the threshold</span>
</span></span><span style="display:flex;"><span>        threshold = threshold <span style="color:#f92672">+</span> off_set;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">%Measure the signal in Cell Under Test(CUT) and compare against</span>
</span></span><span style="display:flex;"><span>        CUT = RDM(i,j);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (CUT <span style="color:#f92672">&lt;</span> threshold)
</span></span><span style="display:flex;"><span>            RDM(i,j) = <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>            RDM(i,j) = <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>RDM(RDM<span style="color:#f92672">~=</span><span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;</span> RDM<span style="color:#f92672">~=</span><span style="color:#ae81ff">1</span>) = <span style="color:#ae81ff">0</span>;
</span></span></code></pre></div><p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110714250.png"
    data-srcset="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110714250.png, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110714250.png 1.5x, https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110714250.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110714250.png"
    title="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20211028110714250.png"/></p>
<h5 id="2-ordered-statistics-cfar-os-cfar">2. Ordered Statistics CFAR (OS CFAR)</h5>
<h5 id="3-maximum-minimum-statistic-mamis-cfar">3. Maximum Minimum Statistic (MAMIS CFAR)</h5>
<h5 id="4-multiple-variants-of-ca-cfar">4. multiple variants of CA-CFAR</h5>
<h3 id="5-相关知识">5. 相关知识</h3>
<h4 id="1-fft">1. FFT</h4>
<blockquote>
<p>numpy.fft.<strong>fft</strong>(x, n = 10) 和 scipy.fftpack.fft(x, n = 10)</p>
<ul>
<li>第一个参数x表示输入的序列，</li>
<li>第二个参数n制定FFT的点数，n值如果没有的话，那么就默认输入序列的个数为FFT的点数</li>
<li>两者虽然相同，但是scipy.fftpack.fft的效率更高，推荐优先使用。</li>
</ul>
<p>numpy和scipy中都有<strong>fftshift</strong>，用于将FFT变换之后的频谱显示范围从[0, N]变为：<a href="N%e4%b8%ba%e5%81%b6%e6%95%b0">-N/2, N/2-1</a>         或者<a href="N%e4%b8%ba%e5%a5%87%e6%95%b0">-(N-1)/2, (N-1)/2</a></p>
<p>**fftfreq：**在画频谱图的时候，要给出横坐标的数字频率；scipy.fftpack.fftfreq(n, d=1.0)</p>
<ul>
<li>第一个参数n是FFT的点数，一般取FFT之后的数据的长度（size）</li>
<li>第二个参数d是采样周期，其倒数就是采样频率Fs，即d=1/Fs</li>
</ul>
</blockquote>
<h4 id="2-resource">2. resource</h4>
<ul>
<li><a href="https://blog.csdn.net/qq_40603614/article/details/112706620"target="_blank" rel="external nofollow noopener noreferrer">设备连接<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
<li><a href="https://zhuanlan.zhihu.com/p/128514763"target="_blank" rel="external nofollow noopener noreferrer">噪音处理<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
<li><a href="https://zhuanlan.zhihu.com/p/344519720"target="_blank" rel="external nofollow noopener noreferrer">CFAR python code<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
<li><a href="https://blog.csdn.net/qq_35605018/article/details/108816709"target="_blank" rel="external nofollow noopener noreferrer">csdn matlab handle<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
</ul>
</div>
<div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title=2023-09-28&#32;22:57:26>更新于 2023-09-28&nbsp;</span>
      </div><div class="post-info-license">
          <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span>
        </div></div>
    <div class="post-info-line">
      <div class="post-info-md"><span><a href="liudongdong1.github.io/tidevicecoding/index.md" title="阅读原始文档" class="link-to-markdown">阅读原始文档</a></span><span><a href="https://liudongdong1.github.io/edit/master/content/posts%5cAIOT%5cmmwave%5cTIDeviceCoding.md" title="编辑此页"target="_blank" rel="external nofollow noopener noreferrer" class="link-to-edit">编辑此页</a></span></div>
      <div class="post-info-share">
        <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="liudongdong1.github.io/tidevicecoding/" data-title="TIDeviceCoding" data-hashtags="mmWave"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="liudongdong1.github.io/tidevicecoding/" data-hashtag="mmWave"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="liudongdong1.github.io/tidevicecoding/" data-title="TIDeviceCoding" data-image="https://cdn.stocksnap.io/img-thumbs/280h/bird-perched_RDHWPJKENF.jpg"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
      </div>
    </div>
  </div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="liudongdong1.github.io/tags/mmwave/">mmWave</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="liudongdong1.github.io/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="liudongdong1.github.io/timesequence/" class="prev" rel="prev" title="TimeSeqence"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>TimeSeqence</a>
      <a href="liudongdong1.github.io/threadrelative/" class="next" rel="next" title="ThreadRelative">ThreadRelative<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.118.2">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.2.17-RC"><img class="fixit-icon" src="/liudongdong1.github.io/fixit.min.svg" alt="FixIt logo" />&nbsp;FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2020 - 2023</span><span class="author" itemprop="copyrightHolder">
              <a href="https://liudongdong1.github.io/"target="_blank" rel="external nofollow noopener noreferrer">LiuDongdong</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div><div class="footer-line statistics"><span class="site-time" title='网站运行中 ...'><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden="true"></i>&nbsp;<span class="run-times">网站运行中 ...</span></span></div><div class="footer-line ibruce">
          <span id="busuanzi_container_site_uv" title='总访客数'><i class="fa-regular fa-user fa-fw" aria-hidden="true"></i>&nbsp;<span id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span></span><span id="busuanzi_container_site_pv" class="footer-divider" title='总访问量'><i class="fa-regular fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span></span>
        </div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div></div><a href="https://liudongdong1.github.io/" title="在 GitHub 上查看源代码"target="_blank" rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><div id="mask"></div><div class="reading-progress-bar" style="left: 0;top: 0;--bg-progress: #0076ff;--bg-progress-dark: #fff;"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/liudongdong1.github.io/lib/katex/katex.min.css"><link rel="stylesheet" href="/liudongdong1.github.io/lib/cookieconsent/cookieconsent.min.css"><script src="/liudongdong1.github.io/lib/autocomplete/autocomplete.min.js" defer></script><script src="/liudongdong1.github.io/lib/algoliasearch/algoliasearch-lite.umd.min.js" defer></script><script src="/liudongdong1.github.io/lib/lazysizes/lazysizes.min.js" async defer></script><script src="/liudongdong1.github.io/lib/sharer/sharer.min.js" async defer></script><script src="/liudongdong1.github.io/lib/typeit/index.umd.js" defer></script><script src="/liudongdong1.github.io/lib/katex/katex.min.js" defer></script><script src="/liudongdong1.github.io/lib/katex/auto-render.min.js" defer></script><script src="/liudongdong1.github.io/lib/katex/copy-tex.min.js" defer></script><script src="/liudongdong1.github.io/lib/katex/mhchem.min.js" defer></script><script src="/liudongdong1.github.io/lib/cookieconsent/cookieconsent.min.js" defer></script><script src="/liudongdong1.github.io/lib/pangu/pangu.min.js" defer></script><script src="/liudongdong1.github.io/lib/cell-watermark/watermark.min.js" defer></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":10},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验。"},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"data":{"typeit-header-subtitle-desktop":"\u003cspan style='font-family: MMT,\"沐目体\";'\u003e吾日三省吾身\u003c/span\u003e","typeit-header-subtitle-mobile":"\u003cspan style='font-family: MMT,\"沐目体\";'\u003e吾日三省吾身\u003c/span\u003e"},"enablePWA":true,"enablePangu":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"2R1K9SKLQZ","algoliaIndex":"index.zh-cn","algoliaSearchKey":"4a226aa1c5c98d6859e4d1386adb2bc7","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"},"siteTime":"2020-12-18T16:15:22+08:00","typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},"duration":-1,"speed":100},"watermark":{"appendto":".wrapper\u003emain","colspacing":30,"content":"\u003cimg class=\"fixit-icon\" src=\"/fixit.min.svg\" alt=\"FixIt logo\" /\u003e FixIt 主题","enable":true,"fontfamily":"inherit","fontsize":0.85,"height":21,"opacity":0.0125,"rotate":15,"rowspacing":60,"width":150}};</script><script src="/liudongdong1.github.io/js/theme.min.js" defer></script><script src="/liudongdong1.github.io/js/custom.min.js" defer></script></body>
</html>
