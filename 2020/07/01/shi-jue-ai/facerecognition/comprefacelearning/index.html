<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="CompreFaceLearning, AIOT,Space&amp;Temporal Sequence Analysis,SpringBoot,liudongdong1,cloud">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>CompreFaceLearning | DaybyDay</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="DaybyDay" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">DaybyDay</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">

      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/about">
          
          <i class="fas fa-user-circle" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>about</span>
        </a>
      </li>
      
      <li>
        <a href="/resume">
          
          <i class="fa fa-user-secret" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>resume</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/gallery" class="waves-effect waves-light">
      
      <i class="fas fa-camera" style="zoom: 0.6;"></i>
      
      <span>Galleries</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">DaybyDay</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-user-circle"></i>
			
			About
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/about " style="margin-left:75px">
				  
				   <i class="fa fas fa-user-circle" style="position: absolute;left:50px" ></i>
			      
		          <span>about</span>
                  </a>
                </li>
              
                <li>

                  <a href="/resume " style="margin-left:75px">
				  
				   <i class="fa fa fa-user-secret" style="position: absolute;left:50px" ></i>
			      
		          <span>resume</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/gallery" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-camera"></i>
			
			Galleries
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/liudongdong1" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/liudongdong1" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.pixabay.com/photo/2018/07/09/21/03/integration-3527268__340.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">CompreFaceLearning</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    .toc-fixed .toc-link::before{
        position: fixed!important;/*当toc的位置改为fixed时，.toc-link::before也要改为fixed*/
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/FaceRecognition/">
                                <span class="chip bg-color">FaceRecognition</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%A7%86%E8%A7%89AI/" class="post-category">
                                视觉AI
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2020-07-01
                </div>
                

                <!-- 
                    <i class="fa fa-pencil"></i> Author: liudongdong1
                  -->

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2021-07-07
                </div>
                

                <!-- 
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    4.3k
                </div>
                 -->

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>Read Times:&nbsp;&nbsp;
                    26 Min
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="1-Configuration"><a href="#1-Configuration" class="headerlink" title="1. Configuration"></a>1. Configuration</h2><ul>
<li><code>registry</code> - this is the docker hub registry. For release and pre-build images, it should be set to <code>exadel/</code> value</li>
<li><code>postgres_password</code> - password for Postgres database. It should be changed for production systems from the default value.</li>
<li><code>postgres_domain</code> - the domain where Postgres database is run</li>
<li><code>postgres_port</code> - Postgres database port</li>
<li><code>enable_email_server</code> - if true, it will enable email verification for users. You should set email_host, email_username, and email_password variables for the correct work.</li>
<li><code>email_host</code> - a host of the email provider. It should be set if <code>enable_email_server</code> variable is true</li>
<li><code>email_username</code> - a username of email provider for authentication. It should be set if <code>enable_email_server</code> variable is true</li>
<li><code>email_password</code> - a password of email provider for authentication. It should be set if <code>enable_email_server</code> variable is true</li>
<li><code>email_from</code> - this value will see users in <code>from</code> fields when they receive emails from CompreFace. Corresponds to <code>From</code> field in rfc2822. Optional, if not set, then <code>email_username</code> will be used instead</li>
<li><code>save_images_to_db</code> - should the CompreFace save photos to the database. Be careful, <a href="Face-data-migration.md">migrations</a> could be run only if this value is <code>true</code></li>
<li><code>compreface_api_java_options</code> - java options of compreface-api container</li>
<li><code>compreface_admin_java_options</code> - java options of compreface-admin container</li>
<li><code>ADMIN_VERSION</code> - docker image tag of compreface-admin container</li>
<li><code>API_VERSION</code> - docker image tag of compreface-api container</li>
<li><code>FE_VERSION</code> - docker image tag of compreface-fe container</li>
<li><code>CORE_VERSION</code> - docker image tag of compreface-core container</li>
</ul>
<table>
<thead>
<tr>
<th>Custom-build</th>
<th>Base library</th>
<th>CPU</th>
<th>GPU</th>
<th>Face detection model / accuracy on <a href="https://paperswithcode.com/sota/face-detection-on-wider-face-hard" target="_blank" rel="noopener">WIDER Face (Hard)</a></th>
<th>Face recognition model / accuracy on <a href="https://paperswithcode.com/sota/face-verification-on-labeled-faces-in-the" target="_blank" rel="noopener">LFW</a></th>
<th>Age and gender detection</th>
<th>Comment</th>
</tr>
</thead>
<tbody><tr>
<td>FaceNet (default)</td>
<td><a href="https://github.com/davidsandberg/facenet" target="_blank" rel="noopener">FaceNet</a></td>
<td>x86 (AVX instructions)</td>
<td>not supported</td>
<td>MTCNN / 80.9%</td>
<td>FaceNet (20180402-114759) / 99.63%</td>
<td>Custom, the model is taken <a href="https://github.com/GilLevi/AgeGenderDeepLearning" target="_blank" rel="noopener">here</a></td>
<td>For general purposes. Support CPU without AVX2</td>
</tr>
<tr>
<td>Mobilenet</td>
<td><a href="https://github.com/deepinsight/insightface" target="_blank" rel="noopener">InsightFace</a></td>
<td>x86 (AVX2 instructions)</td>
<td>not supported</td>
<td>RetinaFace-MobileNet0.25 / 82.5%</td>
<td>MobileFaceNet,ArcFace / 99.50%</td>
<td>InsightFace</td>
<td>The fastest model among CPU only models</td>
</tr>
<tr>
<td>Mobilenet-gpu</td>
<td><a href="https://github.com/deepinsight/insightface" target="_blank" rel="noopener">InsightFace</a></td>
<td>x86 (AVX2 instructions)</td>
<td>GPU (CUDA required)</td>
<td>RetinaFace-MobileNet0.25 / 82.5%</td>
<td>MobileFaceNet,ArcFace / 99.50%</td>
<td>InsightFace</td>
<td>The fastest model</td>
</tr>
<tr>
<td>SubCenter-ArcFace-r100</td>
<td><a href="https://github.com/deepinsight/insightface" target="_blank" rel="noopener">InsightFace</a></td>
<td>x86 (AVX2 instructions)</td>
<td>not supported</td>
<td>retinaface_r50_v1 / 91.4%</td>
<td>arcface-r100-msfdrop75 / 99.80%</td>
<td>InsightFace</td>
<td>The most accurate model, but the most slow</td>
</tr>
<tr>
<td>SubCenter-ArcFace-r100-gpu</td>
<td><a href="https://github.com/deepinsight/insightface" target="_blank" rel="noopener">InsightFace</a></td>
<td>x86 (AVX2 instructions)</td>
<td>GPU (CUDA required)</td>
<td>retinaface_r50_v1 / 91.4%</td>
<td>arcface-r100-msfdrop75 / 99.80%</td>
<td>InsightFace</td>
<td>The most accurate model</td>
</tr>
</tbody></table>
<h2 id="2-Run"><a href="#2-Run" class="headerlink" title="2. Run"></a>2. Run</h2><ul>
<li>run custom-builds</li>
</ul>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br><span class="line"><span class="comment">#http://localhost:8000/login </span></span><br><span class="line">docker-compose start</span><br><span class="line">docker-compose stop</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>build own custom-build</li>
</ul>
<ol>
<li><p>Upload your model to Google Drive and add it to one the following files into the <code>Calculator</code> class:</p>
<ul>
<li>embedding-calculator/src/services/facescan/plugins/facenet/facenet.py</li>
<li>embedding-calculator/src/services/facescan/plugins/insightface/insightface.py</li>
</ul>
</li>
<li><p>Take the <code>docker-compose</code> file from <code>/dev</code> folder as a template</p>
</li>
<li><p>Specify new model name in build arguments. For more information look at [this documentation](<a href="https://github" target="_blank" rel="noopener">https://github</a>.<br>com/exadel-inc/CompreFace/tree/master/embedding-calculator#run-service). E.g. here is a part of <code>docker-compose</code> file for building with custom model with GPU support.</p>
</li>
</ol>
<p><strong>Step 1.</strong> Install and run CompreFace using our <a href="../README.md#getting-started-with-compreface">Getting Started guide</a></p>
<p><strong>Step 2.</strong> You need to sign up for the system and log in into the account you’ve just created or use the one you already have. After that, the system redirects you to the main page.</p>
<p><strong>Step 3.</strong> Create an application (left section) using the “Create” link at the bottom of the page. An application is where you can create and manage your Face Collections.</p>
<p><strong>Step 4.</strong> Enter your application by clicking on its name. Here you will have two options: you can either add new users and manage their access roles or create new <a href="Face-services-and-plugins.md">Face Services</a>.</p>
<p><strong>Step 5.</strong> To recognize subjects among the known subjects, you need to create Face Recognition Service. After creating a new Face Service, you will see it in the Services List with an appropriate name and API key. After this step, you can look at our [demos]</p>
<p><strong>Step 6.</strong> To add known subjects to your Face Collection of Face Recognition Service, you can use REST API.<br>Once you’ve <a href="Rest-API-description.md#add-an-example-of-a-subject">uploaded all known faces</a>,you can test the collection using <a href="Rest-API-description.md#recognize-faces-from-a-given-image">REST API</a> or the TEST page.<br>We recommend that you use an image size no higher than 5MB, as it could slow down the request process. The supported image formats include JPEG/PNG/JPG/ICO/BMP/GIF/TIF/TIFF.</p>
<p><strong>Step 7.</strong> Upload your photo and let our open-source face recognition system match the image against the Face Collection. If you use a UI for face recognition, you will see the original picture with marks near every face. If you use <a href="Rest-API-description.md#recognize-faces-from-a-given-image">REST API</a>, you will receive a response in JSON format.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveNewImageToFaceCollection</span>(<span class="params">elem</span>) </span>{</span><br><span class="line">    <span class="keyword">let</span> subject = <span class="built_in">encodeURIComponent</span>(<span class="built_in">document</span>.getElementById(<span class="string">"subject"</span>).value);</span><br><span class="line">    <span class="keyword">let</span> apiKey = <span class="built_in">document</span>.getElementById(<span class="string">"apiKey"</span>).value;</span><br><span class="line">    <span class="keyword">let</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">    <span class="keyword">let</span> photo = elem.files[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    formData.append(<span class="string">"file"</span>, photo);</span><br><span class="line"></span><br><span class="line">    fetch(<span class="string">'http://localhost:8000/api/v1/recognition/faces/?subject='</span> + subject,</span><br><span class="line">        {</span><br><span class="line">            method: <span class="string">"POST"</span>,</span><br><span class="line">            headers: {</span><br><span class="line">                <span class="string">"x-api-key"</span>: apiKey</span><br><span class="line">            },</span><br><span class="line">            body: formData</span><br><span class="line">        }</span><br><span class="line">    ).then(<span class="function"><span class="params">r</span> =&gt;</span> r.json()).then(</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>{</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'New example was saved'</span>, data);</span><br><span class="line">        })</span><br><span class="line">        .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>{</span><br><span class="line">            alert(<span class="string">'Request failed: '</span> + <span class="built_in">JSON</span>.stringify(error));</span><br><span class="line">        });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>This function sends the image to our server and shows results in a text area:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">recognizeFace</span>(<span class="params">elem</span>) </span>{</span><br><span class="line">    <span class="keyword">let</span> apiKey = <span class="built_in">document</span>.getElementById(<span class="string">"apiKey"</span>).value;</span><br><span class="line">    <span class="keyword">let</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">    <span class="keyword">let</span> photo = elem.files[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    formData.append(<span class="string">"file"</span>, photo);</span><br><span class="line"></span><br><span class="line">    fetch(<span class="string">'http://localhost:8000/api/v1/recognition/recognize'</span>,</span><br><span class="line">        {</span><br><span class="line">            method: <span class="string">"POST"</span>,</span><br><span class="line">            headers: {</span><br><span class="line">                <span class="string">"x-api-key"</span>: apiKey</span><br><span class="line">            },</span><br><span class="line">            body: formData</span><br><span class="line">        }</span><br><span class="line">    ).then(<span class="function"><span class="params">r</span> =&gt;</span> r.json()).then(</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>{</span><br><span class="line">            <span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).innerHTML = <span class="built_in">JSON</span>.stringify(data);</span><br><span class="line">        })</span><br><span class="line">        .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>{</span><br><span class="line">            alert(<span class="string">'Request failed: '</span> + <span class="built_in">JSON</span>.stringify(error));</span><br><span class="line">        });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p><img src="https://gitee.com/github-25970295/blogpictureV2/raw/master/image-20210626200731382.png" alt=""></p>
<h2 id="3-RestAPI"><a href="#3-RestAPI" class="headerlink" title="3. RestAPI"></a>3. RestAPI</h2><h3 id="Add-a-Subject"><a href="#Add-a-Subject" class="headerlink" title="Add a Subject"></a>Add a Subject</h3><p>Create a new subject in Face Collection. Creating a subject is an optional step,<br>you can <a href="#add-an-example-of-a-subject">upload an example</a> without an existing subject, and a subject will be created automatically.</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST "http://localhost:8000/api/v1/recognition/subjects" \</span><br><span class="line">-H "Content-Type: application/json" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-d '{"subject: &lt;subject_name&gt;"}'</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>application/json</td>
</tr>
<tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>subject</td>
<td>body param</td>
<td>string</td>
<td>required</td>
<td>is the name of the subject. It can be a person name, but it can be any string</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"subject"</span>: <span class="string">"&lt;subject_name&gt;"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>subject</td>
<td>string</td>
<td>is the name of the subject</td>
</tr>
</tbody></table>
<h3 id="Rename-a-Subject"><a href="#Rename-a-Subject" class="headerlink" title="Rename a Subject"></a>Rename a Subject</h3><figure class="highlight plain"><figcaption><span>0.6 version```</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Rename existing subject. If a new subject name already exists, </span><br><span class="line">subjects are merged - all faces from the old subject name are **reassigned** to the subject with the new name, old subject removed.  </span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">curl -X PUT "http://localhost:8000/api/v1/recognition/subjects/&lt;subject&gt;" \</span><br><span class="line">-H "Content-Type: application/json" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-d '{"subject: &lt;subject_name&gt;"}'</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>application/json</td>
</tr>
<tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>subject</td>
<td>body param</td>
<td>string</td>
<td>required</td>
<td>is the name of the subject. It can be a person name, but it can be any string</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"updated"</span>: <span class="string">"true|false"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>updated</td>
<td>boolean</td>
<td>failed or success</td>
</tr>
</tbody></table>
<h3 id="Delete-a-Subject"><a href="#Delete-a-Subject" class="headerlink" title="Delete a Subject"></a>Delete a Subject</h3><figure class="highlight plain"><figcaption><span>0.6 version```</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Delete existing subject and all saved faces.</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">curl -X DELETE "http://localhost:8000/api/v1/recognition/subjects/&lt;subject&gt;" \</span><br><span class="line">-H "Content-Type: application/json" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;"</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>application/json</td>
</tr>
<tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>subject</td>
<td>body param</td>
<td>string</td>
<td>required</td>
<td>is the name of the subject. It can be a person name, but it can be any string</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"subject"</span>: <span class="string">"&lt;subject_name&gt;"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>subject</td>
<td>string</td>
<td>is the name of the subject</td>
</tr>
</tbody></table>
<h3 id="Delete-All-Subjects"><a href="#Delete-All-Subjects" class="headerlink" title="Delete All Subjects"></a>Delete All Subjects</h3><figure class="highlight plain"><figcaption><span>0.6 version```</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Delete all existing subjects and all saved faces.</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">curl -X DELETE "http://localhost:8000/api/v1/recognition/subjects" \</span><br><span class="line">-H "Content-Type: application/json" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;"</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>application/json</td>
</tr>
<tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"deleted"</span>: <span class="string">"&lt;count&gt;"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>deleted</td>
<td>integer</td>
<td>number of deleted subjects</td>
</tr>
</tbody></table>
<h3 id="List-Subjects"><a href="#List-Subjects" class="headerlink" title="List Subjects"></a>List Subjects</h3><figure class="highlight plain"><figcaption><span>0.6 version```</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">This returns all subject related to Face Collection.  </span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">curl -X GET "http://localhost:8000/api/v1/recognition/subjects/" \</span><br><span class="line">-H "Content-Type: application/json" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;"</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>application/json</td>
</tr>
<tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"subjects"</span>: [</span><br><span class="line">    <span class="string">"&lt;subject_name1&gt;"</span>,</span><br><span class="line">    <span class="string">"&lt;subject_name2&gt;"</span></span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>subjects</td>
<td>array</td>
<td>the list of subjects in Face Collection</td>
</tr>
</tbody></table>
<h3 id="Add-an-Example-of-a-Subject"><a href="#Add-an-Example-of-a-Subject" class="headerlink" title="Add an Example of a Subject"></a>Add an Example of a Subject</h3><p>This creates an example of the subject by saving images. You can add as many images as you want to train the system. Image should<br>contain only one face.</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST "http://localhost:8000/api/v1/recognition/faces?subject=&lt;subject&gt;&amp;det_prob_threshold=&lt;det_prob_threshold&gt;" \</span><br><span class="line">-H "Content-Type: multipart/form-data" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-F file=@&lt;local_file&gt;</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>multipart/form-data</td>
</tr>
<tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>subject</td>
<td>param</td>
<td>string</td>
<td>required</td>
<td>is the name you assign to the image you save</td>
</tr>
<tr>
<td>det_prob_threshold</td>
<td>param</td>
<td>string</td>
<td>optional</td>
<td>minimum required confidence that a recognized face is actually a face. Value is between 0.0 and 1.0.</td>
</tr>
<tr>
<td>file</td>
<td>body</td>
<td>image</td>
<td>required</td>
<td>allowed image formats: jpeg, jpg, ico, png, bmp, gif, tif, tiff, webp. Max size is 5Mb</td>
</tr>
</tbody></table>
<p>Response body on success:  </p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"image_id"</span>: <span class="string">"6b135f5b-a365-4522-b1f1-4c9ac2dd0728"</span>,</span><br><span class="line">  <span class="attr">"subject"</span>: <span class="string">"subject1"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>image_id</td>
<td>UUID</td>
<td>UUID of uploaded image</td>
</tr>
<tr>
<td>subject</td>
<td>string</td>
<td>Subject of the saved image</td>
</tr>
</tbody></table>
<h3 id="Recognize-Faces-from-a-Given-Image"><a href="#Recognize-Faces-from-a-Given-Image" class="headerlink" title="Recognize Faces from a Given Image"></a>Recognize Faces from a Given Image</h3><p>To recognize faces from the uploaded image:  </p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl  -X POST "http://localhost:8000/api/v1/recognition/recognize?limit=&lt;limit&gt;&amp;prediction_count=&lt;prediction_count&gt;&amp;det_prob_threshold=&lt;det_prob_threshold&gt;&amp;face_plugins=&lt;face_plugins&gt;&amp;status=&lt;status&gt;" \</span><br><span class="line">-H "Content-Type: multipart/form-data" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-F file=&lt;local_file&gt;</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>multipart/form-data</td>
</tr>
<tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>file</td>
<td>body</td>
<td>image</td>
<td>required</td>
<td>allowed image formats: jpeg, jpg, ico, png, bmp, gif, tif, tiff, webp. Max size is 5Mb</td>
</tr>
<tr>
<td>limit</td>
<td>param</td>
<td>integer</td>
<td>optional</td>
<td>maximum number of faces on the image to be recognized. It recognizes the biggest faces first. Value of 0 represents no limit. Default value: 0</td>
</tr>
<tr>
<td>det_prob_threshold</td>
<td>param</td>
<td>string</td>
<td>optional</td>
<td>minimum required confidence that a recognized face is actually a face. Value is between 0.0 and 1.0.</td>
</tr>
<tr>
<td>prediction_count</td>
<td>param</td>
<td>integer</td>
<td>optional</td>
<td>maximum number of subject predictions per face. It returns the most similar subjects. Default value: 1</td>
</tr>
<tr>
<td>face_plugins</td>
<td>param</td>
<td>string</td>
<td>optional</td>
<td>comma-separated slugs of face plugins. If empty, no additional information is returned. <a href="Face-services-and-plugins.md">Learn more</a></td>
</tr>
<tr>
<td>status</td>
<td>param</td>
<td>boolean</td>
<td>optional</td>
<td>if true includes system information like execution_time and plugin_version fields. Default value is false</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"result"</span> : [ {</span><br><span class="line">    <span class="attr">"age"</span> : [ <span class="number">25</span>, <span class="number">32</span> ],</span><br><span class="line">    <span class="attr">"gender"</span> : <span class="string">"female"</span>,</span><br><span class="line">    <span class="attr">"embedding"</span> : [ <span class="number">9.424854069948196E-4</span>, <span class="string">"..."</span>, <span class="number">-0.011415496468544006</span> ],</span><br><span class="line">    <span class="attr">"box"</span> : {</span><br><span class="line">      <span class="attr">"probability"</span> : <span class="number">1.0</span>,</span><br><span class="line">      <span class="attr">"x_max"</span> : <span class="number">1420</span>,</span><br><span class="line">      <span class="attr">"y_max"</span> : <span class="number">1368</span>,</span><br><span class="line">      <span class="attr">"x_min"</span> : <span class="number">548</span>,</span><br><span class="line">      <span class="attr">"y_min"</span> : <span class="number">295</span></span><br><span class="line">    },</span><br><span class="line">    <span class="attr">"landmarks"</span> : [ [ <span class="number">814</span>, <span class="number">713</span> ], [ <span class="number">1104</span>, <span class="number">829</span> ], [ <span class="number">832</span>, <span class="number">937</span> ], [ <span class="number">704</span>, <span class="number">1030</span> ], [ <span class="number">1017</span>, <span class="number">1133</span> ] ],</span><br><span class="line">    <span class="attr">"subjects"</span> : [ {</span><br><span class="line">      <span class="attr">"similarity"</span> : <span class="number">0.97858</span>,</span><br><span class="line">      <span class="attr">"subject"</span> : <span class="string">"subject1"</span></span><br><span class="line">    } ],</span><br><span class="line">    <span class="attr">"execution_time"</span> : {</span><br><span class="line">      <span class="attr">"age"</span> : <span class="number">28.0</span>,</span><br><span class="line">      <span class="attr">"gender"</span> : <span class="number">26.0</span>,</span><br><span class="line">      <span class="attr">"detector"</span> : <span class="number">117.0</span>,</span><br><span class="line">      <span class="attr">"calculator"</span> : <span class="number">45.0</span></span><br><span class="line">    }</span><br><span class="line">  } ],</span><br><span class="line">  <span class="attr">"plugins_versions"</span> : {</span><br><span class="line">    <span class="attr">"age"</span> : <span class="string">"agegender.AgeDetector"</span>,</span><br><span class="line">    <span class="attr">"gender"</span> : <span class="string">"agegender.GenderDetector"</span>,</span><br><span class="line">    <span class="attr">"detector"</span> : <span class="string">"facenet.FaceDetector"</span>,</span><br><span class="line">    <span class="attr">"calculator"</span> : <span class="string">"facenet.Calculator"</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>age</td>
<td>array</td>
<td>detected age range. Return only if <a href="Face-services-and-plugins.md#face-plugins">age plugin</a> is enabled</td>
</tr>
<tr>
<td>gender</td>
<td>string</td>
<td>detected gender. Return only if <a href="Face-services-and-plugins.md#face-plugins">gender plugin</a> is enabled</td>
</tr>
<tr>
<td>embedding</td>
<td>array</td>
<td>face embeddings. Return only if <a href="Face-services-and-plugins.md#face-plugins">calculator plugin</a> is enabled</td>
</tr>
<tr>
<td>box</td>
<td>object</td>
<td>list of parameters of the bounding box for this face</td>
</tr>
<tr>
<td>probability</td>
<td>float</td>
<td>probability that a found face is actually a face</td>
</tr>
<tr>
<td>x_max, y_max, x_min, y_min</td>
<td>integer</td>
<td>coordinates of the frame containing the face</td>
</tr>
<tr>
<td>landmarks</td>
<td>array</td>
<td>list of the coordinates of the frame containing the face-landmarks. Return only if <a href="Face-services-and-plugins.md#face-plugins">landmarks plugin</a> is enabled</td>
</tr>
<tr>
<td>subjects</td>
<td>list</td>
<td>list of similar subjects with size of <prediction_count> order by similarity</prediction_count></td>
</tr>
<tr>
<td>similarity</td>
<td>float</td>
<td>similarity that on that image predicted person</td>
</tr>
<tr>
<td>subject</td>
<td>string</td>
<td>name of the subject in Face Collection</td>
</tr>
<tr>
<td>execution_time</td>
<td>object</td>
<td>execution time of all plugins</td>
</tr>
<tr>
<td>plugins_versions</td>
<td>object</td>
<td>contains information about plugin versions</td>
</tr>
</tbody></table>
<h3 id="List-of-All-Saved-Examples-of-the-Subject"><a href="#List-of-All-Saved-Examples-of-the-Subject" class="headerlink" title="List of All Saved Examples of the Subject"></a>List of All Saved Examples of the Subject</h3><p>To retrieve a list of subjects saved in a Face Collection:</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X GET "http://localhost:8000/api/v1/recognition/faces?page=&lt;page&gt;&amp;size=&lt;size&gt;" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>page</td>
<td>param</td>
<td>integer</td>
<td>optional</td>
<td>page number of examples to return. Can be used for pagination. Default value is 0. Since 0.6 version</td>
</tr>
<tr>
<td>size</td>
<td>param</td>
<td>integer</td>
<td>optional</td>
<td>faces on page (page size). Can be used for pagination. Default value is 20. Since 0.6 version</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  "faces": [</span><br><span class="line">    {</span><br><span class="line">      "image_id": &lt;image_id&gt;,</span><br><span class="line">      "subject": &lt;subject&gt;</span><br><span class="line">    },</span><br><span class="line">    ...</span><br><span class="line">  ],</span><br><span class="line">  "page_number": 0,</span><br><span class="line">  "page_size": 10,</span><br><span class="line">  "total_pages": 2,</span><br><span class="line">  "total_elements": 12</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>face.image_id</td>
<td>UUID</td>
<td>UUID of the face</td>
</tr>
<tr>
<td>fase.subject</td>
<td>string</td>
<td><subject> of the person, whose picture was saved for this api key</subject></td>
</tr>
<tr>
<td>page_number</td>
<td>integer</td>
<td>page number</td>
</tr>
<tr>
<td>page_size</td>
<td>integer</td>
<td><strong>requested</strong> page size</td>
</tr>
<tr>
<td>total_pages</td>
<td>integer</td>
<td>total pages</td>
</tr>
<tr>
<td>total_elements</td>
<td>integer</td>
<td>total faces</td>
</tr>
</tbody></table>
<h3 id="Delete-All-Examples-of-the-Subject-by-Name"><a href="#Delete-All-Examples-of-the-Subject-by-Name" class="headerlink" title="Delete All Examples of the Subject by Name"></a>Delete All Examples of the Subject by Name</h3><p>To delete all image examples of the <subject>:</subject></p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X DELETE "http://localhost:8000/api/v1/recognition/faces?subject=&lt;subject&gt;" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;"</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>subject</td>
<td>param</td>
<td>string</td>
<td>optional</td>
<td>is the name subject. If this parameter is absent, all faces in Face Collection will be removed</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    "deleted": &lt;count&gt;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>count</td>
<td>integer</td>
<td>Number of deleted faces</td>
</tr>
</tbody></table>
<h3 id="Delete-an-Example-of-the-Subject-by-ID"><a href="#Delete-an-Example-of-the-Subject-by-ID" class="headerlink" title="Delete an Example of the Subject by ID"></a>Delete an Example of the Subject by ID</h3><p>Endpoint to delete an image by ID. If no image found by id - 404.</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X DELETE "http://localhost:8000/api/v1/recognition/faces/&lt;image_id&gt;" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;"</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>image_id</td>
<td>variable</td>
<td>UUID</td>
<td>required</td>
<td>UUID of the removing face</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  "image_id": &lt;image_id&gt;,</span><br><span class="line">  "subject": &lt;subject&gt;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>image_id</td>
<td>UUID</td>
<td>UUID of the removed face</td>
</tr>
<tr>
<td>subject</td>
<td>string</td>
<td><subject> of the person, whose picture was saved for this api key</subject></td>
</tr>
</tbody></table>
<h3 id="Direct-Download-an-Image-example-of-the-Subject-by-ID"><a href="#Direct-Download-an-Image-example-of-the-Subject-by-ID" class="headerlink" title="Direct Download an Image example of the Subject by ID"></a>Direct Download an Image example of the Subject by ID</h3><figure class="highlight plain"><figcaption><span>0.6 version```</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">You can paste this URL into the &lt;img&gt; html tag to show the image.</span><br><span class="line"></span><br><span class="line">```http request</span><br><span class="line">curl -X GET "http://localhost:8000/api/v1/static/&lt;service_api_key&gt;/images/&lt;image_id&gt;"</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>service_api_key</td>
<td>variable</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>image_id</td>
<td>variable</td>
<td>UUID</td>
<td>required</td>
<td>UUID of the image to download</td>
</tr>
</tbody></table>
<p>Response body is binary image. Empty bytes if image not found.</p>
<h3 id="Download-an-Image-example-of-the-Subject-by-ID"><a href="#Download-an-Image-example-of-the-Subject-by-ID" class="headerlink" title="Download an Image example of the Subject by ID"></a>Download an Image example of the Subject by ID</h3><figure class="highlight plain"><figcaption><span>0.6 version```</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">To download an image example of the Subject by ID:</span><br><span class="line"></span><br><span class="line">```http request</span><br><span class="line">curl -X GET "http://localhost:8000/api/v1/recognition/faces/&lt;image_id&gt;/img"</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;"</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>image_id</td>
<td>variable</td>
<td>UUID</td>
<td>required</td>
<td>UUID of the image to download</td>
</tr>
</tbody></table>
<p>Response body is binary image. Empty bytes if image not found.</p>
<h3 id="Verify-Faces-from-a-Given-Image"><a href="#Verify-Faces-from-a-Given-Image" class="headerlink" title="Verify Faces from a Given Image"></a>Verify Faces from a Given Image</h3><p>To compare faces from the uploaded images with the face in saved image ID:</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST "http://localhost:8000/api/v1/recognition/faces/&lt;image_id&gt;/verify?</span><br><span class="line">limit=&lt;limit&gt;&amp;det_prob_threshold=&lt;det_prob_threshold&gt;&amp;face_plugins=&lt;face_plugins&gt;&amp;status=&lt;status&gt;" \</span><br><span class="line">-H "Content-Type: multipart/form-data" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-F file=&lt;local_file&gt;</span><br></pre></td></tr></tbody></table></figure>


<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>multipart/form-data</td>
</tr>
<tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face recognition service, created by the user</td>
</tr>
<tr>
<td>image_id</td>
<td>variable</td>
<td>UUID</td>
<td>required</td>
<td>UUID of the verifying face</td>
</tr>
<tr>
<td>file</td>
<td>body</td>
<td>image</td>
<td>required</td>
<td>allowed image formats: jpeg, jpg, ico, png, bmp, gif, tif, tiff, webp. Max size is 5Mb</td>
</tr>
<tr>
<td>limit</td>
<td>param</td>
<td>integer</td>
<td>optional</td>
<td>maximum number of faces on the target image to be recognized. It recognizes the biggest faces first. Value of 0 represents no limit. Default value: 0</td>
</tr>
<tr>
<td>det_prob_threshold</td>
<td>param</td>
<td>string</td>
<td>optional</td>
<td>minimum required confidence that a recognized face is actually a face. Value is between 0.0 and 1.0.</td>
</tr>
<tr>
<td>face_plugins</td>
<td>param</td>
<td>string</td>
<td>optional</td>
<td>comma-separated slugs of face plugins. If empty, no additional information is returned. <a href="Face-services-and-plugins.md">Learn more</a></td>
</tr>
<tr>
<td>status</td>
<td>param</td>
<td>boolean</td>
<td>optional</td>
<td>if true includes system information like execution_time and plugin_version fields. Default value is false</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"result"</span>: [</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">"age"</span> : [ <span class="number">25</span>, <span class="number">32</span> ],</span><br><span class="line">      <span class="attr">"gender"</span> : <span class="string">"female"</span>,</span><br><span class="line">      <span class="attr">"embedding"</span> : [ <span class="number">-0.049007344990968704</span>, <span class="string">"..."</span>, <span class="number">-0.01753818802535534</span> ],</span><br><span class="line">      <span class="attr">"box"</span> : {</span><br><span class="line">        <span class="attr">"probability"</span> : <span class="number">0.9997453093528748</span>,</span><br><span class="line">        <span class="attr">"x_max"</span> : <span class="number">205</span>,</span><br><span class="line">        <span class="attr">"y_max"</span> : <span class="number">167</span>,</span><br><span class="line">        <span class="attr">"x_min"</span> : <span class="number">48</span>,</span><br><span class="line">        <span class="attr">"y_min"</span> : <span class="number">0</span></span><br><span class="line">      },</span><br><span class="line">      <span class="attr">"landmarks"</span> : [ [ <span class="number">260</span>, <span class="number">129</span> ], [ <span class="number">273</span>, <span class="number">127</span> ], [ <span class="number">258</span>, <span class="number">136</span> ], [ <span class="number">257</span>, <span class="number">150</span> ], [ <span class="number">269</span>, <span class="number">148</span> ] ],</span><br><span class="line">      <span class="attr">"similarity"</span> : <span class="number">0.97858</span>,</span><br><span class="line">      <span class="attr">"execution_time"</span> : {</span><br><span class="line">        <span class="attr">"age"</span> : <span class="number">59.0</span>,</span><br><span class="line">        <span class="attr">"gender"</span> : <span class="number">30.0</span>,</span><br><span class="line">        <span class="attr">"detector"</span> : <span class="number">177.0</span>,</span><br><span class="line">        <span class="attr">"calculator"</span> : <span class="number">70.0</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"plugins_versions"</span> : {</span><br><span class="line">    <span class="attr">"age"</span> : <span class="string">"agegender.AgeDetector"</span>,</span><br><span class="line">    <span class="attr">"gender"</span> : <span class="string">"agegender.GenderDetector"</span>,</span><br><span class="line">    <span class="attr">"detector"</span> : <span class="string">"facenet.FaceDetector"</span>,</span><br><span class="line">    <span class="attr">"calculator"</span> : <span class="string">"facenet.Calculator"</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>age</td>
<td>array</td>
<td>detected age range. Return only if <a href="Face-services-and-plugins.md#face-plugins">age plugin</a> is enabled</td>
</tr>
<tr>
<td>gender</td>
<td>string</td>
<td>detected gender. Return only if <a href="Face-services-and-plugins.md#face-plugins">gender plugin</a> is enabled</td>
</tr>
<tr>
<td>embedding</td>
<td>array</td>
<td>face embeddings. Return only if <a href="Face-services-and-plugins.md#face-plugins">calculator plugin</a> is enabled</td>
</tr>
<tr>
<td>box</td>
<td>object</td>
<td>list of parameters of the bounding box for this face</td>
</tr>
<tr>
<td>probability</td>
<td>float</td>
<td>probability that a found face is actually a face</td>
</tr>
<tr>
<td>x_max, y_max, x_min, y_min</td>
<td>integer</td>
<td>coordinates of the frame containing the face</td>
</tr>
<tr>
<td>landmarks</td>
<td>array</td>
<td>list of the coordinates of the frame containing the face-landmarks. Return only if <a href="Face-services-and-plugins.md#face-plugins">landmarks plugin</a> is enabled</td>
</tr>
<tr>
<td>similarity</td>
<td>float</td>
<td>similarity that on that image predicted person</td>
</tr>
<tr>
<td>execution_time</td>
<td>object</td>
<td>execution time of all plugins</td>
</tr>
<tr>
<td>plugins_versions</td>
<td>object</td>
<td>contains information about plugin versions</td>
</tr>
</tbody></table>
<h2 id="Face-Detection-Service"><a href="#Face-Detection-Service" class="headerlink" title="Face Detection Service"></a>Face Detection Service</h2><p>To detect faces from the uploaded image:</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl  -X POST "http://localhost:8000/api/v1/detection/detect?limit=&lt;limit&gt;&amp;det_prob_threshold=&lt;det_prob_threshold&gt;&amp;face_plugins=&lt;face_plugins&gt;&amp;status=&lt;status&gt;" \</span><br><span class="line">-H "Content-Type: multipart/form-data" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-F file=&lt;local_file&gt;</span><br></pre></td></tr></tbody></table></figure>


<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>multipart/form-data</td>
</tr>
<tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face Detection service, created by the user</td>
</tr>
<tr>
<td>file</td>
<td>body</td>
<td>image</td>
<td>required</td>
<td>image where to detect faces. Allowed image formats: jpeg, jpg, ico, png, bmp, gif, tif, tiff, webp. Max size is 5Mb</td>
</tr>
<tr>
<td>limit</td>
<td>param</td>
<td>integer</td>
<td>optional</td>
<td>maximum number of faces on the image to be recognized. It recognizes the biggest faces first. Value of 0 represents no limit. Default value: 0</td>
</tr>
<tr>
<td>det_prob_threshold</td>
<td>param</td>
<td>string</td>
<td>optional</td>
<td>minimum required confidence that a recognized face is actually a face. Value is between 0.0 and 1.0</td>
</tr>
<tr>
<td>face_plugins</td>
<td>param</td>
<td>string</td>
<td>optional</td>
<td>comma-separated slugs of face plugins. If empty, no additional information is returned. <a href="Face-services-and-plugins.md">Learn more</a></td>
</tr>
<tr>
<td>status</td>
<td>param</td>
<td>boolean</td>
<td>optional</td>
<td>if true includes system information like execution_time and plugin_version fields. Default value is false</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"result"</span> : [ {</span><br><span class="line">    <span class="attr">"age"</span> : [ <span class="number">25</span>, <span class="number">32</span> ],</span><br><span class="line">    <span class="attr">"gender"</span> : <span class="string">"female"</span>,</span><br><span class="line">    <span class="attr">"embedding"</span> : [ <span class="number">-0.03027934394776821</span>, <span class="string">"..."</span>, <span class="number">-0.05117142200469971</span> ],</span><br><span class="line">    <span class="attr">"box"</span> : {</span><br><span class="line">      <span class="attr">"probability"</span> : <span class="number">0.9987509250640869</span>,</span><br><span class="line">      <span class="attr">"x_max"</span> : <span class="number">376</span>,</span><br><span class="line">      <span class="attr">"y_max"</span> : <span class="number">479</span>,</span><br><span class="line">      <span class="attr">"x_min"</span> : <span class="number">68</span>,</span><br><span class="line">      <span class="attr">"y_min"</span> : <span class="number">77</span></span><br><span class="line">    },</span><br><span class="line">    <span class="attr">"landmarks"</span> : [ [ <span class="number">156</span>, <span class="number">245</span> ], [ <span class="number">277</span>, <span class="number">253</span> ], [ <span class="number">202</span>, <span class="number">311</span> ], [ <span class="number">148</span>, <span class="number">358</span> ], [ <span class="number">274</span>, <span class="number">365</span> ] ],</span><br><span class="line">    <span class="attr">"execution_time"</span> : {</span><br><span class="line">      <span class="attr">"age"</span> : <span class="number">30.0</span>,</span><br><span class="line">      <span class="attr">"gender"</span> : <span class="number">26.0</span>,</span><br><span class="line">      <span class="attr">"detector"</span> : <span class="number">130.0</span>,</span><br><span class="line">      <span class="attr">"calculator"</span> : <span class="number">49.0</span></span><br><span class="line">    }</span><br><span class="line">  } ],</span><br><span class="line">  <span class="attr">"plugins_versions"</span> : {</span><br><span class="line">    <span class="attr">"age"</span> : <span class="string">"agegender.AgeDetector"</span>,</span><br><span class="line">    <span class="attr">"gender"</span> : <span class="string">"agegender.GenderDetector"</span>,</span><br><span class="line">    <span class="attr">"detector"</span> : <span class="string">"facenet.FaceDetector"</span>,</span><br><span class="line">    <span class="attr">"calculator"</span> : <span class="string">"facenet.Calculator"</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>age</td>
<td>array</td>
<td>detected age range. Return only if <a href="Face-services-and-plugins.md#face-plugins">age plugin</a> is enabled</td>
</tr>
<tr>
<td>gender</td>
<td>string</td>
<td>detected gender. Return only if <a href="Face-services-and-plugins.md#face-plugins">gender plugin</a> is enabled</td>
</tr>
<tr>
<td>embedding</td>
<td>array</td>
<td>face embeddings. Return only if <a href="Face-services-and-plugins.md#face-plugins">calculator plugin</a> is enabled</td>
</tr>
<tr>
<td>box</td>
<td>object</td>
<td>list of parameters of the bounding box for this face (on processedImage)</td>
</tr>
<tr>
<td>probability</td>
<td>float</td>
<td>probability that a found face is actually a face (on processedImage)</td>
</tr>
<tr>
<td>x_max, y_max, x_min, y_min</td>
<td>integer</td>
<td>coordinates of the frame containing the face (on processedImage)</td>
</tr>
<tr>
<td>landmarks</td>
<td>array</td>
<td>list of the coordinates of the frame containing the face-landmarks. Return only if <a href="Face-services-and-plugins.md#face-plugins">landmarks plugin</a> is enabled</td>
</tr>
<tr>
<td>execution_time</td>
<td>object</td>
<td>execution time of all plugins</td>
</tr>
<tr>
<td>plugins_versions</td>
<td>object</td>
<td>contains information about plugin versions</td>
</tr>
</tbody></table>
<h2 id="Face-Verification-Service"><a href="#Face-Verification-Service" class="headerlink" title="Face Verification Service"></a>Face Verification Service</h2><p>To compare faces from given two images:</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl  -X POST "http://localhost:8000/api/v1/verification/verify?limit=&lt;limit&gt;&amp;prediction_count=&lt;prediction_count&gt;&amp;det_prob_threshold=&lt;det_prob_threshold&gt;&amp;face_plugins=&lt;face_plugins&gt;&amp;status=&lt;status&gt;" \</span><br><span class="line">-H "Content-Type: multipart/form-data" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-F source_image=&lt;local_check_file&gt;</span><br><span class="line">-F target_image=&lt;local_process_file&gt;</span><br></pre></td></tr></tbody></table></figure>


<table>
<thead>
<tr>
<th>Element</th>
<th>Description</th>
<th>Type</th>
<th>Required</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>Content-Type</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>multipart/form-data</td>
</tr>
<tr>
<td>x-api-key</td>
<td>header</td>
<td>string</td>
<td>required</td>
<td>api key of the Face verification service, created by the user</td>
</tr>
<tr>
<td>source_image</td>
<td>body</td>
<td>image</td>
<td>required</td>
<td>file to be verified. Allowed image formats: jpeg, jpg, ico, png, bmp, gif, tif, tiff, webp. Max size is 5Mb</td>
</tr>
<tr>
<td>target_image</td>
<td>body</td>
<td>image</td>
<td>required</td>
<td>reference file to check the source file. Allowed image formats: jpeg, jpg, ico, png, bmp, gif, tif, tiff, webp. Max size is 5Mb</td>
</tr>
<tr>
<td>limit</td>
<td>param</td>
<td>integer</td>
<td>optional</td>
<td>maximum number of faces on the target image to be recognized. It recognizes the biggest faces first. Value of 0 represents no limit. Default value: 0</td>
</tr>
<tr>
<td>det_prob_threshold</td>
<td>param</td>
<td>string</td>
<td>optional</td>
<td>minimum required confidence that a recognized face is actually a face. Value is between 0.0 and 1.0.</td>
</tr>
<tr>
<td>face_plugins</td>
<td>param</td>
<td>string</td>
<td>optional</td>
<td>comma-separated slugs of face plugins. If empty, no additional information is returned. <a href="Face-services-and-plugins.md">Learn more</a></td>
</tr>
<tr>
<td>status</td>
<td>param</td>
<td>boolean</td>
<td>optional</td>
<td>if true includes system information like execution_time and plugin_version fields. Default value is false</td>
</tr>
</tbody></table>
<p>Response body on success:</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"result"</span> : [{</span><br><span class="line">    <span class="attr">"source_image_face"</span> : {</span><br><span class="line">      <span class="attr">"age"</span> : [ <span class="number">25</span>, <span class="number">32</span> ],</span><br><span class="line">      <span class="attr">"gender"</span> : <span class="string">"female"</span>,</span><br><span class="line">      <span class="attr">"embedding"</span> : [ <span class="number">-0.0010271212086081505</span>, <span class="string">"..."</span>, <span class="number">-0.008746841922402382</span> ],</span><br><span class="line">      <span class="attr">"box"</span> : {</span><br><span class="line">        <span class="attr">"probability"</span> : <span class="number">0.9997453093528748</span>,</span><br><span class="line">        <span class="attr">"x_max"</span> : <span class="number">205</span>,</span><br><span class="line">        <span class="attr">"y_max"</span> : <span class="number">167</span>,</span><br><span class="line">        <span class="attr">"x_min"</span> : <span class="number">48</span>,</span><br><span class="line">        <span class="attr">"y_min"</span> : <span class="number">0</span></span><br><span class="line">      },</span><br><span class="line">      <span class="attr">"landmarks"</span> : [ [ <span class="number">92</span>, <span class="number">44</span> ], [ <span class="number">130</span>, <span class="number">68</span> ], [ <span class="number">71</span>, <span class="number">76</span> ], [ <span class="number">60</span>, <span class="number">104</span> ], [ <span class="number">95</span>, <span class="number">125</span> ] ],</span><br><span class="line">      <span class="attr">"execution_time"</span> : {</span><br><span class="line">        <span class="attr">"age"</span> : <span class="number">85.0</span>,</span><br><span class="line">        <span class="attr">"gender"</span> : <span class="number">51.0</span>,</span><br><span class="line">        <span class="attr">"detector"</span> : <span class="number">67.0</span>,</span><br><span class="line">        <span class="attr">"calculator"</span> : <span class="number">116.0</span></span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">"face_matches"</span>: [</span><br><span class="line">      {</span><br><span class="line">        <span class="attr">"age"</span> : [ <span class="number">25</span>, <span class="number">32</span> ],</span><br><span class="line">        <span class="attr">"gender"</span> : <span class="string">"female"</span>,</span><br><span class="line">        <span class="attr">"embedding"</span> : [ <span class="number">-0.049007344990968704</span>, <span class="string">"..."</span>, <span class="number">-0.01753818802535534</span> ],</span><br><span class="line">        <span class="attr">"box"</span> : {</span><br><span class="line">          <span class="attr">"probability"</span> : <span class="number">0.99975</span>,</span><br><span class="line">          <span class="attr">"x_max"</span> : <span class="number">308</span>,</span><br><span class="line">          <span class="attr">"y_max"</span> : <span class="number">180</span>,</span><br><span class="line">          <span class="attr">"x_min"</span> : <span class="number">235</span>,</span><br><span class="line">          <span class="attr">"y_min"</span> : <span class="number">98</span></span><br><span class="line">        },</span><br><span class="line">        <span class="attr">"landmarks"</span> : [ [ <span class="number">260</span>, <span class="number">129</span> ], [ <span class="number">273</span>, <span class="number">127</span> ], [ <span class="number">258</span>, <span class="number">136</span> ], [ <span class="number">257</span>, <span class="number">150</span> ], [ <span class="number">269</span>, <span class="number">148</span> ] ],</span><br><span class="line">        <span class="attr">"similarity"</span> : <span class="number">0.97858</span>,</span><br><span class="line">        <span class="attr">"execution_time"</span> : {</span><br><span class="line">          <span class="attr">"age"</span> : <span class="number">59.0</span>,</span><br><span class="line">          <span class="attr">"gender"</span> : <span class="number">30.0</span>,</span><br><span class="line">          <span class="attr">"detector"</span> : <span class="number">177.0</span>,</span><br><span class="line">          <span class="attr">"calculator"</span> : <span class="number">70.0</span></span><br><span class="line">        }</span><br><span class="line">      }],</span><br><span class="line">    <span class="attr">"plugins_versions"</span> : {</span><br><span class="line">      <span class="attr">"age"</span> : <span class="string">"agegender.AgeDetector"</span>,</span><br><span class="line">      <span class="attr">"gender"</span> : <span class="string">"agegender.GenderDetector"</span>,</span><br><span class="line">      <span class="attr">"detector"</span> : <span class="string">"facenet.FaceDetector"</span>,</span><br><span class="line">      <span class="attr">"calculator"</span> : <span class="string">"facenet.Calculator"</span></span><br><span class="line">    }</span><br><span class="line">  }]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<table>
<thead>
<tr>
<th>Element</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>source_image_face</td>
<td>object</td>
<td>additional info about source image face</td>
</tr>
<tr>
<td>face_matches</td>
<td>array</td>
<td>result of face verification</td>
</tr>
<tr>
<td>age</td>
<td>array</td>
<td>detected age range. Return only if <a href="Face-services-and-plugins.md#face-plugins">age plugin</a> is enabled</td>
</tr>
<tr>
<td>gender</td>
<td>string</td>
<td>detected gender. Return only if <a href="Face-services-and-plugins.md#face-plugins">gender plugin</a> is enabled</td>
</tr>
<tr>
<td>embedding</td>
<td>array</td>
<td>face embeddings. Return only if <a href="Face-services-and-plugins.md#face-plugins">calculator plugin</a> is enabled</td>
</tr>
<tr>
<td>box</td>
<td>object</td>
<td>list of parameters of the bounding box for this face</td>
</tr>
<tr>
<td>probability</td>
<td>float</td>
<td>probability that a found face is actually a face</td>
</tr>
<tr>
<td>x_max, y_max, x_min, y_min</td>
<td>integer</td>
<td>coordinates of the frame containing the face</td>
</tr>
<tr>
<td>landmarks</td>
<td>array</td>
<td>list of the coordinates of the frame containing the face-landmarks. Return only if <a href="Face-services-and-plugins.md#face-plugins">landmarks plugin</a> is enabled</td>
</tr>
<tr>
<td>similarity</td>
<td>float</td>
<td>similarity between this face and the face on the source image</td>
</tr>
<tr>
<td>execution_time</td>
<td>object</td>
<td>execution time of all plugins</td>
</tr>
<tr>
<td>plugins_versions</td>
<td>object</td>
<td>contains information about plugin versions</td>
</tr>
</tbody></table>
<h2 id="Base64-Support"><a href="#Base64-Support" class="headerlink" title="Base64 Support"></a>Base64 Support</h2><p><code>since 0.5.1 version</code></p>
<p>Except <code>multipart/form-data</code>, all CompreFace endpoints, that require images as input, accept images in <code>Base64</code> format.<br>The base rule is to use <code>Content-Type: application/json</code> header and send JSON in the body.<br>The name of the JSON parameter coincides with the name of the <code>multipart/form-data</code> parameter.</p>
<h3 id="Add-an-Example-of-a-Subject-Base64"><a href="#Add-an-Example-of-a-Subject-Base64" class="headerlink" title="Add an Example of a Subject, Base64"></a>Add an Example of a Subject, Base64</h3><p>Full description <a href="#add-an-example-of-a-subject">here</a>.</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST "http://localhost:8000/api/v1/recognition/faces?subject=&lt;subject&gt;&amp;det_prob_threshold=&lt;det_prob_threshold&gt;" \</span><br><span class="line">-H "Content-Type: application/json" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-d {"file": "&lt;base64_value&gt;"}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Recognize-Faces-from-a-Given-Image-Base64"><a href="#Recognize-Faces-from-a-Given-Image-Base64" class="headerlink" title="Recognize Faces from a Given Image, Base64"></a>Recognize Faces from a Given Image, Base64</h3><p>Full description <a href="#recognize-faces-from-a-given-image">here</a>.</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl  -X POST "http://localhost:8000/api/v1/recognition/recognize?limit=&lt;limit&gt;&amp;prediction_count=&lt;prediction_count&gt;&amp;det_prob_threshold=&lt;det_prob_threshold&gt;&amp;face_plugins=&lt;face_plugins&gt;&amp;status=&lt;status&gt;" \</span><br><span class="line">-H "Content-Type: application/json" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-d {"file": "&lt;base64_value&gt;"}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Verify-Faces-from-a-Given-Image-Base64"><a href="#Verify-Faces-from-a-Given-Image-Base64" class="headerlink" title="Verify Faces from a Given Image, Base64"></a>Verify Faces from a Given Image, Base64</h3><p>Full description <a href="#verify-faces-from-a-given-image">here</a>.</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST "http://localhost:8000/api/v1/recognition/faces/&lt;image_id&gt;/verify?</span><br><span class="line">limit=&lt;limit&gt;&amp;det_prob_threshold=&lt;det_prob_threshold&gt;&amp;face_plugins=&lt;face_plugins&gt;&amp;status=&lt;status&gt;" \</span><br><span class="line">-H "Content-Type: application/json" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-d {"file": "&lt;base64_value&gt;"}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Face-Detection-Service-Base64"><a href="#Face-Detection-Service-Base64" class="headerlink" title="Face Detection Service, Base64"></a>Face Detection Service, Base64</h3><p>Full description <a href="#face-detection-service">here</a>.</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl  -X POST "http://localhost:8000/api/v1/detection/detect?limit=&lt;limit&gt;&amp;det_prob_threshold=&lt;det_prob_threshold&gt;&amp;face_plugins=&lt;face_plugins&gt;&amp;status=&lt;status&gt;" \</span><br><span class="line">-H "Content-Type: application/json" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-d {"file": "&lt;base64_value&gt;"}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Face-Verification-Service-Base64"><a href="#Face-Verification-Service-Base64" class="headerlink" title="Face Verification Service, Base64"></a>Face Verification Service, Base64</h3><p>Full description <a href="#face-verification-service">here</a>.</p>
<figure class="highlight"><figcaption><span>request</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST "http://localhost:8000/api/v1/verification/verify?limit=&lt;limit&gt;&amp;prediction_count=&lt;prediction_count&gt;&amp;det_prob_threshold=&lt;det_prob_threshold&gt;&amp;face_plugins=&lt;face_plugins&gt;&amp;status=&lt;status&gt;" \</span><br><span class="line">-H "Content-Type: application/json" \</span><br><span class="line">-H "x-api-key: &lt;service_api_key&gt;" \</span><br><span class="line">-d {"source_image": "&lt;source_image_base64_value&gt;", "target_image": "&lt;target_image_base64_value&gt;"}</span><br></pre></td></tr></tbody></table></figure>

<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liudongdong1.github.io" rel="external nofollow noreferrer">liudongdong1</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://liudongdong1.github.io/2020/07/01/shi-jue-ai/facerecognition/comprefacelearning/">https://liudongdong1.github.io/2020/07/01/shi-jue-ai/facerecognition/comprefacelearning/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="https://liudongdong1.github.io" target="_blank">liudongdong1</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/FaceRecognition/">
                                    <span class="chip bg-color">FaceRecognition</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo,douban" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2020/07/01/aiot/skinsense/">
                    <div class="card-image">
                        
                        <img src="https://gitee.com/github-25970295/blogImage/raw/master/img/20210501110547.png" class="responsive-img" alt="skinSense">
                        
                        <span class="card-title">skinSense</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
人类的皮肤可以感知法向力和剪切力的细微变化(即自解耦)，并能够以更高的分辨率感知刺激（即超分辨）。换句话说，人类的指尖可以感受到压力和纹理，这主要归功于皮肤上一种叫做机械感受器的特殊感觉细胞。
这些细胞连同整个神经系统，将来自环境的机械信
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-07-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/AIOT/" class="post-category">
                                    AIOT
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/skin/">
                        <span class="chip bg-color">skin</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/07/01/shi-jue-ai/facerecognition/facerecognition/">
                    <div class="card-image">
                        
                        <img src="https://gitee.com/github-25970295/blogImage/raw/master/img/laptop-notebook-working-outside.jpg" class="responsive-img" alt="FaceRecognition">
                        
                        <span class="card-title">FaceRecognition</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
1. 人脸检测问题在实际工程应用中，常常会面临非常复杂的工况。一方面算法准确度会受到很多因素影响，例如目标遮挡、光线变化、小尺寸人脸等等。另一方面算法的推理时间也会受到很多因素的影响，例如硬件性能，目标数量，图片尺寸等等。下面是几种工程中
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-07-01
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%A7%86%E8%A7%89AI/" class="post-category">
                                    视觉AI
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/FaceRecognition/">
                        <span class="chip bg-color">FaceRecognition</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <!-- <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="463294659"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>
            <a href="https://liudongdong1.github.io" target="_blank">liudongdong</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">1206.4k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/liudongdong1/" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:3463264078@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>














    <a href="https://blog.csdn.net/liudongdong19/" class="tooltipped" target="_blank" data-tooltip="关注我的CSDN: https://blog.csdn.net/liudongdong19/" data-position="top" data-delay="50">
        <i class="fab fa-csdn">C</i>
    </a>





</div>
    </div>
</footer>

<div class="progress-bar"></div>
 -->

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script type="text/javascript" src="/js/CFS.Snow.min.js"></script>
    <!-- 点击爆灯效果 -->
    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
    <script type="text/javascript" src="/js/fireworks.js"></script>
    <!--动态线条背景-->
    <script type="text/javascript"
        color="122 103 238" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
    </script>
    <!-- 天气 -->
    <!-- weather -->
    <!-- weather -->
    <script type="text/javascript">
         WIDGET = {FID: 'knAMQaFanP'}
    </script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon-refresh.min.js" async="async"></script>
    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    
    <!-- {% include '_custom/custom.swig' %} -->

</body>

</html>
