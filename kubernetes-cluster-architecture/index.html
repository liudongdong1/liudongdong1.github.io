<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>Kubernetes-Cluster Architecture - DAY By DAY</title><meta name="author" content="LiuDongdong">
<meta name="author-link" content="https://liudongdong1.github.io/">
<meta name="description" content="Kubernetes runs your workload by placing containers into Pods to run on Nodes. A node may be a virtual or physical machine, depending on the cluster. Kubernetes主要由以下几个核心组件组成： etcd保存了整个集群的状态； apise" /><meta name="keywords" content='Storage' /><meta itemprop="name" content="Kubernetes-Cluster Architecture">
<meta itemprop="description" content="Kubernetes runs your workload by placing containers into Pods to run on Nodes. A node may be a virtual or physical machine, depending on the cluster. Kubernetes主要由以下几个核心组件组成： etcd保存了整个集群的状态； apise">
<meta itemprop="dateModified" content="2023-09-24T17:00:04+08:00" />
<meta itemprop="wordCount" content="1582"><meta itemprop="image" content="/logo.png"/>
<meta itemprop="keywords" content="Storage," /><meta property="og:title" content="Kubernetes-Cluster Architecture" />
<meta property="og:description" content="Kubernetes runs your workload by placing containers into Pods to run on Nodes. A node may be a virtual or physical machine, depending on the cluster. Kubernetes主要由以下几个核心组件组成： etcd保存了整个集群的状态； apise" />
<meta property="og:type" content="article" />
<meta property="og:url" content="liudongdong1.github.io/kubernetes-cluster-architecture/" /><meta property="og:image" content="/logo.png"/><meta property="article:section" content="posts" />

<meta property="article:modified_time" content="2023-09-24T17:00:04+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="/logo.png"/>

<meta name="twitter:title" content="Kubernetes-Cluster Architecture"/>
<meta name="twitter:description" content="Kubernetes runs your workload by placing containers into Pods to run on Nodes. A node may be a virtual or physical machine, depending on the cluster. Kubernetes主要由以下几个核心组件组成： etcd保存了整个集群的状态； apise"/>
<meta name="application-name" content="DAY By DAY">
<meta name="apple-mobile-web-app-title" content="DAY By DAY"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="liudongdong1.github.io/kubernetes-cluster-architecture/" /><link rel="prev" href="liudongdong1.github.io/kubernetes_etcd%E4%BD%BF%E7%94%A8/" /><link rel="next" href="liudongdong1.github.io/kubernetes_%E5%AD%98%E5%82%A8%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/" /><link rel="stylesheet" href="/liudongdong1.github.io/css/style.min.css"><link rel="stylesheet" href="/liudongdong1.github.io/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/liudongdong1.github.io/lib/animate/animate.min.css"><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Kubernetes-Cluster Architecture",
    "inLanguage": "zh-CN",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "liudongdong1.github.io\/kubernetes-cluster-architecture\/"
    },"genre": "posts","keywords": "Storage","wordcount":  1582 ,
    "url": "liudongdong1.github.io\/kubernetes-cluster-architecture\/","dateModified": "2023-09-24T17:00:04+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
      "@type": "Organization",
      "name": "LiuDongdong","logo": "\/images\/person.png"},"author": {
        "@type": "Person",
        "name": "liudongdong1"
      },"description": ""
  }
  </script></head>
  <body data-header-desktop="auto" data-header-mobile="auto"><script>(window.localStorage?.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('data-theme', 'dark');</script><div class="wrapper"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper" data-github-corner="right">
    <div class="header-title">
      <a href="liudongdong1.github.io/" title="DAY By DAY"><img
    class="lazyload logo"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="/fixit.min.svg"
    data-srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x"
    data-sizes="auto"
    alt="DAY By DAY"
    title="DAY By DAY"/><span class="header-title-text"></span></a><span id="typeit-header-subtitle-desktop" class="typeit header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a
                class="menu-link"
                href="/liudongdong1.github.io/posts/"
                
                
              ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 所有文章</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/liudongdong1.github.io/categories/"
                
                
              ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/liudongdong1.github.io/tags/"
                
                
              ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/liudongdong1.github.io/friends/"
                title="友情链接"
                
              ><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden="true"></i> 友链</a></li><li class="menu-item">
              <a
                class="menu-link"
                href="/liudongdong1.github.io/about/"
                
                
              ><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item language">
            <span role="button" aria-label="选择语言" title="选择语言">简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden="true"></i>
            </span>
            <ul class="sub-menu"><li class="menu-item">没有更多翻译</li></ul>
          </li><li class="menu-item search" id="search-desktop">
            <input type="text" placeholder="搜索文章标题或内容 ..." id="search-input-desktop">
            <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
              <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
            </a>
            <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
              <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
            </a>
            <span class="search-button search-loading" id="search-loading-desktop">
              <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
            </span>
          </li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li>
      </ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="liudongdong1.github.io/" title="DAY By DAY"><img
    class="lazyload logo"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="/fixit.min.svg"
    data-srcset="/fixit.min.svg, /fixit.min.svg 1.5x, /fixit.min.svg 2x"
    data-sizes="auto"
    alt="/fixit.min.svg"
    title="/fixit.min.svg"/><span class="header-title-text"></span></a><span id="typeit-header-subtitle-mobile" class="typeit header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="search-wrapper">
            <div class="search mobile" id="search-mobile">
              <input type="text" placeholder="搜索文章标题或内容 ..." id="search-input-mobile">
              <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                <i class="fa-solid fa-search fa-fw" aria-hidden="true"></i>
              </a>
              <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                <i class="fa-solid fa-times-circle fa-fw" aria-hidden="true"></i>
              </a>
              <span class="search-button search-loading" id="search-loading-mobile">
                <i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
              </span>
            </div>
            <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
              取消
            </a>
          </li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/liudongdong1.github.io/posts/"
                  
                  
                ><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 所有文章</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/liudongdong1.github.io/categories/"
                  
                  
                ><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/liudongdong1.github.io/tags/"
                  
                  
                ><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/liudongdong1.github.io/friends/"
                  title="友情链接"
                  
                ><i class="fa-solid fa-users fa-fw fa-sm" aria-hidden="true"></i> 友链</a></li><li
              class="menu-item"
            ><a
                  class="menu-link"
                  href="/liudongdong1.github.io/about/"
                  
                  
                ><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden="true"></i> 关于</a></li><li
              class="menu-item text-center"
            ><a
                  class="menu-link"
                  href="https://liudongdong1.github.io/"
                  title="GitHub"
                  rel="noopener noreferrer" target="_blank"
                ><i class='fa-brands fa-github fa-fw' aria-hidden='true'></i> </a></li><li class="menu-item theme-switch" title="切换主题">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li><li class="menu-item language">
            <span role="button" aria-label="选择语言" title="选择语言">简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden="true"></i>
            </span>
            <select class="language-select" onchange="location = this.value;"><option disabled>没有更多翻译</option></select>
          </li></ul>
    </nav>
  </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
  </div>
  <div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
  </div><main class="container" data-page-style="normal"><aside class="toc" id="toc-auto"><h2 class="toc-title">目录 <i class="toc-icon fa-solid fa-angle-down fa-fw"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside>

  <aside class="aside-custom" id="aside-sakana">
    

<div class="sakana-widget">
  <div class="sakana-item" id="takina-widget"></div>
  <div class="sakana-item" id="chisato-widget"></div>
</div>
<script>
  function initSakanaWidget() {
    const takina = SakanaWidget.getCharacter('takina')
    SakanaWidget.registerCharacter('takina-slow', takina);
    new SakanaWidget({
      character: 'takina-slow',
      controls: false,
      autoFit: true,
      stroke: {
        color: "#b4b4b4",
        width: 2
      }
    }).mount('#takina-widget');

    const chisato = SakanaWidget.getCharacter('chisato')
    SakanaWidget.registerCharacter('chisato-slow', chisato);
    new SakanaWidget({
      character: 'chisato-slow',
      controls: false,
      autoFit: true,
      stroke: {
        color: "#b4b4b4",
        width: 2
      }
    }).mount('#chisato-widget');
  }
</script>
<script async onload="initSakanaWidget()" src="https://cdn.jsdelivr.net/npm/sakana-widget@2.3.0/lib/sakana.min.js">
</script></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX">
        <span>Kubernetes-Cluster Architecture</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
      liudongdong1</span></span>
          <span class="post-category">收录于 <a href="liudongdong1.github.io/categories/"><i class="fa-regular fa-folder fa-fw"></i>&nbsp;Categories</a>&ensp;<a href="liudongdong1.github.io/categories/storage/"><i class="fa-regular fa-folder fa-fw"></i>&nbsp;Storage</a></span></div>
      <div class="post-meta-line"><span title=0001-01-01&#32;00:00:00>
            <i class="fa-regular fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="0001-01-01" >0001-01-01</time>
          </span>&nbsp;<i class="fa-solid fa-pencil-alt fa-fw"></i>&nbsp;约 1582 字&nbsp;
        <i class="fa-regular fa-clock fa-fw"></i>&nbsp;预计阅读 4 分钟&nbsp;<span id="busuanzi_container_page_pv" class="busuanzi_visitors comment-visitors" data-flag-title="Kubernetes-Cluster Architecture">
            <i class="fa-regular fa-eye fa-fw"></i>&nbsp;<span id="busuanzi_value_page_pv">-</span>&nbsp;次阅读
          </span>&nbsp;</div>
    </div><div class="featured-image"><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://cdn.pixabay.com/photo/2022/05/05/01/11/cormorant-7175037__340.jpg"
    data-srcset="https://cdn.pixabay.com/photo/2022/05/05/01/11/cormorant-7175037__340.jpg, https://cdn.pixabay.com/photo/2022/05/05/01/11/cormorant-7175037__340.jpg 1.5x, https://cdn.pixabay.com/photo/2022/05/05/01/11/cormorant-7175037__340.jpg 2x"
    data-sizes="auto"
    alt="https://cdn.pixabay.com/photo/2022/05/05/01/11/cormorant-7175037__340.jpg"
    title="https://cdn.pixabay.com/photo/2022/05/05/01/11/cormorant-7175037__340.jpg"/></div><div class="details toc" id="toc-static" kept="true">
        <div class="details-summary toc-title">
          <span>目录</span>
          <span><i class="details-icon fa-solid fa-angle-right"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#list-watch机制控制器架构">List-Watch机制控制器架构</a></li>
      </ul>
    </li>
    <li><a href="#1-node">1. Node</a>
      <ul>
        <li><a href="#1-node-status">.1. Node status</a></li>
      </ul>
    </li>
    <li><a href="#2-control-plane-node-communication">2. Control Plane-Node Communication</a>
      <ul>
        <li><a href="#1-node-to-control-plane">.1. Node to Control Plane</a></li>
        <li><a href="#2-control-plane-to-node">.2. Control Plane to node</a></li>
      </ul>
    </li>
    <li><a href="#3-cloud-controller-manager">3. Cloud controller manager</a>
      <ul>
        <li><a href="#1-node-controller">.1. Node controller</a></li>
        <li><a href="#2-route-controller">.2. Route controller</a></li>
        <li><a href="#3-service-controller">.3. Service controller</a></li>
      </ul>
    </li>
    <li><a href="#4-container-runtime-interface-cri">4. Container Runtime Interface (CRI)</a></li>
    <li><a href="#5-framework">5. Framework</a>
      <ul>
        <li><a href="#resource">Resource</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
      </div><div
      class="content"
      id="content"
      
      
    ><blockquote>
<p>Kubernetes runs your workload by placing containers into Pods to run on <em>Nodes</em>. A node may be a virtual or physical machine, depending on the cluster.</p>
</blockquote>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d70666e06094bb5b54a51f661fe4823~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp"
    data-srcset="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d70666e06094bb5b54a51f661fe4823~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp, https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d70666e06094bb5b54a51f661fe4823~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp 1.5x, https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d70666e06094bb5b54a51f661fe4823~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp 2x"
    data-sizes="auto"
    alt="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d70666e06094bb5b54a51f661fe4823~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp"
    title="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d70666e06094bb5b54a51f661fe4823~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210400686.png"
    data-srcset="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210400686.png, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210400686.png 1.5x, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210400686.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210400686.png"
    title="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210400686.png"/></p>
<p>Kubernetes主要由以下几个核心组件组成：</p>
<ul>
<li>etcd保存了整个集群的状态；</li>
<li>apiserver提供了资源操作的唯一入口，并提供认证、授权、访问控制、API注册和发现等机制；</li>
<li>controller manager负责维护集群的状态，比如故障检测、自动扩展、滚动更新等；</li>
<li>scheduler负责资源的调度，按照预定的调度策略将Pod调度到相应的机器上；</li>
<li>kubelet负责维护容器的生命周期，同时也负责Volume（CVI）和网络（CNI）的管理；</li>
<li>Container runtime负责镜像管理以及Pod和容器的真正运行（CRI）；</li>
<li>kube-proxy负责为Service提供cluster内部的服务发现和负载均衡；</li>
</ul>
<p>除了核心组件，还有一些推荐的Add-ons：</p>
<ul>
<li>kube-dns负责为整个集群提供DNS服务</li>
<li>Ingress Controller为服务提供外网入口</li>
<li>Heapster提供资源监控</li>
<li>Dashboard提供GUI</li>
<li>Federation提供跨可用区的集群</li>
</ul>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogimgv2022/raw/master/98593a62139449e281185ab42a0095eetplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp"
    data-srcset="https://gitee.com/github-25970295/blogimgv2022/raw/master/98593a62139449e281185ab42a0095eetplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp, https://gitee.com/github-25970295/blogimgv2022/raw/master/98593a62139449e281185ab42a0095eetplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp 1.5x, https://gitee.com/github-25970295/blogimgv2022/raw/master/98593a62139449e281185ab42a0095eetplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogimgv2022/raw/master/98593a62139449e281185ab42a0095eetplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp"
    title="https://gitee.com/github-25970295/blogimgv2022/raw/master/98593a62139449e281185ab42a0095eetplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://bbs-img.huaweicloud.com/blogs/img/image3%28269%29.png"
    data-srcset="https://bbs-img.huaweicloud.com/blogs/img/image3%28269%29.png, https://bbs-img.huaweicloud.com/blogs/img/image3%28269%29.png 1.5x, https://bbs-img.huaweicloud.com/blogs/img/image3%28269%29.png 2x"
    data-sizes="auto"
    alt="img"
    title="img"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220424223135943.png"
    data-srcset="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220424223135943.png, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220424223135943.png 1.5x, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220424223135943.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220424223135943.png"
    title="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220424223135943.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://bbs-img.huaweicloud.com/blogs/img/images_162391078762653.png"
    data-srcset="https://bbs-img.huaweicloud.com/blogs/img/images_162391078762653.png, https://bbs-img.huaweicloud.com/blogs/img/images_162391078762653.png 1.5x, https://bbs-img.huaweicloud.com/blogs/img/images_162391078762653.png 2x"
    data-sizes="auto"
    alt="img"
    title="img"/></p>
<h3 id="list-watch机制控制器架构">List-Watch机制控制器架构</h3>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210559303.png"
    data-srcset="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210559303.png, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210559303.png 1.5x, https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210559303.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210559303.png"
    title="https://gitee.com/github-25970295/blogimgv2022/raw/master/image-20220810210559303.png"/></p>
<p>1、<code>客户端提交创建请求</code>，可以通过<code>API Server的Restful API</code>，也可以使用<code>kubectl命令行工具</code>。支持的数据类型包括JSON和YAML。</p>
<p>2、<code>API Server处理用户请求，存储Pod数据到etcd</code>。</p>
<p>3、<code>调度器通过API Server查看未绑定的Pod</code>。尝试为Pod分配主机。</p>
<p>4、<code>过滤主机 (调度预选)</code>：调度器用一组规则过滤掉不符合要求的主机。比如Pod指定了所需要的资源量，那么可用资源比Pod需要的资源量少的主机会被过滤掉。</p>
<p>5、<code>主机打分(调度优选)</code>：对第一步筛选出的符合要求的主机进行打分，在主机打分阶段，调度器会考虑一些整体优化策略，比如把容一个Replication Controller的副本分布到不同的主机上，使用最低负载的主机等。</p>
<p>6、<code>选择主机</code>：选择打分最高的主机，<code>进行binding操作，结果存储到etcd中</code>。</p>
<p>7、kubelet根据调度结果<code>执行Pod创建操作</code>： 绑定成功后，scheduler会调用APIServer的API在etcd中创建一个boundpod对象，描述在一个工作节点上绑定运行的所有pod信息。运行在每个工作节点上的kubelet也会定期与etcd同步boundpod信息，一旦发现应该在该工作节点上运行的boundpod对象没有更新，则调用Docker API创建并启动pod内的容器。</p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogimgv2022/raw/master/af449707a9ba439185a3a937452cf5b1tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp"
    data-srcset="https://gitee.com/github-25970295/blogimgv2022/raw/master/af449707a9ba439185a3a937452cf5b1tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp, https://gitee.com/github-25970295/blogimgv2022/raw/master/af449707a9ba439185a3a937452cf5b1tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp 1.5x, https://gitee.com/github-25970295/blogimgv2022/raw/master/af449707a9ba439185a3a937452cf5b1tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/blogimgv2022/raw/master/af449707a9ba439185a3a937452cf5b1tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp"
    title="https://gitee.com/github-25970295/blogimgv2022/raw/master/af449707a9ba439185a3a937452cf5b1tplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/blogimgv2022/raw/master/92b20772e5164de5a5c9bb076cf0160btplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp"
    data-srcset="https://gitee.com/github-25970295/blogimgv2022/raw/master/92b20772e5164de5a5c9bb076cf0160btplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp, https://gitee.com/github-25970295/blogimgv2022/raw/master/92b20772e5164de5a5c9bb076cf0160btplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp 1.5x, https://gitee.com/github-25970295/blogimgv2022/raw/master/92b20772e5164de5a5c9bb076cf0160btplv-k3u1fbpfcp-zoom-in-crop-mark3024000.awebp 2x"
    data-sizes="auto"
    alt="image.png"
    title="image.png"/></p>
<h2 id="1-node">1. Node</h2>
<h3 id="1-node-status">.1. Node status</h3>
<h4 id="1-address">1. Address</h4>
<ul>
<li>HostName: The hostname as reported by the node&rsquo;s kernel. Can be overridden via the kubelet <code>--hostname-override</code> parameter.</li>
<li>ExternalIP: Typically the IP address of the node that is externally routable (available from outside the cluster).</li>
<li>InternalIP: Typically the IP address of the node that is routable only within the cluster.</li>
</ul>
<h4 id="2-conditions">2. Conditions</h4>
<table>
<thead>
<tr>
<th>Node Condition</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Ready</code></td>
<td><code>True</code> if the node is healthy and ready to accept pods, <code>False</code> if the node is not healthy and is not accepting pods, and <code>Unknown</code> if the node controller has not heard from the node in the last <code>node-monitor-grace-period</code> (default is 40 seconds)</td>
</tr>
<tr>
<td><code>DiskPressure</code></td>
<td><code>True</code> if pressure exists on the disk size—that is, if the disk capacity is low; otherwise <code>False</code></td>
</tr>
<tr>
<td><code>MemoryPressure</code></td>
<td><code>True</code> if pressure exists on the node memory—that is, if the node memory is low; otherwise <code>False</code></td>
</tr>
<tr>
<td><code>PIDPressure</code></td>
<td><code>True</code> if pressure exists on the processes—that is, if there are too many processes on the node; otherwise <code>False</code></td>
</tr>
<tr>
<td><code>NetworkUnavailable</code></td>
<td><code>True</code> if the network for the node is not correctly configured, otherwise <code>False</code></td>
</tr>
</tbody>
</table>
<h4 id="3-capacity-and-allocatable">3. Capacity and Allocatable</h4>
<ul>
<li>Describes the resources available on the node: CPU, memory, and the maximum number of pods that can be scheduled onto the node.</li>
</ul>
<h4 id="4-info">4. Info</h4>
<ul>
<li>Describes general information about the node, such as kernel version, Kubernetes version (kubelet and kube-proxy version), container runtime details, and which operating system the node uses. The kubelet gathers this information from the node and publishes it into the Kubernetes API.</li>
</ul>
<h2 id="2-control-plane-node-communication">2. Control Plane-Node Communication</h2>
<h3 id="1-node-to-control-plane">.1. Node to Control Plane</h3>
<ul>
<li>The apiserver is configured to listen for remote connections on a secure HTTPS port (typically 443) with one or more forms of client <a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/"target="_blank" rel="external nofollow noopener noreferrer">authentication<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> enabled.</li>
</ul>
<h3 id="2-control-plane-to-node">.2. Control Plane to node</h3>
<h4 id="1-apiserver-to-kubelet">1. apiserver to kubelet</h4>
<ul>
<li>Fetching logs for pods.</li>
<li>Attaching (through kubectl) to running pods.</li>
<li>Providing the kubelet&rsquo;s port-forwarding functionality.</li>
</ul>
<h4 id="2-apiserver-to-nodes-pods-and-services">2. apiserver to nodes, pods, and services</h4>
<ul>
<li>from the apiserver to any node, pod, or service through the apiserver&rsquo;s proxy functionality</li>
</ul>
<h2 id="3-cloud-controller-manager">3. Cloud controller manager</h2>
<h3 id="1-node-controller">.1. Node controller</h3>
<ol>
<li>Update a Node object with the corresponding server&rsquo;s unique identifier obtained from the cloud provider API.</li>
<li>Annotating and labelling the Node object with cloud-specific information, such as the region the node is deployed into and the resources (CPU, memory, etc) that it has available.</li>
<li>Obtain the node&rsquo;s hostname and network addresses.</li>
<li>Verifying the node&rsquo;s health. In case a node becomes unresponsive, this controller checks with your cloud provider&rsquo;s API to see if the server has been deactivated / deleted / terminated. If the node has been deleted from the cloud, the controller deletes the Node object from your Kubernetes cluster.</li>
</ol>
<h3 id="2-route-controller">.2. Route controller</h3>
<ul>
<li>configuring routes in the cloud appropriately so that containers on different nodes in your Kubernetes cluster can communicate with each other.</li>
</ul>
<h3 id="3-service-controller">.3. Service controller</h3>
<ul>
<li>integrate with cloud infrastructure components such as managed load balancers, IP addresses, network packet filtering, and target health checking.</li>
</ul>
<h2 id="4-container-runtime-interface-cri">4. Container Runtime Interface (CRI)</h2>
<ul>
<li>The Kubernetes Container Runtime Interface (CRI) defines the main <a href="https://grpc.io/"target="_blank" rel="external nofollow noopener noreferrer">gRPC<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> protocol for the communication between the <a href="https://kubernetes.io/docs/concepts/overview/components/#node-components"target="_blank" rel="external nofollow noopener noreferrer">cluster components<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> <a href="https://kubernetes.io/docs/reference/generated/kubelet"target="_blank" rel="external nofollow noopener noreferrer">kubelet<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a> and <a href="https://kubernetes.io/docs/setup/production-environment/container-runtimes"target="_blank" rel="external nofollow noopener noreferrer">container runtime<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
<li>The kubelet acts as a client when connecting to the container runtime via gRPC. The runtime and image service endpoints have to be available in the container runtime, which can be configured separately within the kubelet by using the <code>--image-service-endpoint</code> and <code>--container-runtime-endpoint</code> <a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet"target="_blank" rel="external nofollow noopener noreferrer">command line flags<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
</ul>
<h2 id="5-framework">5. Framework</h2>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/picture2022/raw/master/core-ecosystem.png"
    data-srcset="https://gitee.com/github-25970295/picture2022/raw/master/core-ecosystem.png, https://gitee.com/github-25970295/picture2022/raw/master/core-ecosystem.png 1.5x, https://gitee.com/github-25970295/picture2022/raw/master/core-ecosystem.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/picture2022/raw/master/core-ecosystem.png"
    title="https://gitee.com/github-25970295/picture2022/raw/master/core-ecosystem.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/picture2022/raw/master/workflow.png"
    data-srcset="https://gitee.com/github-25970295/picture2022/raw/master/workflow.png, https://gitee.com/github-25970295/picture2022/raw/master/workflow.png 1.5x, https://gitee.com/github-25970295/picture2022/raw/master/workflow.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/picture2022/raw/master/workflow.png"
    title="https://gitee.com/github-25970295/picture2022/raw/master/workflow.png"/></p>
<p><img
    class="lazyload"
    src="/liudongdong1.github.io/svg/loading.min.svg"
    data-src="https://gitee.com/github-25970295/picture2022/raw/master/ports.png"
    data-srcset="https://gitee.com/github-25970295/picture2022/raw/master/ports.png, https://gitee.com/github-25970295/picture2022/raw/master/ports.png 1.5x, https://gitee.com/github-25970295/picture2022/raw/master/ports.png 2x"
    data-sizes="auto"
    alt="https://gitee.com/github-25970295/picture2022/raw/master/ports.png"
    title="https://gitee.com/github-25970295/picture2022/raw/master/ports.png"/></p>
<h3 id="resource">Resource</h3>
<ul>
<li><a href="https://juejin.cn/post/6952331691524358174#heading-5"target="_blank" rel="external nofollow noopener noreferrer">https://juejin.cn/post/6952331691524358174#heading-5<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden="true"></i></a></li>
</ul>
</div>
<div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title=2023-09-24&#32;17:00:04>更新于 2023-09-24&nbsp;</span>
      </div><div class="post-info-license">
          <span><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span>
        </div></div>
    <div class="post-info-line">
      <div class="post-info-md"><span><a href="liudongdong1.github.io/kubernetes-cluster-architecture/index.md" title="阅读原始文档" class="link-to-markdown">阅读原始文档</a></span><span><a href="https://liudongdong1.github.io/edit/master/content/posts%5c%e5%ad%98%e5%82%a8%e8%ae%be%e8%ae%a1%5c%e8%99%9a%e6%8b%9f%e5%8c%96%e6%8a%80%e6%9c%af%5cKubernetes-Cluster%20Architecture.md" title="编辑此页"target="_blank" rel="external nofollow noopener noreferrer" class="link-to-edit">编辑此页</a></span></div>
      <div class="post-info-share">
        <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="liudongdong1.github.io/kubernetes-cluster-architecture/" data-title="Kubernetes-Cluster Architecture" data-hashtags="Storage"><i class="fa-brands fa-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="liudongdong1.github.io/kubernetes-cluster-architecture/" data-hashtag="Storage"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="liudongdong1.github.io/kubernetes-cluster-architecture/" data-title="Kubernetes-Cluster Architecture" data-image="https://cdn.pixabay.com/photo/2022/05/05/01/11/cormorant-7175037__340.jpg"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
      </div>
    </div>
  </div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="liudongdong1.github.io/tags/storage/">Storage</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="liudongdong1.github.io/">主页</a></span>
    </section>
  </div>

  <div class="post-nav"><a href="liudongdong1.github.io/kubernetes_etcd%E4%BD%BF%E7%94%A8/" class="prev" rel="prev" title="Kubernetes-etcd使用"><i class="fa-solid fa-angle-left fa-fw" aria-hidden="true"></i>Kubernetes-etcd使用</a>
      <a href="liudongdong1.github.io/kubernetes_%E5%AD%98%E5%82%A8%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/" class="next" rel="next" title="Kubernetes_存储流程详解">Kubernetes_存储流程详解<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">由 <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.118.2">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.2.17-RC"><img class="fixit-icon" src="/liudongdong1.github.io/fixit.min.svg" alt="FixIt logo" />&nbsp;FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2020 - 2023</span><span class="author" itemprop="copyrightHolder">
              <a href="https://liudongdong1.github.io/"target="_blank" rel="external nofollow noopener noreferrer">LiuDongdong</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div><div class="footer-line statistics"><span class="site-time" title='网站运行中 ...'><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden="true"></i>&nbsp;<span class="run-times">网站运行中 ...</span></span></div><div class="footer-line ibruce">
          <span id="busuanzi_container_site_uv" title='总访客数'><i class="fa-regular fa-user fa-fw" aria-hidden="true"></i>&nbsp;<span id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span></span><span id="busuanzi_container_site_pv" class="footer-divider" title='总访问量'><i class="fa-regular fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden="true"></i></span></span>
        </div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="回到顶部"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric">0%</span>
        </div></div><a href="https://liudongdong1.github.io/" title="在 GitHub 上查看源代码"target="_blank" rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><div id="mask"></div><div class="reading-progress-bar" style="left: 0;top: 0;--bg-progress: #0076ff;--bg-progress-dark: #fff;"></div><noscript>
    <div class="noscript-warning">FixIt 主题在启用 JavaScript 的情况下效果最佳。</div>
  </noscript>
</div><link rel="stylesheet" href="/liudongdong1.github.io/lib/katex/katex.min.css"><link rel="stylesheet" href="/liudongdong1.github.io/lib/cookieconsent/cookieconsent.min.css"><script src="/liudongdong1.github.io/lib/autocomplete/autocomplete.min.js" defer></script><script src="/liudongdong1.github.io/lib/algoliasearch/algoliasearch-lite.umd.min.js" defer></script><script src="/liudongdong1.github.io/lib/lazysizes/lazysizes.min.js" async defer></script><script src="/liudongdong1.github.io/lib/sharer/sharer.min.js" async defer></script><script src="/liudongdong1.github.io/lib/typeit/index.umd.js" defer></script><script src="/liudongdong1.github.io/lib/katex/katex.min.js" defer></script><script src="/liudongdong1.github.io/lib/katex/auto-render.min.js" defer></script><script src="/liudongdong1.github.io/lib/katex/copy-tex.min.js" defer></script><script src="/liudongdong1.github.io/lib/katex/mhchem.min.js" defer></script><script src="/liudongdong1.github.io/lib/cookieconsent/cookieconsent.min.js" defer></script><script src="/liudongdong1.github.io/lib/pangu/pangu.min.js" defer></script><script src="/liudongdong1.github.io/lib/cell-watermark/watermark.min.js" defer></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async defer></script><script>window.config={"code":{"copyTitle":"复制到剪贴板","editLockTitle":"锁定可编辑代码块","editUnLockTitle":"解锁可编辑代码块","editable":true,"maxShownLines":10},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验。"},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"data":{"typeit-header-subtitle-desktop":"\u003cspan style='font-family: MMT,\"沐目体\";'\u003e吾日三省吾身\u003c/span\u003e","typeit-header-subtitle-mobile":"\u003cspan style='font-family: MMT,\"沐目体\";'\u003e吾日三省吾身\u003c/span\u003e"},"enablePWA":true,"enablePangu":true,"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"2R1K9SKLQZ","algoliaIndex":"index.zh-cn","algoliaSearchKey":"4a226aa1c5c98d6859e4d1386adb2bc7","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"},"siteTime":"2020-12-18T16:15:22+08:00","typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"typeit-header-subtitle-desktop":["typeit-header-subtitle-desktop"],"typeit-header-subtitle-mobile":["typeit-header-subtitle-mobile"]},"duration":-1,"speed":100},"watermark":{"appendto":".wrapper\u003emain","colspacing":30,"content":"\u003cimg class=\"fixit-icon\" src=\"/fixit.min.svg\" alt=\"FixIt logo\" /\u003e FixIt 主题","enable":true,"fontfamily":"inherit","fontsize":0.85,"height":21,"opacity":0.0125,"rotate":15,"rowspacing":60,"width":150}};</script><script src="/liudongdong1.github.io/js/theme.min.js" defer></script><script src="/liudongdong1.github.io/js/custom.min.js" defer></script></body>
</html>
